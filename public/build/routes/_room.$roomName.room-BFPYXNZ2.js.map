{
  "version": 3,
  "sources": ["../../../node_modules/react-use/lib/misc/util.js", "../../../node_modules/react-use/lib/useIsomorphicLayoutEffect.js", "../../../node_modules/react-use/lib/useMeasure.js", "../../../app/routes/_room.$roomName.room.tsx", "../../../app/components/AiPushToTalkButton.tsx", "../../../app/utils/playSound/playSound.ts", "../../../app/utils/playSound/index.ts", "../../../app/utils/rxjs/inaudibleAudioTrack$.ts", "../../../app/components/InviteAiDialog.tsx", "../../../app/components/RecordAiVoiceActivity.tsx", "../../../app/components/PullAudioTracks.tsx", "../../../app/components/AudioStream.tsx", "../../../app/components/AiButton.tsx", "../../../app/components/HighPacketLossWarningsToast.tsx", "../../../app/hooks/useConditionForAtLeast.ts", "../../../app/utils/ewma.ts", "../../../app/utils/mode.ts", "../../../app/utils/rxjs/getPacketLossStats$.ts", "../../../app/components/IceDisconnectedToast.tsx", "../../../app/components/LeaveRoomButton.tsx", "../../../app/components/OverflowMenu.tsx", "../../../node_modules/@radix-ui/react-dropdown-menu/src/DropdownMenu.tsx", "../../../node_modules/@radix-ui/react-menu/src/Menu.tsx", "../../../node_modules/@radix-ui/react-roving-focus/src/RovingFocusGroup.tsx", "../../../app/components/DropdownMenu.tsx", "../../../app/utils/populateTraceLink.ts", "../../../node_modules/@radix-ui/react-alert-dialog/src/AlertDialog.tsx", "../../../app/components/AlertDialog.tsx", "../../../app/components/MuteUserButton.tsx", "../../../app/components/OptionalLink.tsx", "../../../app/components/ParticipantsMenu.tsx", "../../../app/hooks/useCopyToClipboard.tsx", "../../../app/components/TextArea.tsx", "../../../app/components/ReportBugDialog.tsx", "../../../app/components/ParticipantLayout.tsx", "../../../node_modules/rematrix/dist/rematrix.es.js", "../../../node_modules/flip-toolkit/src/utilities/index.ts", "../../../node_modules/flip-toolkit/src/forked-rebound/onFrame.js", "../../../node_modules/flip-toolkit/src/constants.ts", "../../../node_modules/flip-toolkit/src/springSettings/index.ts", "../../../node_modules/flip-toolkit/src/forked-rebound/util.js", "../../../node_modules/flip-toolkit/src/forked-rebound/Loopers.js", "../../../node_modules/flip-toolkit/src/forked-rebound/Spring.js", "../../../node_modules/flip-toolkit/src/forked-rebound/SpringSystem.js", "../../../node_modules/flip-toolkit/src/flip/animateFlippedElements/spring/index.ts", "../../../node_modules/flip-toolkit/src/flip/animateFlippedElements/index.ts", "../../../node_modules/flip-toolkit/src/flip/getFlippedElementPositions/utilities.ts", "../../../node_modules/flip-toolkit/src/flip/index.ts", "../../../node_modules/flip-toolkit/src/flip/getFlippedElementPositions/getFlippedElementPositionsAfterUpdate/index.ts", "../../../node_modules/flip-toolkit/src/flip/animateUnflippedElements/index.ts", "../../../node_modules/flip-toolkit/src/flip/getFlippedElementPositions/getFlippedElementPositionsBeforeUpdate/index.ts", "../../../node_modules/flip-toolkit/src/Flipper.ts", "../../../node_modules/flip-toolkit/src/Spring/index.ts", "../../../node_modules/react-flip-toolkit/src/Flipper/context.ts", "../../../node_modules/react-flip-toolkit/src/Flipper/index.tsx", "../../../node_modules/react-flip-toolkit/src/Flipped/index.tsx", "../../../node_modules/react-flip-toolkit/src/ExitContainer/index.tsx", "../../../app/utils/calculateLayout.ts", "../../../app/components/Participant.tsx", "../../../app/hooks/useDeadPulledTrackMonitor.tsx", "../../../app/hooks/useStageManager.ts", "../../../app/utils/isNonNullable.ts", "../../../app/utils/rxjs/ewma.ts", "../../../app/utils/rxjs/getPacketLoss$.ts", "../../../app/hooks/usePulledVideoTrack.tsx", "../../../app/components/AudioGlow.tsx", "../../../app/components/ConnectionIndicator.tsx", "../../../app/components/HoverFade.tsx", "../../../app/components/RaiseHandButton.tsx", "../../../app/components/ScreenshareButton.tsx", "../../../app/hooks/useBroadcastStatus.ts", "../../../app/hooks/useShowDebugInfoShortcut.ts", "../../../app/hooks/useSounds.ts", "../../../app/hooks/useUserJoinLeaveToasts.tsx"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isNavigator = exports.isBrowser = exports.off = exports.on = exports.noop = void 0;\nvar noop = function () { };\nexports.noop = noop;\nfunction on(obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (obj && obj.addEventListener) {\n        obj.addEventListener.apply(obj, args);\n    }\n}\nexports.on = on;\nfunction off(obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (obj && obj.removeEventListener) {\n        obj.removeEventListener.apply(obj, args);\n    }\n}\nexports.off = off;\nexports.isBrowser = typeof window !== 'undefined';\nexports.isNavigator = typeof navigator !== 'undefined';\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar util_1 = require(\"./misc/util\");\nvar useIsomorphicLayoutEffect = util_1.isBrowser ? react_1.useLayoutEffect : react_1.useEffect;\nexports.default = useIsomorphicLayoutEffect;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar react_1 = require(\"react\");\nvar useIsomorphicLayoutEffect_1 = tslib_1.__importDefault(require(\"./useIsomorphicLayoutEffect\"));\nvar util_1 = require(\"./misc/util\");\nvar defaultState = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n};\nfunction useMeasure() {\n    var _a = react_1.useState(null), element = _a[0], ref = _a[1];\n    var _b = react_1.useState(defaultState), rect = _b[0], setRect = _b[1];\n    var observer = react_1.useMemo(function () {\n        return new window.ResizeObserver(function (entries) {\n            if (entries[0]) {\n                var _a = entries[0].contentRect, x = _a.x, y = _a.y, width = _a.width, height = _a.height, top_1 = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;\n                setRect({ x: x, y: y, width: width, height: height, top: top_1, left: left, bottom: bottom, right: right });\n            }\n        });\n    }, []);\n    useIsomorphicLayoutEffect_1.default(function () {\n        if (!element)\n            return;\n        observer.observe(element);\n        return function () {\n            observer.disconnect();\n        };\n    }, [element]);\n    return [ref, rect];\n}\nexports.default = util_1.isBrowser && typeof window.ResizeObserver !== 'undefined'\n    ? useMeasure\n    : (function () { return [util_1.noop, defaultState]; });\n", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/_room.$roomName.room.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/_room.$roomName.room.tsx\");\n  import.meta.hot.lastModified = \"1738073419119.485\";\n}\n// REMIX HMR END\n\nimport { json } from '@remix-run/cloudflare';\nimport { useLoaderData, useNavigate, useParams, useSearchParams } from '@remix-run/react';\nimport { useEffect, useState } from 'react';\nimport { useMount, useWindowSize } from 'react-use';\nimport { AiButton } from '~/components/AiButton';\nimport { CameraButton } from '~/components/CameraButton';\nimport { CopyButton } from '~/components/CopyButton';\nimport { HighPacketLossWarningsToast } from '~/components/HighPacketLossWarningsToast';\nimport { IceDisconnectedToast } from '~/components/IceDisconnectedToast';\nimport { LeaveRoomButton } from '~/components/LeaveRoomButton';\nimport { MicButton } from '~/components/MicButton';\nimport { OverflowMenu } from '~/components/OverflowMenu';\nimport { ParticipantLayout } from '~/components/ParticipantLayout';\nimport { ParticipantsButton } from '~/components/ParticipantsMenu';\nimport { PullAudioTracks } from '~/components/PullAudioTracks';\nimport { RaiseHandButton } from '~/components/RaiseHandButton';\nimport { ScreenshareButton } from '~/components/ScreenshareButton';\nimport Toast from '~/components/Toast';\nimport useBroadcastStatus from '~/hooks/useBroadcastStatus';\nimport useIsSpeaking from '~/hooks/useIsSpeaking';\nimport { useRoomContext } from '~/hooks/useRoomContext';\nimport { useShowDebugInfoShortcut } from '~/hooks/useShowDebugInfoShortcut';\nimport useSounds from '~/hooks/useSounds';\nimport useStageManager from '~/hooks/useStageManager';\nimport { useUserJoinLeaveToasts } from '~/hooks/useUserJoinLeaveToasts';\nimport getUsername from '~/utils/getUsername.server';\nimport isNonNullable from '~/utils/isNonNullable';\nexport const loader = async ({\n  request,\n  context\n}) => {\n  const username = await getUsername(request);\n  return json({\n    username,\n    bugReportsEnabled: Boolean(context.env.FEEDBACK_URL && context.env.FEEDBACK_QUEUE && context.env.FEEDBACK_STORAGE),\n    mode: context.mode,\n    hasDb: Boolean(context.env.DB),\n    hasAiCredentials: Boolean(context.env.OPENAI_API_TOKEN && context.env.OPENAI_MODEL_ENDPOINT)\n  });\n};\nexport default function Room() {\n  _s();\n  const {\n    joined\n  } = useRoomContext();\n  const navigate = useNavigate();\n  const {\n    roomName\n  } = useParams();\n  const {\n    mode,\n    bugReportsEnabled\n  } = useLoaderData();\n  const [search] = useSearchParams();\n  useEffect(() => {\n    if (!joined && mode !== 'development') navigate(`/${roomName}${search.size > 0 ? '?' + search.toString() : ''}`);\n  }, [joined, mode, navigate, roomName, search]);\n  if (!joined && mode !== 'development') return null;\n  return <Toast.Provider>\n\t\t\t<JoinedRoom bugReportsEnabled={bugReportsEnabled} />\n\t\t</Toast.Provider>;\n}\n_s(Room, \"fRa3jWDB2KHbO3egBC82QidF6Sc=\", false, function () {\n  return [useRoomContext, useNavigate, useParams, useLoaderData, useSearchParams];\n});\n_c = Room;\nfunction JoinedRoom({\n  bugReportsEnabled\n}) {\n  _s2();\n  const {\n    hasDb,\n    hasAiCredentials\n  } = useLoaderData();\n  const {\n    userMedia,\n    partyTracks,\n    pushedTracks,\n    showDebugInfo,\n    pinnedTileIds,\n    room: {\n      otherUsers,\n      websocket,\n      identity,\n      roomState: {\n        meetingId\n      }\n    }\n  } = useRoomContext();\n  useShowDebugInfoShortcut();\n  const [raisedHand, setRaisedHand] = useState(false);\n  const speaking = useIsSpeaking(userMedia.audioStreamTrack);\n  useMount(() => {\n    if (otherUsers.length > 5) {\n      userMedia.turnMicOff();\n    }\n  });\n  useBroadcastStatus({\n    userMedia,\n    partyTracks: partyTracks,\n    websocket,\n    identity,\n    pushedTracks,\n    raisedHand,\n    speaking\n  });\n  useSounds(otherUsers);\n  useUserJoinLeaveToasts(otherUsers);\n  const {\n    width\n  } = useWindowSize();\n  const someScreenshare = otherUsers.some(u => u.tracks.screenshare) || Boolean(identity?.tracks.screenshare);\n  const stageLimit = width < 600 ? 2 : someScreenshare ? 5 : 8;\n  const {\n    recordActivity,\n    actorsOnStage\n  } = useStageManager(otherUsers, stageLimit, identity);\n  useEffect(() => {\n    otherUsers.forEach(u => {\n      if (u.speaking || u.raisedHand) recordActivity(u);\n    });\n  }, [otherUsers, recordActivity]);\n  const pinnedActors = actorsOnStage.filter(u => pinnedTileIds.includes(u.id));\n  const unpinnedActors = actorsOnStage.filter(u => !pinnedTileIds.includes(u.id));\n  return <PullAudioTracks audioTracks={otherUsers.map(u => u.tracks.audio).filter(isNonNullable)}>\n\t\t\t<div className=\"flex flex-col h-full bg-white dark:bg-zinc-800\">\n\t\t\t\t<div className=\"relative flex-grow bg-black isolate\">\n\t\t\t\t\t<div className=\"absolute inset-0 flex isolate gap-[var(--gap)] p-[var(--gap)]\" style={{\n          '--gap': '1rem'\n        }}>\n\t\t\t\t\t\t{pinnedActors.length > 0 && <div className=\"flex-grow-[5] overflow-hidden relative\">\n\t\t\t\t\t\t\t\t<ParticipantLayout users={pinnedActors.filter(isNonNullable)} />\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t<div className=\"flex-grow overflow-hidden relative\">\n\t\t\t\t\t\t\t<ParticipantLayout users={unpinnedActors.filter(isNonNullable)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Toast.Viewport className=\"absolute bottom-0 right-0\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex flex-wrap items-center justify-center gap-2 p-2 text-sm md:gap-4 md:p-5 md:text-base\">\n\t\t\t\t\t{hasAiCredentials && <AiButton recordActivity={recordActivity} />}\n\t\t\t\t\t<MicButton warnWhenSpeakingWhileMuted />\n\t\t\t\t\t<CameraButton />\n\t\t\t\t\t<ScreenshareButton />\n\t\t\t\t\t<RaiseHandButton raisedHand={raisedHand} onClick={() => setRaisedHand(!raisedHand)} />\n\t\t\t\t\t<ParticipantsButton identity={identity} otherUsers={otherUsers} className=\"hidden md:block\"></ParticipantsButton>\n\t\t\t\t\t<OverflowMenu bugReportsEnabled={bugReportsEnabled} />\n\t\t\t\t\t<LeaveRoomButton navigateToFeedbackPage={hasDb} meetingId={meetingId} />\n\t\t\t\t\t{showDebugInfo && meetingId && <CopyButton contentValue={meetingId}>Meeting Id</CopyButton>}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<HighPacketLossWarningsToast />\n\t\t\t<IceDisconnectedToast />\n\t\t</PullAudioTracks>;\n}\n_s2(JoinedRoom, \"/xUePkrgS4FrvRVOrbg4zCa4e/o=\", false, function () {\n  return [useLoaderData, useRoomContext, useShowDebugInfoShortcut, useIsSpeaking, useMount, useBroadcastStatus, useSounds, useUserJoinLeaveToasts, useWindowSize, useStageManager];\n});\n_c2 = JoinedRoom;\nvar _c, _c2;\n$RefreshReg$(_c, \"Room\");\n$RefreshReg$(_c2, \"JoinedRoom\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/AiPushToTalkButton.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/AiPushToTalkButton.tsx\");\n  import.meta.hot.lastModified = \"1738073419110.2612\";\n}\n// REMIX HMR END\n\nimport { useObservableAsValue, useValueAsObservable } from 'partytracks/react';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { switchMap } from 'rxjs';\nimport { useRoomContext } from '~/hooks/useRoomContext';\nimport { playSound } from '~/utils/playSound';\nimport { inaudibleAudioTrack$ } from '~/utils/rxjs/inaudibleAudioTrack$';\nimport { Button } from './Button';\nfunction useButtonIsHeldDown({\n  key,\n  disabled\n}) {\n  _s();\n  const [keyIsHeldDown, setKeyIsHeldDown] = useState(false);\n  const buttonRef = useRef(null);\n  useEffect(() => {\n    const button = buttonRef.current;\n    let timeout = -1;\n    const setTrue = () => {\n      if (!disabled) {\n        setKeyIsHeldDown(true);\n        clearTimeout(timeout);\n      }\n    };\n    const setFalse = () => {\n      timeout = window.setTimeout(() => {\n        setKeyIsHeldDown(false);\n      }, 200);\n    };\n    const onKeyDown = e => {\n      if (e.key.toLowerCase() === key.toLowerCase()) {\n        setTrue();\n      }\n    };\n    const onKeyUp = e => {\n      if (e.key.toLowerCase() === key.toLowerCase()) {\n        setFalse();\n      }\n    };\n    document.addEventListener('keydown', onKeyDown);\n    document.addEventListener('keyup', onKeyUp);\n    document.addEventListener('blur', setFalse);\n    button?.addEventListener('pointerdown', setTrue);\n    button?.addEventListener('pointerup', setFalse);\n    return () => {\n      clearTimeout(timeout);\n      document.removeEventListener('keydown', onKeyDown);\n      document.removeEventListener('keyup', onKeyUp);\n      document.removeEventListener('blur', setFalse);\n      button?.removeEventListener('pointerdown', setTrue);\n      button?.removeEventListener('pointerup', setFalse);\n    };\n  }, [disabled, key]);\n  return [keyIsHeldDown, buttonRef];\n}\n_s(useButtonIsHeldDown, \"yzNJsAID1yA7qBR7ndHnsWu13C8=\");\nexport function AiPushToTalkButtion() {\n  _s2();\n  const {\n    partyTracks,\n    room: {\n      websocket,\n      roomState: {\n        ai: {\n          controllingUser\n        }\n      }\n    },\n    userMedia: {\n      turnMicOn,\n      publicAudioTrack$\n    }\n  } = useRoomContext();\n  const hasControl = controllingUser === websocket.id;\n  const disabled = !hasControl && controllingUser !== undefined;\n  const [holdingTalkButton, talkButtonRef] = useButtonIsHeldDown({\n    key: 'a',\n    disabled\n  });\n  const holdingTalkButton$ = useValueAsObservable(holdingTalkButton);\n  const audioTrack$ = useMemo(() => holdingTalkButton$.pipe(switchMap(talking => talking ? publicAudioTrack$ : inaudibleAudioTrack$)), [holdingTalkButton$, publicAudioTrack$]);\n  const pushedAiAudioTrack$ = useMemo(() => partyTracks.push(audioTrack$), [audioTrack$, partyTracks]);\n  const pushedAiAudioTrack = useObservableAsValue(pushedAiAudioTrack$);\n  useEffect(() => {\n    if (holdingTalkButton && pushedAiAudioTrack) {\n      turnMicOn();\n      console.log('\uD83E\uDD16 Requesting ai control');\n      websocket.send(JSON.stringify({\n        type: 'requestAiControl',\n        track: pushedAiAudioTrack\n      }));\n    } else {\n      console.log('\uD83E\uDD16 Relinquishing ai control!');\n      websocket.send(JSON.stringify({\n        type: 'relenquishAiControl'\n      }));\n    }\n  }, [holdingTalkButton, pushedAiAudioTrack, turnMicOn, websocket]);\n  useEffect(() => {\n    if (controllingUser !== undefined) {\n      playSound('aiReady');\n    }\n  }, [controllingUser]);\n  return <Button className=\"text-xs select-none\" disabled={disabled} ref={talkButtonRef}>\n\t\t\t{hasControl ? 'Speaking to Ai...' : 'Hold to talk to AI'}\n\t\t</Button>;\n}\n_s2(AiPushToTalkButtion, \"E87wrAxwqzQdplyH5N7ues55Kgo=\", false, function () {\n  return [useRoomContext, useButtonIsHeldDown, useValueAsObservable, useObservableAsValue];\n});\n_c = AiPushToTalkButtion;\nvar _c;\n$RefreshReg$(_c, \"AiPushToTalkButtion\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/utils/playSound/playSound.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419123.7341\";\n}\n// REMIX HMR END\n\nimport invariant from 'tiny-invariant'\nimport aiReady from './sounds/AIReady.mp3'\nimport join from './sounds/Join.mp3'\nimport leave from './sounds/Leave.mp3'\nimport raiseHand from './sounds/RaiseHand.mp3'\n\nconst fetchOnce = async (...args: Parameters<typeof fetch>) => {\n\tinvariant(\n\t\t!args.some((a) => a instanceof Request),\n\t\t'fetchOnce cannot cache with Request parameters'\n\t)\n\tconst cache = new Map<string, Response>()\n\tconst key = JSON.stringify(args)\n\tlet result = cache.get(key)\n\tif (result) {\n\t\treturn result.clone()\n\t} else {\n\t\tresult = await fetch(...args)\n\t\tcache.set(key, result)\n\t\treturn result.clone()\n\t}\n}\n\nconst sounds = {\n\tleave,\n\tjoin,\n\traiseHand,\n\taiReady,\n}\n\nconst volumeMap = {\n\tjoin: 0.2,\n\tleave: 0.2,\n\traiseHand: 0.1,\n\taiReady: 0.1,\n} satisfies Record<keyof typeof sounds, number>\n\nexport async function playSound(sound: keyof typeof sounds) {\n\tconst arrayBuffer = await fetchOnce(sounds[sound]).then((res) =>\n\t\tres.arrayBuffer()\n\t)\n\tconst context = new AudioContext()\n\tconst audioBuffer = await context.decodeAudioData(arrayBuffer)\n\tconst source = context.createBufferSource()\n\tconst gainNode = context.createGain()\n\tsource.buffer = audioBuffer\n\tsource.connect(gainNode)\n\tgainNode.connect(context.destination)\n\tgainNode.gain.setValueAtTime(volumeMap[sound], context.currentTime)\n\tsource.start()\n}\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/utils/playSound/index.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419123.661\";\n}\n// REMIX HMR END\n\nexport { playSound } from './playSound'\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/utils/rxjs/inaudibleAudioTrack$.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419126.5032\";\n}\n// REMIX HMR END\n\nimport { Observable } from 'rxjs'\n\nexport const inaudibleAudioTrack$ = new Observable<MediaStreamTrack>(\n\t(subscriber) => {\n\t\tconst audioContext = new window.AudioContext()\n\n\t\tconst oscillator = audioContext.createOscillator()\n\t\toscillator.type = 'triangle'\n\t\toscillator.frequency.setValueAtTime(20, audioContext.currentTime)\n\n\t\tconst gainNode = audioContext.createGain()\n\t\tgainNode.gain.setValueAtTime(0.02, audioContext.currentTime)\n\n\t\toscillator.connect(gainNode)\n\n\t\tconst destination = audioContext.createMediaStreamDestination()\n\t\tgainNode.connect(destination)\n\n\t\toscillator.start()\n\n\t\tconst track = destination.stream.getAudioTracks()[0]\n\n\t\tsubscriber.next(track)\n\t\treturn () => {\n\t\t\ttrack.stop()\n\t\t\taudioContext.close()\n\t\t}\n\t}\n)\n", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/InviteAiDialog.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/InviteAiDialog.tsx\");\n  import.meta.hot.lastModified = \"1738601921684.8938\";\n}\n// REMIX HMR END\n\nimport { useSearchParams } from '@remix-run/react';\nimport { useState } from 'react';\nimport { useRoomContext } from '~/hooks/useRoomContext';\nimport { Button } from './Button';\nimport { Dialog, DialogContent, DialogOverlay, Portal } from './Dialog';\nconst aiVoices = ['Alloy', 'Ash', 'Ballad', 'Coral', 'Echo', 'Sage', 'Shimmer', 'Verse'];\nexport function InviteAiDialog(props) {\n  _s();\n  const [open, setOpen] = useState(false);\n  const {\n    room: {\n      websocket\n    }\n  } = useRoomContext();\n  const [params] = useSearchParams();\n  const instructions = params.get('instructions');\n  const voice = params.get('voice');\n  return <Dialog open={open} onOpenChange={setOpen}>\n\t\t\t{props.children}\n\t\t\t<Portal>\n\t\t\t\t<DialogOverlay />\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<form className=\"flex flex-col gap-4 mt-8\" onSubmit={e => {\n          e.preventDefault();\n          websocket.send(JSON.stringify({\n            type: 'enableAi',\n            ...Object.fromEntries(new FormData(e.currentTarget))\n          }));\n          setOpen(false);\n        }}>\n\t\t\t\t\t\t<div className=\"flex flex-col gap-2\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label className=\"font-medium\" htmlFor=\"instructions\">\n\t\t\t\t\t\t\t\t\tInstructions\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<textarea className=\"bg-gray-100 dark:bg-zinc-800 w-full\" id=\"instructions\" name=\"instructions\" rows={15} defaultValue={instructions ?? `You are a helpful and concise AI assistant for a video chat application called Dating app.`} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex flex-col gap-2\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label className=\"font-medium\" htmlFor=\"voice\">\n\t\t\t\t\t\t\t\t\tVoice\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<select className=\"bg-gray-100 dark:bg-zinc-800 w-full\" id=\"voice\" name=\"voice\" defaultValue={voice ?? 'ash'}>\n\t\t\t\t\t\t\t\t\t{aiVoices.map(voice => <option key={voice} value={voice.toLowerCase()}>\n\t\t\t\t\t\t\t\t\t\t\t{voice}\n\t\t\t\t\t\t\t\t\t\t</option>)}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Button type=\"submit\" className=\"self-end text-xs\">\n\t\t\t\t\t\t\tInvite AI\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</form>\n\t\t\t\t</DialogContent>\n\t\t\t</Portal>\n\t\t</Dialog>;\n}\n_s(InviteAiDialog, \"ARShMDFk/NAmaNF57cDTH+Y8/jQ=\", false, function () {\n  return [useRoomContext, useSearchParams];\n});\n_c = InviteAiDialog;\nvar _c;\n$RefreshReg$(_c, \"InviteAiDialog\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/RecordAiVoiceActivity.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/RecordAiVoiceActivity.tsx\");\n  import.meta.hot.lastModified = \"1738073419113.6238\";\n}\n// REMIX HMR END\n\nimport { useEffect } from 'react';\nimport useIsSpeaking from '~/hooks/useIsSpeaking';\nimport { usePulledAudioTrack } from './PullAudioTracks';\nexport function RecordAiVoiceActivity(props) {\n  _s();\n  const audioTrack = usePulledAudioTrack(props.user.tracks.audio);\n  const isSpeaking = useIsSpeaking(audioTrack);\n  useEffect(() => {\n    if (isSpeaking) {\n      props.recordActivity(props.user);\n    }\n  }, [isSpeaking, props]);\n  return null;\n}\n_s(RecordAiVoiceActivity, \"Tom4ZAMWp6z+v3C91MtwfXvJRFA=\", false, function () {\n  return [usePulledAudioTrack, useIsSpeaking];\n});\n_c = RecordAiVoiceActivity;\nvar _c;\n$RefreshReg$(_c, \"RecordAiVoiceActivity\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/PullAudioTracks.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/PullAudioTracks.tsx\");\n  import.meta.hot.lastModified = \"1738073419113.4536\";\n}\n// REMIX HMR END\n\nimport { createContext, useContext, useState } from 'react';\nimport { AudioStream } from './AudioStream';\nconst AudioTrackContext = createContext({});\nexport const PullAudioTracks = ({\n  audioTracks,\n  children\n}) => {\n  _s();\n  const [audioTrackMap, setAudioTrackMap] = useState({});\n  return <AudioTrackContext.Provider value={audioTrackMap}>\n\t\t\t<AudioStream tracksToPull={audioTracks} onTrackAdded={(id, track) => setAudioTrackMap(previous => ({\n      ...previous,\n      [id]: track\n    }))} onTrackRemoved={id => {\n      setAudioTrackMap(previous => {\n        const update = {\n          ...previous\n        };\n        delete update[id];\n        return update;\n      });\n    }} />\n\t\t\t{children}\n\t\t</AudioTrackContext.Provider>;\n};\n_s(PullAudioTracks, \"OC8vMVP8WCnSEf49H0joQrCB8VA=\");\n_c = PullAudioTracks;\nexport function usePulledAudioTracks() {\n  _s2();\n  return useContext(AudioTrackContext);\n}\n_s2(usePulledAudioTracks, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function usePulledAudioTrack(track) {\n  _s3();\n  const tracks = usePulledAudioTracks();\n  return track ? tracks[track] : undefined;\n}\n_s3(usePulledAudioTrack, \"rHylihL2cisJMF0dh+IUErkJ60Y=\", false, function () {\n  return [usePulledAudioTracks];\n});\nvar _c;\n$RefreshReg$(_c, \"PullAudioTracks\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/AudioStream.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/AudioStream.tsx\");\n  import.meta.hot.lastModified = \"1738073419110.7515\";\n}\n// REMIX HMR END\n\nimport { useObservableAsValue } from 'partytracks/react';\nimport { useEffect, useMemo, useRef } from 'react';\nimport { of } from 'rxjs';\nimport { useRoomContext } from '~/hooks/useRoomContext';\nexport const AudioStream = ({\n  tracksToPull,\n  onTrackAdded,\n  onTrackRemoved\n}) => {\n  _s();\n  const mediaStreamRef = useRef(new MediaStream());\n  const ref = useRef(null);\n  useEffect(() => {\n    const audio = ref.current;\n    if (!audio) return;\n    const mediaStream = mediaStreamRef.current;\n    audio.srcObject = mediaStream;\n  }, []);\n  const resetSrcObject = () => {\n    const audio = ref.current;\n    const mediaStream = mediaStreamRef.current;\n    if (!audio || !mediaStream) return;\n    // need to set srcObject again in Chrome and call play() again for Safari\n    // https://www.youtube.com/live/Tkx3OGrwVk8?si=K--P_AzNnAGrjraV&t=2533\n    // calling play() this way to make Chrome happy otherwise it throws an error\n    audio.addEventListener('canplay', () => audio.play(), {\n      once: true\n    });\n    audio.srcObject = mediaStream;\n  };\n  return <>\n\t\t\t<audio ref={ref} autoPlay />\n\t\t\t{tracksToPull.map(track => <AudioTrack key={track} track={track} mediaStream={mediaStreamRef.current} onTrackAdded={(metadata, track) => {\n      onTrackAdded(metadata, track);\n      resetSrcObject();\n    }} onTrackRemoved={(metadata, track) => {\n      onTrackRemoved(metadata, track);\n      resetSrcObject();\n    }} />)}\n\t\t</>;\n};\n_s(AudioStream, \"Ne4z92RtpRKFrqPd7hxdodzd5JM=\");\n_c = AudioStream;\nfunction AudioTrack({\n  mediaStream,\n  track,\n  onTrackAdded,\n  onTrackRemoved\n}) {\n  _s2();\n  const onTrackAddedRef = useRef(onTrackAdded);\n  onTrackAddedRef.current = onTrackAdded;\n  const onTrackRemovedRef = useRef(onTrackRemoved);\n  onTrackRemovedRef.current = onTrackRemoved;\n  const {\n    partyTracks\n  } = useRoomContext();\n  const trackObject = useMemo(() => {\n    const [sessionId, trackName] = track.split('/');\n    return {\n      sessionId,\n      trackName,\n      location: 'remote'\n    };\n  }, [track]);\n  const pulledTrack$ = useMemo(() => {\n    return partyTracks.pull(of(trackObject));\n  }, [partyTracks, trackObject]);\n  const audioTrack = useObservableAsValue(pulledTrack$);\n  useEffect(() => {\n    if (!audioTrack) return;\n    mediaStream.addTrack(audioTrack);\n    onTrackAddedRef.current(track, audioTrack);\n    return () => {\n      mediaStream.removeTrack(audioTrack);\n      onTrackRemovedRef.current(track, audioTrack);\n    };\n  }, [audioTrack, mediaStream, track]);\n  return null;\n}\n_s2(AudioTrack, \"9V3rXbRf4ZUN1eWay+iFuxTjnts=\", false, function () {\n  return [useRoomContext, useObservableAsValue];\n});\n_c2 = AudioTrack;\nvar _c, _c2;\n$RefreshReg$(_c, \"AudioStream\");\n$RefreshReg$(_c2, \"AudioTrack\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/AiButton.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/AiButton.tsx\");\n  import.meta.hot.lastModified = \"1738073419110.1704\";\n}\n// REMIX HMR END\n\nimport { useRoomContext } from '~/hooks/useRoomContext';\nimport { AiPushToTalkButtion } from './AiPushToTalkButton';\nimport { Button } from './Button';\nimport { Trigger } from './Dialog';\nimport { InviteAiDialog } from './InviteAiDialog';\nimport { RecordAiVoiceActivity } from './RecordAiVoiceActivity';\nfunction RemoveAiButton() {\n  _s();\n  const {\n    room: {\n      websocket\n    }\n  } = useRoomContext();\n  return <Button onClick={() => websocket.send(JSON.stringify({\n    type: 'disableAi'\n  }))} className=\"text-xs\" displayType=\"secondary\">\n\t\t\tRemove AI\n\t\t</Button>;\n}\n_s(RemoveAiButton, \"uuFen2xXhQpJ82C1ohyRBdS/748=\", false, function () {\n  return [useRoomContext];\n});\n_c = RemoveAiButton;\nexport function AiButton(props) {\n  _s2();\n  const {\n    room: {\n      roomState: {\n        ai: {\n          connectionPending,\n          error\n        },\n        users\n      }\n    }\n  } = useRoomContext();\n  const aiUser = users.find(u => u.id === 'ai');\n  return <>\n\t\t\t{error && <span className=\"text-red-800 dark:text-red-500\">{error}</span>}\n\t\t\t{aiUser ? <>\n\t\t\t\t\t<RemoveAiButton />\n\t\t\t\t\t<AiPushToTalkButtion />\n\t\t\t\t\t<RecordAiVoiceActivity user={aiUser} recordActivity={props.recordActivity} />\n\t\t\t\t</> : <InviteAiDialog>\n\t\t\t\t\t<Trigger asChild>\n\t\t\t\t\t\t<Button className=\"text-xs flex items-center gap-2\" disabled={connectionPending}>\n\t\t\t\t\t\t\t<span>Invite AI</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Trigger>\n\t\t\t\t</InviteAiDialog>}\n\t\t</>;\n}\n_s2(AiButton, \"tKE3sUlPxTG+EILDDrwRSBIctI0=\", false, function () {\n  return [useRoomContext];\n});\n_c2 = AiButton;\nvar _c, _c2;\n$RefreshReg$(_c, \"RemoveAiButton\");\n$RefreshReg$(_c2, \"AiButton\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/HighPacketLossWarningsToast.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/HighPacketLossWarningsToast.tsx\");\n  import.meta.hot.lastModified = \"1738073419111.613\";\n}\n// REMIX HMR END\n\nimport { useObservableAsValue } from 'partytracks/react';\nimport { useMemo } from 'react';\nimport Toast, { Root } from '~/components/Toast';\nimport { useConditionForAtLeast } from '~/hooks/useConditionForAtLeast';\nimport { getPacketLossStats$ } from '~/utils/rxjs/getPacketLossStats$';\nimport { useRoomContext } from '../hooks/useRoomContext';\nimport { Icon } from './Icon/Icon';\nfunction useStats() {\n  _s();\n  const {\n    partyTracks\n  } = useRoomContext();\n  const stats$ = useMemo(() => getPacketLossStats$(partyTracks.peerConnection$), [partyTracks.peerConnection$]);\n  const stats = useObservableAsValue(stats$, {\n    inboundPacketLossPercentage: 0,\n    outboundPacketLossPercentage: 0\n  });\n  return stats;\n}\n_s(useStats, \"ExWLM04WrOrB761Siv1HWRFXggU=\", false, function () {\n  return [useRoomContext, useObservableAsValue];\n});\nexport function HighPacketLossWarningsToast() {\n  _s2();\n  const {\n    inboundPacketLossPercentage,\n    outboundPacketLossPercentage\n  } = useStats();\n  const hasIssues = useConditionForAtLeast(inboundPacketLossPercentage !== undefined && outboundPacketLossPercentage !== undefined && (inboundPacketLossPercentage > 0.05 || outboundPacketLossPercentage > 0.05), 5000);\n  if (inboundPacketLossPercentage === undefined || outboundPacketLossPercentage === undefined) {\n    return null;\n  }\n  if (!hasIssues) {\n    return null;\n  }\n  return <Root duration={Infinity}>\n\t\t\t<div className=\"space-y-2 text-sm\">\n\t\t\t\t<div className=\"font-bold\">\n\t\t\t\t\t<Toast.Title className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Icon type=\"SignalSlashIcon\" />\n\t\t\t\t\t\tUnstable connection\n\t\t\t\t\t</Toast.Title>\n\t\t\t\t</div>\n\t\t\t\t<Toast.Description>Call quality may be affected.</Toast.Description>\n\t\t\t</div>\n\t\t</Root>;\n}\n_s2(HighPacketLossWarningsToast, \"8UqSjPUGS1+ZXU0J/wg+4JW/6dI=\", false, function () {\n  return [useStats, useConditionForAtLeast];\n});\n_c = HighPacketLossWarningsToast;\nvar _c;\n$RefreshReg$(_c, \"HighPacketLossWarningsToast\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/hooks/useConditionForAtLeast.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419116.2222\";\n}\n// REMIX HMR END\n\nimport { useEffect, useState } from 'react'\n\nexport function useConditionForAtLeast(condition: boolean, time: number) {\n\tconst [value, setValue] = useState(condition)\n\n\tuseEffect(() => {\n\t\tlet timeout = window.setTimeout(() => {\n\t\t\tsetValue(condition)\n\t\t}, time)\n\t\treturn () => {\n\t\t\tclearTimeout(timeout)\n\t\t}\n\t}, [condition, time])\n\n\treturn value\n}\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/utils/ewma.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419122.6118\";\n}\n// REMIX HMR END\n\nimport invariant from 'tiny-invariant'\n\n/**\n * This module was adapted from https://github.com/rsocket/ewma\n * to remove the dependency on the Node assert API.\n */\n\n/**\n * Compute the exponential weighted moving average of a series of values.\n * The time at which you insert the value into `Ewma` is used to compute a\n * weight (recent points are weighted higher).\n * The parameter for defining the convergence speed (like most decay process) is\n * the half-life.\n *\n * e.g. with a half-life of 10 unit, if you insert 100 at t=0 and 200 at t=10\n *      the ewma will be equal to (200 - 100)/2 = 150 (half of the distance\n *      between the new and the old value)\n *\n * @param {Number} halfLifeMs parameter representing the speed of convergence\n * @param {Number} initialValue initial value\n * @param {Object} clock clock object used to read time\n *\n * @returns {Ewma} the object computing the ewma average\n */\nexport default class Ewma {\n\t_clock: { now: () => number }\n\t_stamp: number\n\t_decay: number\n\t_ewma: number\n\n\t/**\n\t *\n\t */\n\tconstructor(\n\t\thalfLifeMs: number,\n\t\tinitialValue: number,\n\t\tclock?: { now: () => number }\n\t) {\n\t\tinvariant(typeof halfLifeMs === 'number', 'halfLifeMs is not a number')\n\t\tinvariant(!isNaN(halfLifeMs), 'halfLifeMs can not be NaN')\n\t\tinvariant(typeof initialValue === 'number', 'initialValue is not a number')\n\t\tinvariant(!isNaN(initialValue), 'initialValue can not be NaN')\n\n\t\tif (clock !== undefined) {\n\t\t\tinvariant(typeof clock.now === 'function', 'clock.now is not a function')\n\t\t}\n\n\t\tthis._decay = halfLifeMs\n\t\tthis._ewma = initialValue || 0\n\t\tthis._clock = clock || Date\n\t\tthis._stamp = typeof initialValue === 'number' ? this._clock.now() : 0\n\t}\n\n\tinsert(x: number) {\n\t\tinvariant(typeof x === 'number', 'x is not a number')\n\t\tinvariant(!isNaN(x), 'x can not be NaN')\n\n\t\tvar now = this._clock.now()\n\t\tvar elapsed = now - this._stamp\n\t\tthis._stamp = now\n\n\t\t// This seemingly magic equation is derived from the fact that we are\n\t\t// defining a half life for each value. A half life is the amount of time\n\t\t// that it takes for a value V to decay to .5V or V/2. Elapsed is the time\n\t\t// delta between this value being reported and the previous value being\n\t\t// reported. Given the half life, and the amount of time since the last\n\t\t// reported value, this equation determines how much the new value should\n\t\t// be represented in the ewma.\n\t\t// For a detailed proof read:\n\t\t// A Framework for the Analysis of Unevenly Spaced Time Series Data\n\t\t// Eckner, 2014\n\t\tvar w = Math.pow(2, -elapsed / this._decay)\n\t\tthis._ewma = w * this._ewma + (1.0 - w) * x\n\t}\n\n\treset(x: number) {\n\t\tinvariant(typeof x === 'number', 'x is not a number')\n\t\tinvariant(!isNaN(x), 'x can not be NaN')\n\n\t\tthis._stamp = this._clock.now()\n\t\tthis._ewma = x\n\t}\n\n\tvalue() {\n\t\treturn this._ewma\n\t}\n}\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/utils/mode.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419123.244\";\n}\n// REMIX HMR END\n\nimport invariant from 'tiny-invariant'\n\nconst modes = ['production', 'development', 'test'] as const\nexport type Mode = (typeof modes)[number]\n\n// This is the ONLY place in the app that we use process.env\n// because Remix does a find and replace for this string, but\n// it is otherwise unavailable in the workers runtime and env\n// variables should be passed in through wrangler and consumed\n// through the AppLoadConext\nconst NODE_ENV = process.env.NODE_ENV\n\nconst foundMode = modes.find((m) => m === NODE_ENV)\ninvariant(foundMode)\n\nexport const mode = foundMode\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/utils/rxjs/getPacketLossStats$.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419126.2637\";\n}\n// REMIX HMR END\n\nimport type { Observable } from 'rxjs'\nimport { combineLatest, interval, map, pairwise, switchMap } from 'rxjs'\nimport Ewma from '~/utils/ewma'\nimport { mode } from '~/utils/mode'\n\nexport interface PacketLossStats {\n\tinboundPacketLossPercentage: number\n\toutboundPacketLossPercentage: number\n}\n\nexport function getPacketLossStats$(\n\tpeerConnection$: Observable<RTCPeerConnection>\n) {\n\tconst inboundPacketLossPercentageEwma = new Ewma(2000, 0)\n\tconst outboundPacketLossPercentageEwma = new Ewma(2000, 0)\n\tlet anycastWarned = false\n\treturn combineLatest([peerConnection$, interval(1000)]).pipe(\n\t\tswitchMap(([peerConnection]) => peerConnection.getStats()),\n\t\tpairwise(),\n\t\tmap(([previousStatsReport, newStatsReport]) => {\n\t\t\tlet inboundPacketsReceived = 0\n\t\t\tlet inboundPacketsLost = 0\n\t\t\tlet outboundPacketsSent = 0\n\t\t\tlet outboundPacketsLost = 0\n\t\t\tlet candidatePairID: string | undefined = undefined\n\t\t\tlet remoteCandidateID: string | undefined = undefined\n\t\t\tlet remoteAddress: string | undefined = undefined\n\n\t\t\tnewStatsReport.forEach((report) => {\n\t\t\t\tconst previous = previousStatsReport.get(report.id)\n\t\t\t\tif (!previous) return\n\n\t\t\t\tif (report.type === 'transport') {\n\t\t\t\t\tcandidatePairID = report.selectedCandidatePairId\n\t\t\t\t}\n\t\t\t\tif (candidatePairID) {\n\t\t\t\t\tremoteCandidateID =\n\t\t\t\t\t\tnewStatsReport.get(candidatePairID)?.remoteCandidateId\n\t\t\t\t}\n\t\t\t\tif (remoteCandidateID) {\n\t\t\t\t\tremoteAddress = newStatsReport.get(remoteCandidateID).address\n\t\t\t\t}\n\t\t\t\tif (remoteAddress !== undefined && remoteAddress !== '141.101.90.0') {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\"PeerConnection doesn't appear to be connected to anycast 141.101.90.0\"\n\t\t\t\t\t)\n\t\t\t\t\tif (mode === 'production' && !anycastWarned) {\n\t\t\t\t\t\talert('You are not connected to CF anycast address')\n\t\t\t\t\t\tanycastWarned = true\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (report.type === 'inbound-rtp') {\n\t\t\t\t\tinboundPacketsLost += report.packetsLost - previous.packetsLost\n\t\t\t\t\tinboundPacketsReceived +=\n\t\t\t\t\t\treport.packetsReceived - previous.packetsReceived\n\t\t\t\t} else if (report.type === 'outbound-rtp') {\n\t\t\t\t\tconst packetsSent = report.packetsSent - previous.packetsSent\n\t\t\t\t\t// Find the corresponding remote-inbound-rtp report\n\t\t\t\t\tconst remoteInboundReport = Array.from(newStatsReport.values()).find(\n\t\t\t\t\t\t(r) => r.type === 'remote-inbound-rtp' && r.ssrc === report.ssrc\n\t\t\t\t\t)\n\t\t\t\t\tconst previousRemoteInboundReport = Array.from(\n\t\t\t\t\t\tpreviousStatsReport.values()\n\t\t\t\t\t).find(\n\t\t\t\t\t\t(r) => r.type === 'remote-inbound-rtp' && r.ssrc === previous.ssrc\n\t\t\t\t\t)\n\t\t\t\t\tif (\n\t\t\t\t\t\tremoteInboundReport &&\n\t\t\t\t\t\tpreviousRemoteInboundReport &&\n\t\t\t\t\t\tpacketsSent > 0\n\t\t\t\t\t) {\n\t\t\t\t\t\toutboundPacketsSent += report.packetsSent - previous.packetsSent\n\t\t\t\t\t\toutboundPacketsLost +=\n\t\t\t\t\t\t\tremoteInboundReport.packetsLost -\n\t\t\t\t\t\t\tpreviousRemoteInboundReport.packetsLost\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (inboundPacketsReceived > 0) {\n\t\t\t\tconst packetLossPercentage =\n\t\t\t\t\tinboundPacketsLost / (inboundPacketsReceived + inboundPacketsLost)\n\t\t\t\tinboundPacketLossPercentageEwma.insert(\n\t\t\t\t\tMath.max(0, packetLossPercentage)\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif (outboundPacketsSent > 0) {\n\t\t\t\tconst packetLossPercentage =\n\t\t\t\t\toutboundPacketsLost / (outboundPacketsSent + outboundPacketsLost)\n\t\t\t\toutboundPacketLossPercentageEwma.insert(\n\t\t\t\t\tMath.max(0, packetLossPercentage)\n\t\t\t\t)\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\toutboundPacketLossPercentage: outboundPacketLossPercentageEwma.value(),\n\t\t\t\tinboundPacketLossPercentage: inboundPacketLossPercentageEwma.value(),\n\t\t\t} satisfies PacketLossStats\n\t\t})\n\t)\n}\n", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/IceDisconnectedToast.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/IceDisconnectedToast.tsx\");\n  import.meta.hot.lastModified = \"1738073419111.7615\";\n}\n// REMIX HMR END\n\nimport Toast, { Root } from '~/components/Toast';\nimport { useConditionForAtLeast } from '~/hooks/useConditionForAtLeast';\nimport { useRoomContext } from '../hooks/useRoomContext';\nimport { Icon } from './Icon/Icon';\nexport function IceDisconnectedToast() {\n  _s();\n  const {\n    iceConnectionState\n  } = useRoomContext();\n  const disconnectedForAtLeastTwoSeconds = useConditionForAtLeast(iceConnectionState === 'disconnected', 2000);\n  if (!disconnectedForAtLeastTwoSeconds) {\n    return null;\n  }\n  return <Root duration={Infinity}>\n\t\t\t<div className=\"space-y-2 text-sm\">\n\t\t\t\t<div className=\"font-bold\">\n\t\t\t\t\t<Toast.Title className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Icon type=\"WifiIcon\" />\n\t\t\t\t\t\tICE disconnected\n\t\t\t\t\t</Toast.Title>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Root>;\n}\n_s(IceDisconnectedToast, \"kw5YtL+bXi1/Z3X05DG2SGKTlOU=\", false, function () {\n  return [useRoomContext, useConditionForAtLeast];\n});\n_c = IceDisconnectedToast;\nvar _c;\n$RefreshReg$(_c, \"IceDisconnectedToast\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/LeaveRoomButton.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/LeaveRoomButton.tsx\");\n  import.meta.hot.lastModified = \"1738073419112.4019\";\n}\n// REMIX HMR END\n\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\nimport { useNavigate } from '@remix-run/react';\nimport { Button } from './Button';\nimport { Icon } from './Icon/Icon';\nimport { Tooltip } from './Tooltip';\nexport const LeaveRoomButton = ({\n  navigateToFeedbackPage,\n  meetingId\n}) => {\n  _s();\n  const navigate = useNavigate();\n  return <Tooltip content=\"Leave\">\n\t\t\t<Button displayType=\"danger\" onClick={() => {\n      const params = new URLSearchParams();\n      if (meetingId) params.set('meetingId', meetingId);\n      navigate(navigateToFeedbackPage ? `/call-quality-feedback?${params}` : '/');\n    }}>\n\t\t\t\t<VisuallyHidden>Leave</VisuallyHidden>\n\t\t\t\t<Icon type=\"phoneXMark\" />\n\t\t\t</Button>\n\t\t</Tooltip>;\n};\n_s(LeaveRoomButton, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n_c = LeaveRoomButton;\nvar _c;\n$RefreshReg$(_c, \"LeaveRoomButton\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/OverflowMenu.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/OverflowMenu.tsx\");\n  import.meta.hot.lastModified = \"1738073419112.8928\";\n}\n// REMIX HMR END\n\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\nimport { useState } from 'react';\nimport { useRoomContext } from '~/hooks/useRoomContext';\nimport { useRoomUrl } from '~/hooks/useRoomUrl';\nimport { Button } from './Button';\nimport DropdownMenu from './DropdownMenu';\nimport { Icon } from './Icon/Icon';\nimport { participantCount, ParticipantsDialog } from './ParticipantsMenu';\nimport { ReportBugDialog } from './ReportBugDialog';\nimport { SettingsDialog } from './SettingsDialog';\nexport const OverflowMenu = ({\n  bugReportsEnabled\n}) => {\n  _s();\n  const {\n    room: {\n      otherUsers,\n      identity\n    },\n    dataSaverMode,\n    setDataSaverMode\n  } = useRoomContext();\n  const [settingsMenuOpen, setSettingMenuOpen] = useState(false);\n  const [bugReportMenuOpen, setBugReportMenuOpen] = useState(false);\n  const [participantsMenuOpen, setParticipantsMenuOpen] = useState(false);\n  const roomUrl = useRoomUrl();\n  return <>\n\t\t\t<DropdownMenu.Root>\n\t\t\t\t<DropdownMenu.Trigger asChild>\n\t\t\t\t\t<Button displayType=\"secondary\">\n\t\t\t\t\t\t<VisuallyHidden>More options</VisuallyHidden>\n\t\t\t\t\t\t<Icon type=\"EllipsisVerticalIcon\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</DropdownMenu.Trigger>\n\t\t\t\t<DropdownMenu.Portal>\n\t\t\t\t\t<DropdownMenu.Content sideOffset={5}>\n\t\t\t\t\t\t<DropdownMenu.Item onSelect={() => setDataSaverMode(!dataSaverMode)}>\n\t\t\t\t\t\t\t<Icon type=\"WifiIcon\" className=\"mr-2\" />\n\t\t\t\t\t\t\t{dataSaverMode ? 'Disable Data Saver' : 'Enable Data Saver'}\n\t\t\t\t\t\t</DropdownMenu.Item>\n\t\t\t\t\t\t<DropdownMenu.Item onSelect={() => navigator.clipboard.writeText(roomUrl)}>\n\t\t\t\t\t\t\t<Icon type=\"ClipboardDocumentIcon\" className=\"mr-2\" />\n\t\t\t\t\t\t\tCopy URL\n\t\t\t\t\t\t</DropdownMenu.Item>\n\t\t\t\t\t\t<DropdownMenu.Item onSelect={() => {\n            setSettingMenuOpen(true);\n          }}>\n\t\t\t\t\t\t\t<Icon type=\"cog\" className=\"mr-2\" />\n\t\t\t\t\t\t\tSettings\n\t\t\t\t\t\t</DropdownMenu.Item>\n\t\t\t\t\t\t{bugReportsEnabled && <DropdownMenu.Item onSelect={() => {\n            setBugReportMenuOpen(true);\n          }}>\n\t\t\t\t\t\t\t\t<Icon type=\"bug\" className=\"mr-2\" />\n\t\t\t\t\t\t\t\tReport bug\n\t\t\t\t\t\t\t</DropdownMenu.Item>}\n\t\t\t\t\t\t<DropdownMenu.Item className=\"md:hidden\" onSelect={() => {\n            setParticipantsMenuOpen(true);\n          }}>\n\t\t\t\t\t\t\t<Icon type=\"userGroup\" className=\"mr-2\" />\n\t\t\t\t\t\t\t{participantCount(otherUsers.length + 1)}\n\t\t\t\t\t\t</DropdownMenu.Item>\n\t\t\t\t\t\t<DropdownMenu.Arrow />\n\t\t\t\t\t</DropdownMenu.Content>\n\t\t\t\t</DropdownMenu.Portal>\n\t\t\t</DropdownMenu.Root>\n\t\t\t{settingsMenuOpen && <SettingsDialog open onOpenChange={setSettingMenuOpen} />}\n\t\t\t{bugReportsEnabled && bugReportMenuOpen && <ReportBugDialog onOpenChange={setBugReportMenuOpen} />}\n\t\t\t{participantsMenuOpen && <ParticipantsDialog otherUsers={otherUsers} identity={identity} open onOpenChange={setParticipantsMenuOpen} />}\n\t\t</>;\n};\n_s(OverflowMenu, \"dLjyQlZrLQb4scNp3cpQ+SYwX9c=\", false, function () {\n  return [useRoomContext, useRoomUrl];\n});\n_c = OverflowMenu;\nvar _c;\n$RefreshReg$(_c, \"OverflowMenu\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "import * as React from 'react';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { composeRefs } from '@radix-ui/react-compose-refs';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { useControllableState } from '@radix-ui/react-use-controllable-state';\nimport { Primitive } from '@radix-ui/react-primitive';\nimport * as MenuPrimitive from '@radix-ui/react-menu';\nimport { createMenuScope } from '@radix-ui/react-menu';\nimport { useId } from '@radix-ui/react-id';\n\nimport type { Scope } from '@radix-ui/react-context';\n\ntype Direction = 'ltr' | 'rtl';\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenu\n * -----------------------------------------------------------------------------------------------*/\n\nconst DROPDOWN_MENU_NAME = 'DropdownMenu';\n\ntype ScopedProps<P> = P & { __scopeDropdownMenu?: Scope };\nconst [createDropdownMenuContext, createDropdownMenuScope] = createContextScope(\n  DROPDOWN_MENU_NAME,\n  [createMenuScope]\n);\nconst useMenuScope = createMenuScope();\n\ntype DropdownMenuContextValue = {\n  triggerId: string;\n  triggerRef: React.RefObject<HTMLButtonElement | null>;\n  contentId: string;\n  open: boolean;\n  onOpenChange(open: boolean): void;\n  onOpenToggle(): void;\n  modal: boolean;\n};\n\nconst [DropdownMenuProvider, useDropdownMenuContext] =\n  createDropdownMenuContext<DropdownMenuContextValue>(DROPDOWN_MENU_NAME);\n\ninterface DropdownMenuProps {\n  children?: React.ReactNode;\n  dir?: Direction;\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?(open: boolean): void;\n  modal?: boolean;\n}\n\nconst DropdownMenu: React.FC<DropdownMenuProps> = (props: ScopedProps<DropdownMenuProps>) => {\n  const {\n    __scopeDropdownMenu,\n    children,\n    dir,\n    open: openProp,\n    defaultOpen,\n    onOpenChange,\n    modal = true,\n  } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  const triggerRef = React.useRef<HTMLButtonElement>(null);\n  const [open = false, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen,\n    onChange: onOpenChange,\n  });\n\n  return (\n    <DropdownMenuProvider\n      scope={__scopeDropdownMenu}\n      triggerId={useId()}\n      triggerRef={triggerRef}\n      contentId={useId()}\n      open={open}\n      onOpenChange={setOpen}\n      onOpenToggle={React.useCallback(() => setOpen((prevOpen) => !prevOpen), [setOpen])}\n      modal={modal}\n    >\n      <MenuPrimitive.Root {...menuScope} open={open} onOpenChange={setOpen} dir={dir} modal={modal}>\n        {children}\n      </MenuPrimitive.Root>\n    </DropdownMenuProvider>\n  );\n};\n\nDropdownMenu.displayName = DROPDOWN_MENU_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuTrigger\n * -----------------------------------------------------------------------------------------------*/\n\nconst TRIGGER_NAME = 'DropdownMenuTrigger';\n\ntype DropdownMenuTriggerElement = React.ElementRef<typeof Primitive.button>;\ntype PrimitiveButtonProps = React.ComponentPropsWithoutRef<typeof Primitive.button>;\ninterface DropdownMenuTriggerProps extends PrimitiveButtonProps {}\n\nconst DropdownMenuTrigger = React.forwardRef<DropdownMenuTriggerElement, DropdownMenuTriggerProps>(\n  (props: ScopedProps<DropdownMenuTriggerProps>, forwardedRef) => {\n    const { __scopeDropdownMenu, disabled = false, ...triggerProps } = props;\n    const context = useDropdownMenuContext(TRIGGER_NAME, __scopeDropdownMenu);\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    return (\n      <MenuPrimitive.Anchor asChild {...menuScope}>\n        <Primitive.button\n          type=\"button\"\n          id={context.triggerId}\n          aria-haspopup=\"menu\"\n          aria-expanded={context.open}\n          aria-controls={context.open ? context.contentId : undefined}\n          data-state={context.open ? 'open' : 'closed'}\n          data-disabled={disabled ? '' : undefined}\n          disabled={disabled}\n          {...triggerProps}\n          ref={composeRefs(forwardedRef, context.triggerRef)}\n          onPointerDown={composeEventHandlers(props.onPointerDown, (event) => {\n            // only call handler if it's the left button (mousedown gets triggered by all mouse buttons)\n            // but not when the control key is pressed (avoiding MacOS right click)\n            if (!disabled && event.button === 0 && event.ctrlKey === false) {\n              context.onOpenToggle();\n              // prevent trigger focusing when opening\n              // this allows the content to be given focus without competition\n              if (!context.open) event.preventDefault();\n            }\n          })}\n          onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n            if (disabled) return;\n            if (['Enter', ' '].includes(event.key)) context.onOpenToggle();\n            if (event.key === 'ArrowDown') context.onOpenChange(true);\n            // prevent keydown from scrolling window / first focused item to execute\n            // that keydown (inadvertently closing the menu)\n            if (['Enter', ' ', 'ArrowDown'].includes(event.key)) event.preventDefault();\n          })}\n        />\n      </MenuPrimitive.Anchor>\n    );\n  }\n);\n\nDropdownMenuTrigger.displayName = TRIGGER_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuPortal\n * -----------------------------------------------------------------------------------------------*/\n\nconst PORTAL_NAME = 'DropdownMenuPortal';\n\ntype MenuPortalProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.Portal>;\ninterface DropdownMenuPortalProps extends MenuPortalProps {}\n\nconst DropdownMenuPortal: React.FC<DropdownMenuPortalProps> = (\n  props: ScopedProps<DropdownMenuPortalProps>\n) => {\n  const { __scopeDropdownMenu, ...portalProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return <MenuPrimitive.Portal {...menuScope} {...portalProps} />;\n};\n\nDropdownMenuPortal.displayName = PORTAL_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuContent\n * -----------------------------------------------------------------------------------------------*/\n\nconst CONTENT_NAME = 'DropdownMenuContent';\n\ntype DropdownMenuContentElement = React.ElementRef<typeof MenuPrimitive.Content>;\ntype MenuContentProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.Content>;\ninterface DropdownMenuContentProps extends Omit<MenuContentProps, 'onEntryFocus'> {}\n\nconst DropdownMenuContent = React.forwardRef<DropdownMenuContentElement, DropdownMenuContentProps>(\n  (props: ScopedProps<DropdownMenuContentProps>, forwardedRef) => {\n    const { __scopeDropdownMenu, ...contentProps } = props;\n    const context = useDropdownMenuContext(CONTENT_NAME, __scopeDropdownMenu);\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    const hasInteractedOutsideRef = React.useRef(false);\n\n    return (\n      <MenuPrimitive.Content\n        id={context.contentId}\n        aria-labelledby={context.triggerId}\n        {...menuScope}\n        {...contentProps}\n        ref={forwardedRef}\n        onCloseAutoFocus={composeEventHandlers(props.onCloseAutoFocus, (event) => {\n          if (!hasInteractedOutsideRef.current) context.triggerRef.current?.focus();\n          hasInteractedOutsideRef.current = false;\n          // Always prevent auto focus because we either focus manually or want user agent focus\n          event.preventDefault();\n        })}\n        onInteractOutside={composeEventHandlers(props.onInteractOutside, (event) => {\n          const originalEvent = event.detail.originalEvent as PointerEvent;\n          const ctrlLeftClick = originalEvent.button === 0 && originalEvent.ctrlKey === true;\n          const isRightClick = originalEvent.button === 2 || ctrlLeftClick;\n          if (!context.modal || isRightClick) hasInteractedOutsideRef.current = true;\n        })}\n        style={{\n          ...props.style,\n          // re-namespace exposed content custom properties\n          ...{\n            '--radix-dropdown-menu-content-transform-origin':\n              'var(--radix-popper-transform-origin)',\n            '--radix-dropdown-menu-content-available-width': 'var(--radix-popper-available-width)',\n            '--radix-dropdown-menu-content-available-height':\n              'var(--radix-popper-available-height)',\n            '--radix-dropdown-menu-trigger-width': 'var(--radix-popper-anchor-width)',\n            '--radix-dropdown-menu-trigger-height': 'var(--radix-popper-anchor-height)',\n          },\n        }}\n      />\n    );\n  }\n);\n\nDropdownMenuContent.displayName = CONTENT_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuGroup\n * -----------------------------------------------------------------------------------------------*/\n\nconst GROUP_NAME = 'DropdownMenuGroup';\n\ntype DropdownMenuGroupElement = React.ElementRef<typeof MenuPrimitive.Group>;\ntype MenuGroupProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.Group>;\ninterface DropdownMenuGroupProps extends MenuGroupProps {}\n\nconst DropdownMenuGroup = React.forwardRef<DropdownMenuGroupElement, DropdownMenuGroupProps>(\n  (props: ScopedProps<DropdownMenuGroupProps>, forwardedRef) => {\n    const { __scopeDropdownMenu, ...groupProps } = props;\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    return <MenuPrimitive.Group {...menuScope} {...groupProps} ref={forwardedRef} />;\n  }\n);\n\nDropdownMenuGroup.displayName = GROUP_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuLabel\n * -----------------------------------------------------------------------------------------------*/\n\nconst LABEL_NAME = 'DropdownMenuLabel';\n\ntype DropdownMenuLabelElement = React.ElementRef<typeof MenuPrimitive.Label>;\ntype MenuLabelProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.Label>;\ninterface DropdownMenuLabelProps extends MenuLabelProps {}\n\nconst DropdownMenuLabel = React.forwardRef<DropdownMenuLabelElement, DropdownMenuLabelProps>(\n  (props: ScopedProps<DropdownMenuLabelProps>, forwardedRef) => {\n    const { __scopeDropdownMenu, ...labelProps } = props;\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    return <MenuPrimitive.Label {...menuScope} {...labelProps} ref={forwardedRef} />;\n  }\n);\n\nDropdownMenuLabel.displayName = LABEL_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst ITEM_NAME = 'DropdownMenuItem';\n\ntype DropdownMenuItemElement = React.ElementRef<typeof MenuPrimitive.Item>;\ntype MenuItemProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.Item>;\ninterface DropdownMenuItemProps extends MenuItemProps {}\n\nconst DropdownMenuItem = React.forwardRef<DropdownMenuItemElement, DropdownMenuItemProps>(\n  (props: ScopedProps<DropdownMenuItemProps>, forwardedRef) => {\n    const { __scopeDropdownMenu, ...itemProps } = props;\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    return <MenuPrimitive.Item {...menuScope} {...itemProps} ref={forwardedRef} />;\n  }\n);\n\nDropdownMenuItem.displayName = ITEM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuCheckboxItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst CHECKBOX_ITEM_NAME = 'DropdownMenuCheckboxItem';\n\ntype DropdownMenuCheckboxItemElement = React.ElementRef<typeof MenuPrimitive.CheckboxItem>;\ntype MenuCheckboxItemProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.CheckboxItem>;\ninterface DropdownMenuCheckboxItemProps extends MenuCheckboxItemProps {}\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  DropdownMenuCheckboxItemElement,\n  DropdownMenuCheckboxItemProps\n>((props: ScopedProps<DropdownMenuCheckboxItemProps>, forwardedRef) => {\n  const { __scopeDropdownMenu, ...checkboxItemProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return <MenuPrimitive.CheckboxItem {...menuScope} {...checkboxItemProps} ref={forwardedRef} />;\n});\n\nDropdownMenuCheckboxItem.displayName = CHECKBOX_ITEM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuRadioGroup\n * -----------------------------------------------------------------------------------------------*/\n\nconst RADIO_GROUP_NAME = 'DropdownMenuRadioGroup';\n\ntype DropdownMenuRadioGroupElement = React.ElementRef<typeof MenuPrimitive.RadioGroup>;\ntype MenuRadioGroupProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.RadioGroup>;\ninterface DropdownMenuRadioGroupProps extends MenuRadioGroupProps {}\n\nconst DropdownMenuRadioGroup = React.forwardRef<\n  DropdownMenuRadioGroupElement,\n  DropdownMenuRadioGroupProps\n>((props: ScopedProps<DropdownMenuRadioGroupProps>, forwardedRef) => {\n  const { __scopeDropdownMenu, ...radioGroupProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return <MenuPrimitive.RadioGroup {...menuScope} {...radioGroupProps} ref={forwardedRef} />;\n});\n\nDropdownMenuRadioGroup.displayName = RADIO_GROUP_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuRadioItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst RADIO_ITEM_NAME = 'DropdownMenuRadioItem';\n\ntype DropdownMenuRadioItemElement = React.ElementRef<typeof MenuPrimitive.RadioItem>;\ntype MenuRadioItemProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.RadioItem>;\ninterface DropdownMenuRadioItemProps extends MenuRadioItemProps {}\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  DropdownMenuRadioItemElement,\n  DropdownMenuRadioItemProps\n>((props: ScopedProps<DropdownMenuRadioItemProps>, forwardedRef) => {\n  const { __scopeDropdownMenu, ...radioItemProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return <MenuPrimitive.RadioItem {...menuScope} {...radioItemProps} ref={forwardedRef} />;\n});\n\nDropdownMenuRadioItem.displayName = RADIO_ITEM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuItemIndicator\n * -----------------------------------------------------------------------------------------------*/\n\nconst INDICATOR_NAME = 'DropdownMenuItemIndicator';\n\ntype DropdownMenuItemIndicatorElement = React.ElementRef<typeof MenuPrimitive.ItemIndicator>;\ntype MenuItemIndicatorProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.ItemIndicator>;\ninterface DropdownMenuItemIndicatorProps extends MenuItemIndicatorProps {}\n\nconst DropdownMenuItemIndicator = React.forwardRef<\n  DropdownMenuItemIndicatorElement,\n  DropdownMenuItemIndicatorProps\n>((props: ScopedProps<DropdownMenuItemIndicatorProps>, forwardedRef) => {\n  const { __scopeDropdownMenu, ...itemIndicatorProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return <MenuPrimitive.ItemIndicator {...menuScope} {...itemIndicatorProps} ref={forwardedRef} />;\n});\n\nDropdownMenuItemIndicator.displayName = INDICATOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuSeparator\n * -----------------------------------------------------------------------------------------------*/\n\nconst SEPARATOR_NAME = 'DropdownMenuSeparator';\n\ntype DropdownMenuSeparatorElement = React.ElementRef<typeof MenuPrimitive.Separator>;\ntype MenuSeparatorProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.Separator>;\ninterface DropdownMenuSeparatorProps extends MenuSeparatorProps {}\n\nconst DropdownMenuSeparator = React.forwardRef<\n  DropdownMenuSeparatorElement,\n  DropdownMenuSeparatorProps\n>((props: ScopedProps<DropdownMenuSeparatorProps>, forwardedRef) => {\n  const { __scopeDropdownMenu, ...separatorProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return <MenuPrimitive.Separator {...menuScope} {...separatorProps} ref={forwardedRef} />;\n});\n\nDropdownMenuSeparator.displayName = SEPARATOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuArrow\n * -----------------------------------------------------------------------------------------------*/\n\nconst ARROW_NAME = 'DropdownMenuArrow';\n\ntype DropdownMenuArrowElement = React.ElementRef<typeof MenuPrimitive.Arrow>;\ntype MenuArrowProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.Arrow>;\ninterface DropdownMenuArrowProps extends MenuArrowProps {}\n\nconst DropdownMenuArrow = React.forwardRef<DropdownMenuArrowElement, DropdownMenuArrowProps>(\n  (props: ScopedProps<DropdownMenuArrowProps>, forwardedRef) => {\n    const { __scopeDropdownMenu, ...arrowProps } = props;\n    const menuScope = useMenuScope(__scopeDropdownMenu);\n    return <MenuPrimitive.Arrow {...menuScope} {...arrowProps} ref={forwardedRef} />;\n  }\n);\n\nDropdownMenuArrow.displayName = ARROW_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuSub\n * -----------------------------------------------------------------------------------------------*/\n\ninterface DropdownMenuSubProps {\n  children?: React.ReactNode;\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?(open: boolean): void;\n}\n\nconst DropdownMenuSub: React.FC<DropdownMenuSubProps> = (\n  props: ScopedProps<DropdownMenuSubProps>\n) => {\n  const { __scopeDropdownMenu, children, open: openProp, onOpenChange, defaultOpen } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  const [open = false, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen,\n    onChange: onOpenChange,\n  });\n\n  return (\n    <MenuPrimitive.Sub {...menuScope} open={open} onOpenChange={setOpen}>\n      {children}\n    </MenuPrimitive.Sub>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuSubTrigger\n * -----------------------------------------------------------------------------------------------*/\n\nconst SUB_TRIGGER_NAME = 'DropdownMenuSubTrigger';\n\ntype DropdownMenuSubTriggerElement = React.ElementRef<typeof MenuPrimitive.SubTrigger>;\ntype MenuSubTriggerProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.SubTrigger>;\ninterface DropdownMenuSubTriggerProps extends MenuSubTriggerProps {}\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  DropdownMenuSubTriggerElement,\n  DropdownMenuSubTriggerProps\n>((props: ScopedProps<DropdownMenuSubTriggerProps>, forwardedRef) => {\n  const { __scopeDropdownMenu, ...subTriggerProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n  return <MenuPrimitive.SubTrigger {...menuScope} {...subTriggerProps} ref={forwardedRef} />;\n});\n\nDropdownMenuSubTrigger.displayName = SUB_TRIGGER_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * DropdownMenuSubContent\n * -----------------------------------------------------------------------------------------------*/\n\nconst SUB_CONTENT_NAME = 'DropdownMenuSubContent';\n\ntype DropdownMenuSubContentElement = React.ElementRef<typeof MenuPrimitive.Content>;\ntype MenuSubContentProps = React.ComponentPropsWithoutRef<typeof MenuPrimitive.SubContent>;\ninterface DropdownMenuSubContentProps extends MenuSubContentProps {}\n\nconst DropdownMenuSubContent = React.forwardRef<\n  DropdownMenuSubContentElement,\n  DropdownMenuSubContentProps\n>((props: ScopedProps<DropdownMenuSubContentProps>, forwardedRef) => {\n  const { __scopeDropdownMenu, ...subContentProps } = props;\n  const menuScope = useMenuScope(__scopeDropdownMenu);\n\n  return (\n    <MenuPrimitive.SubContent\n      {...menuScope}\n      {...subContentProps}\n      ref={forwardedRef}\n      style={{\n        ...props.style,\n        // re-namespace exposed content custom properties\n        ...{\n          '--radix-dropdown-menu-content-transform-origin': 'var(--radix-popper-transform-origin)',\n          '--radix-dropdown-menu-content-available-width': 'var(--radix-popper-available-width)',\n          '--radix-dropdown-menu-content-available-height': 'var(--radix-popper-available-height)',\n          '--radix-dropdown-menu-trigger-width': 'var(--radix-popper-anchor-width)',\n          '--radix-dropdown-menu-trigger-height': 'var(--radix-popper-anchor-height)',\n        },\n      }}\n    />\n  );\n});\n\nDropdownMenuSubContent.displayName = SUB_CONTENT_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nconst Root = DropdownMenu;\nconst Trigger = DropdownMenuTrigger;\nconst Portal = DropdownMenuPortal;\nconst Content = DropdownMenuContent;\nconst Group = DropdownMenuGroup;\nconst Label = DropdownMenuLabel;\nconst Item = DropdownMenuItem;\nconst CheckboxItem = DropdownMenuCheckboxItem;\nconst RadioGroup = DropdownMenuRadioGroup;\nconst RadioItem = DropdownMenuRadioItem;\nconst ItemIndicator = DropdownMenuItemIndicator;\nconst Separator = DropdownMenuSeparator;\nconst Arrow = DropdownMenuArrow;\nconst Sub = DropdownMenuSub;\nconst SubTrigger = DropdownMenuSubTrigger;\nconst SubContent = DropdownMenuSubContent;\n\nexport {\n  createDropdownMenuScope,\n  //\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuPortal,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuItemIndicator,\n  DropdownMenuSeparator,\n  DropdownMenuArrow,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n  //\n  Root,\n  Trigger,\n  Portal,\n  Content,\n  Group,\n  Label,\n  Item,\n  CheckboxItem,\n  RadioGroup,\n  RadioItem,\n  ItemIndicator,\n  Separator,\n  Arrow,\n  Sub,\n  SubTrigger,\n  SubContent,\n};\nexport type {\n  DropdownMenuProps,\n  DropdownMenuTriggerProps,\n  DropdownMenuPortalProps,\n  DropdownMenuContentProps,\n  DropdownMenuGroupProps,\n  DropdownMenuLabelProps,\n  DropdownMenuItemProps,\n  DropdownMenuCheckboxItemProps,\n  DropdownMenuRadioGroupProps,\n  DropdownMenuRadioItemProps,\n  DropdownMenuItemIndicatorProps,\n  DropdownMenuSeparatorProps,\n  DropdownMenuArrowProps,\n  DropdownMenuSubProps,\n  DropdownMenuSubTriggerProps,\n  DropdownMenuSubContentProps,\n};\n", "import * as React from 'react';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { createCollection } from '@radix-ui/react-collection';\nimport { useComposedRefs, composeRefs } from '@radix-ui/react-compose-refs';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { useDirection } from '@radix-ui/react-direction';\nimport { DismissableLayer } from '@radix-ui/react-dismissable-layer';\nimport { useFocusGuards } from '@radix-ui/react-focus-guards';\nimport { FocusScope } from '@radix-ui/react-focus-scope';\nimport { useId } from '@radix-ui/react-id';\nimport * as PopperPrimitive from '@radix-ui/react-popper';\nimport { createPopperScope } from '@radix-ui/react-popper';\nimport { Portal as PortalPrimitive } from '@radix-ui/react-portal';\nimport { Presence } from '@radix-ui/react-presence';\nimport { Primitive, dispatchDiscreteCustomEvent } from '@radix-ui/react-primitive';\nimport * as RovingFocusGroup from '@radix-ui/react-roving-focus';\nimport { createRovingFocusGroupScope } from '@radix-ui/react-roving-focus';\nimport { Slot } from '@radix-ui/react-slot';\nimport { useCallbackRef } from '@radix-ui/react-use-callback-ref';\nimport { hideOthers } from 'aria-hidden';\nimport { RemoveScroll } from 'react-remove-scroll';\n\nimport type { Scope } from '@radix-ui/react-context';\n\ntype Direction = 'ltr' | 'rtl';\n\nconst SELECTION_KEYS = ['Enter', ' '];\nconst FIRST_KEYS = ['ArrowDown', 'PageUp', 'Home'];\nconst LAST_KEYS = ['ArrowUp', 'PageDown', 'End'];\nconst FIRST_LAST_KEYS = [...FIRST_KEYS, ...LAST_KEYS];\nconst SUB_OPEN_KEYS: Record<Direction, string[]> = {\n  ltr: [...SELECTION_KEYS, 'ArrowRight'],\n  rtl: [...SELECTION_KEYS, 'ArrowLeft'],\n};\nconst SUB_CLOSE_KEYS: Record<Direction, string[]> = {\n  ltr: ['ArrowLeft'],\n  rtl: ['ArrowRight'],\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Menu\n * -----------------------------------------------------------------------------------------------*/\n\nconst MENU_NAME = 'Menu';\n\ntype ItemData = { disabled: boolean; textValue: string };\nconst [Collection, useCollection, createCollectionScope] = createCollection<\n  MenuItemElement,\n  ItemData\n>(MENU_NAME);\n\ntype ScopedProps<P> = P & { __scopeMenu?: Scope };\nconst [createMenuContext, createMenuScope] = createContextScope(MENU_NAME, [\n  createCollectionScope,\n  createPopperScope,\n  createRovingFocusGroupScope,\n]);\nconst usePopperScope = createPopperScope();\nconst useRovingFocusGroupScope = createRovingFocusGroupScope();\n\ntype MenuContextValue = {\n  open: boolean;\n  onOpenChange(open: boolean): void;\n  content: MenuContentElement | null;\n  onContentChange(content: MenuContentElement | null): void;\n};\n\nconst [MenuProvider, useMenuContext] = createMenuContext<MenuContextValue>(MENU_NAME);\n\ntype MenuRootContextValue = {\n  onClose(): void;\n  isUsingKeyboardRef: React.RefObject<boolean>;\n  dir: Direction;\n  modal: boolean;\n};\n\nconst [MenuRootProvider, useMenuRootContext] = createMenuContext<MenuRootContextValue>(MENU_NAME);\n\ninterface MenuProps {\n  children?: React.ReactNode;\n  open?: boolean;\n  onOpenChange?(open: boolean): void;\n  dir?: Direction;\n  modal?: boolean;\n}\n\nconst Menu: React.FC<MenuProps> = (props: ScopedProps<MenuProps>) => {\n  const { __scopeMenu, open = false, children, dir, onOpenChange, modal = true } = props;\n  const popperScope = usePopperScope(__scopeMenu);\n  const [content, setContent] = React.useState<MenuContentElement | null>(null);\n  const isUsingKeyboardRef = React.useRef(false);\n  const handleOpenChange = useCallbackRef(onOpenChange);\n  const direction = useDirection(dir);\n\n  React.useEffect(() => {\n    // Capture phase ensures we set the boolean before any side effects execute\n    // in response to the key or pointer event as they might depend on this value.\n    const handleKeyDown = () => {\n      isUsingKeyboardRef.current = true;\n      document.addEventListener('pointerdown', handlePointer, { capture: true, once: true });\n      document.addEventListener('pointermove', handlePointer, { capture: true, once: true });\n    };\n    const handlePointer = () => (isUsingKeyboardRef.current = false);\n    document.addEventListener('keydown', handleKeyDown, { capture: true });\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown, { capture: true });\n      document.removeEventListener('pointerdown', handlePointer, { capture: true });\n      document.removeEventListener('pointermove', handlePointer, { capture: true });\n    };\n  }, []);\n\n  return (\n    <PopperPrimitive.Root {...popperScope}>\n      <MenuProvider\n        scope={__scopeMenu}\n        open={open}\n        onOpenChange={handleOpenChange}\n        content={content}\n        onContentChange={setContent}\n      >\n        <MenuRootProvider\n          scope={__scopeMenu}\n          onClose={React.useCallback(() => handleOpenChange(false), [handleOpenChange])}\n          isUsingKeyboardRef={isUsingKeyboardRef}\n          dir={direction}\n          modal={modal}\n        >\n          {children}\n        </MenuRootProvider>\n      </MenuProvider>\n    </PopperPrimitive.Root>\n  );\n};\n\nMenu.displayName = MENU_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuAnchor\n * -----------------------------------------------------------------------------------------------*/\n\nconst ANCHOR_NAME = 'MenuAnchor';\n\ntype MenuAnchorElement = React.ElementRef<typeof PopperPrimitive.Anchor>;\ntype PopperAnchorProps = React.ComponentPropsWithoutRef<typeof PopperPrimitive.Anchor>;\ninterface MenuAnchorProps extends PopperAnchorProps {}\n\nconst MenuAnchor = React.forwardRef<MenuAnchorElement, MenuAnchorProps>(\n  (props: ScopedProps<MenuAnchorProps>, forwardedRef) => {\n    const { __scopeMenu, ...anchorProps } = props;\n    const popperScope = usePopperScope(__scopeMenu);\n    return <PopperPrimitive.Anchor {...popperScope} {...anchorProps} ref={forwardedRef} />;\n  }\n);\n\nMenuAnchor.displayName = ANCHOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuPortal\n * -----------------------------------------------------------------------------------------------*/\n\nconst PORTAL_NAME = 'MenuPortal';\n\ntype PortalContextValue = { forceMount?: true };\nconst [PortalProvider, usePortalContext] = createMenuContext<PortalContextValue>(PORTAL_NAME, {\n  forceMount: undefined,\n});\n\ntype PortalProps = React.ComponentPropsWithoutRef<typeof PortalPrimitive>;\ninterface MenuPortalProps {\n  children?: React.ReactNode;\n  /**\n   * Specify a container element to portal the content into.\n   */\n  container?: PortalProps['container'];\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst MenuPortal: React.FC<MenuPortalProps> = (props: ScopedProps<MenuPortalProps>) => {\n  const { __scopeMenu, forceMount, children, container } = props;\n  const context = useMenuContext(PORTAL_NAME, __scopeMenu);\n  return (\n    <PortalProvider scope={__scopeMenu} forceMount={forceMount}>\n      <Presence present={forceMount || context.open}>\n        <PortalPrimitive asChild container={container}>\n          {children}\n        </PortalPrimitive>\n      </Presence>\n    </PortalProvider>\n  );\n};\n\nMenuPortal.displayName = PORTAL_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuContent\n * -----------------------------------------------------------------------------------------------*/\n\nconst CONTENT_NAME = 'MenuContent';\n\ntype MenuContentContextValue = {\n  onItemEnter(event: React.PointerEvent): void;\n  onItemLeave(event: React.PointerEvent): void;\n  onTriggerLeave(event: React.PointerEvent): void;\n  searchRef: React.RefObject<string>;\n  pointerGraceTimerRef: React.MutableRefObject<number>;\n  onPointerGraceIntentChange(intent: GraceIntent | null): void;\n};\nconst [MenuContentProvider, useMenuContentContext] =\n  createMenuContext<MenuContentContextValue>(CONTENT_NAME);\n\ntype MenuContentElement = MenuRootContentTypeElement;\n/**\n * We purposefully don't union MenuRootContent and MenuSubContent props here because\n * they have conflicting prop types. We agreed that we would allow MenuSubContent to\n * accept props that it would just ignore.\n */\ninterface MenuContentProps extends MenuRootContentTypeProps {\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst MenuContent = React.forwardRef<MenuContentElement, MenuContentProps>(\n  (props: ScopedProps<MenuContentProps>, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeMenu);\n    const { forceMount = portalContext.forceMount, ...contentProps } = props;\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    const rootContext = useMenuRootContext(CONTENT_NAME, props.__scopeMenu);\n\n    return (\n      <Collection.Provider scope={props.__scopeMenu}>\n        <Presence present={forceMount || context.open}>\n          <Collection.Slot scope={props.__scopeMenu}>\n            {rootContext.modal ? (\n              <MenuRootContentModal {...contentProps} ref={forwardedRef} />\n            ) : (\n              <MenuRootContentNonModal {...contentProps} ref={forwardedRef} />\n            )}\n          </Collection.Slot>\n        </Presence>\n      </Collection.Provider>\n    );\n  }\n);\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype MenuRootContentTypeElement = MenuContentImplElement;\ninterface MenuRootContentTypeProps\n  extends Omit<MenuContentImplProps, keyof MenuContentImplPrivateProps> {}\n\nconst MenuRootContentModal = React.forwardRef<MenuRootContentTypeElement, MenuRootContentTypeProps>(\n  (props: ScopedProps<MenuRootContentTypeProps>, forwardedRef) => {\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    const ref = React.useRef<MenuRootContentTypeElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n\n    // Hide everything from ARIA except the `MenuContent`\n    React.useEffect(() => {\n      const content = ref.current;\n      if (content) return hideOthers(content);\n    }, []);\n\n    return (\n      <MenuContentImpl\n        {...props}\n        ref={composedRefs}\n        // we make sure we're not trapping once it's been closed\n        // (closed !== unmounted when animating out)\n        trapFocus={context.open}\n        // make sure to only disable pointer events when open\n        // this avoids blocking interactions while animating out\n        disableOutsidePointerEvents={context.open}\n        disableOutsideScroll\n        // When focus is trapped, a `focusout` event may still happen.\n        // We make sure we don't trigger our `onDismiss` in such case.\n        onFocusOutside={composeEventHandlers(\n          props.onFocusOutside,\n          (event) => event.preventDefault(),\n          { checkForDefaultPrevented: false }\n        )}\n        onDismiss={() => context.onOpenChange(false)}\n      />\n    );\n  }\n);\n\nconst MenuRootContentNonModal = React.forwardRef<\n  MenuRootContentTypeElement,\n  MenuRootContentTypeProps\n>((props: ScopedProps<MenuRootContentTypeProps>, forwardedRef) => {\n  const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n  return (\n    <MenuContentImpl\n      {...props}\n      ref={forwardedRef}\n      trapFocus={false}\n      disableOutsidePointerEvents={false}\n      disableOutsideScroll={false}\n      onDismiss={() => context.onOpenChange(false)}\n    />\n  );\n});\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype MenuContentImplElement = React.ElementRef<typeof PopperPrimitive.Content>;\ntype FocusScopeProps = React.ComponentPropsWithoutRef<typeof FocusScope>;\ntype DismissableLayerProps = React.ComponentPropsWithoutRef<typeof DismissableLayer>;\ntype RovingFocusGroupProps = React.ComponentPropsWithoutRef<typeof RovingFocusGroup.Root>;\ntype PopperContentProps = React.ComponentPropsWithoutRef<typeof PopperPrimitive.Content>;\ntype MenuContentImplPrivateProps = {\n  onOpenAutoFocus?: FocusScopeProps['onMountAutoFocus'];\n  onDismiss?: DismissableLayerProps['onDismiss'];\n  disableOutsidePointerEvents?: DismissableLayerProps['disableOutsidePointerEvents'];\n\n  /**\n   * Whether scrolling outside the `MenuContent` should be prevented\n   * (default: `false`)\n   */\n  disableOutsideScroll?: boolean;\n\n  /**\n   * Whether focus should be trapped within the `MenuContent`\n   * (default: false)\n   */\n  trapFocus?: FocusScopeProps['trapped'];\n};\ninterface MenuContentImplProps\n  extends MenuContentImplPrivateProps,\n    Omit<PopperContentProps, 'dir' | 'onPlaced'> {\n  /**\n   * Event handler called when auto-focusing on close.\n   * Can be prevented.\n   */\n  onCloseAutoFocus?: FocusScopeProps['onUnmountAutoFocus'];\n\n  /**\n   * Whether keyboard navigation should loop around\n   * @defaultValue false\n   */\n  loop?: RovingFocusGroupProps['loop'];\n\n  onEntryFocus?: RovingFocusGroupProps['onEntryFocus'];\n  onEscapeKeyDown?: DismissableLayerProps['onEscapeKeyDown'];\n  onPointerDownOutside?: DismissableLayerProps['onPointerDownOutside'];\n  onFocusOutside?: DismissableLayerProps['onFocusOutside'];\n  onInteractOutside?: DismissableLayerProps['onInteractOutside'];\n}\n\nconst MenuContentImpl = React.forwardRef<MenuContentImplElement, MenuContentImplProps>(\n  (props: ScopedProps<MenuContentImplProps>, forwardedRef) => {\n    const {\n      __scopeMenu,\n      loop = false,\n      trapFocus,\n      onOpenAutoFocus,\n      onCloseAutoFocus,\n      disableOutsidePointerEvents,\n      onEntryFocus,\n      onEscapeKeyDown,\n      onPointerDownOutside,\n      onFocusOutside,\n      onInteractOutside,\n      onDismiss,\n      disableOutsideScroll,\n      ...contentProps\n    } = props;\n    const context = useMenuContext(CONTENT_NAME, __scopeMenu);\n    const rootContext = useMenuRootContext(CONTENT_NAME, __scopeMenu);\n    const popperScope = usePopperScope(__scopeMenu);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeMenu);\n    const getItems = useCollection(__scopeMenu);\n    const [currentItemId, setCurrentItemId] = React.useState<string | null>(null);\n    const contentRef = React.useRef<HTMLDivElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, contentRef, context.onContentChange);\n    const timerRef = React.useRef(0);\n    const searchRef = React.useRef('');\n    const pointerGraceTimerRef = React.useRef(0);\n    const pointerGraceIntentRef = React.useRef<GraceIntent | null>(null);\n    const pointerDirRef = React.useRef<Side>('right');\n    const lastPointerXRef = React.useRef(0);\n\n    const ScrollLockWrapper = disableOutsideScroll ? RemoveScroll : React.Fragment;\n    const scrollLockWrapperProps = disableOutsideScroll\n      ? { as: Slot, allowPinchZoom: true }\n      : undefined;\n\n    const handleTypeaheadSearch = (key: string) => {\n      const search = searchRef.current + key;\n      const items = getItems().filter((item) => !item.disabled);\n      const currentItem = document.activeElement;\n      const currentMatch = items.find((item) => item.ref.current === currentItem)?.textValue;\n      const values = items.map((item) => item.textValue);\n      const nextMatch = getNextMatch(values, search, currentMatch);\n      const newItem = items.find((item) => item.textValue === nextMatch)?.ref.current;\n\n      // Reset `searchRef` 1 second after it was last updated\n      (function updateSearch(value: string) {\n        searchRef.current = value;\n        window.clearTimeout(timerRef.current);\n        if (value !== '') timerRef.current = window.setTimeout(() => updateSearch(''), 1000);\n      })(search);\n\n      if (newItem) {\n        /**\n         * Imperative focus during keydown is risky so we prevent React's batching updates\n         * to avoid potential bugs. See: https://github.com/facebook/react/issues/20332\n         */\n        setTimeout(() => (newItem as HTMLElement).focus());\n      }\n    };\n\n    React.useEffect(() => {\n      return () => window.clearTimeout(timerRef.current);\n    }, []);\n\n    // Make sure the whole tree has focus guards as our `MenuContent` may be\n    // the last element in the DOM (because of the `Portal`)\n    useFocusGuards();\n\n    const isPointerMovingToSubmenu = React.useCallback((event: React.PointerEvent) => {\n      const isMovingTowards = pointerDirRef.current === pointerGraceIntentRef.current?.side;\n      return isMovingTowards && isPointerInGraceArea(event, pointerGraceIntentRef.current?.area);\n    }, []);\n\n    return (\n      <MenuContentProvider\n        scope={__scopeMenu}\n        searchRef={searchRef}\n        onItemEnter={React.useCallback(\n          (event) => {\n            if (isPointerMovingToSubmenu(event)) event.preventDefault();\n          },\n          [isPointerMovingToSubmenu]\n        )}\n        onItemLeave={React.useCallback(\n          (event) => {\n            if (isPointerMovingToSubmenu(event)) return;\n            contentRef.current?.focus();\n            setCurrentItemId(null);\n          },\n          [isPointerMovingToSubmenu]\n        )}\n        onTriggerLeave={React.useCallback(\n          (event) => {\n            if (isPointerMovingToSubmenu(event)) event.preventDefault();\n          },\n          [isPointerMovingToSubmenu]\n        )}\n        pointerGraceTimerRef={pointerGraceTimerRef}\n        onPointerGraceIntentChange={React.useCallback((intent) => {\n          pointerGraceIntentRef.current = intent;\n        }, [])}\n      >\n        <ScrollLockWrapper {...scrollLockWrapperProps}>\n          <FocusScope\n            asChild\n            trapped={trapFocus}\n            onMountAutoFocus={composeEventHandlers(onOpenAutoFocus, (event) => {\n              // when opening, explicitly focus the content area only and leave\n              // `onEntryFocus` in  control of focusing first item\n              event.preventDefault();\n              contentRef.current?.focus({ preventScroll: true });\n            })}\n            onUnmountAutoFocus={onCloseAutoFocus}\n          >\n            <DismissableLayer\n              asChild\n              disableOutsidePointerEvents={disableOutsidePointerEvents}\n              onEscapeKeyDown={onEscapeKeyDown}\n              onPointerDownOutside={onPointerDownOutside}\n              onFocusOutside={onFocusOutside}\n              onInteractOutside={onInteractOutside}\n              onDismiss={onDismiss}\n            >\n              <RovingFocusGroup.Root\n                asChild\n                {...rovingFocusGroupScope}\n                dir={rootContext.dir}\n                orientation=\"vertical\"\n                loop={loop}\n                currentTabStopId={currentItemId}\n                onCurrentTabStopIdChange={setCurrentItemId}\n                onEntryFocus={composeEventHandlers(onEntryFocus, (event) => {\n                  // only focus first item when using keyboard\n                  if (!rootContext.isUsingKeyboardRef.current) event.preventDefault();\n                })}\n                preventScrollOnEntryFocus\n              >\n                <PopperPrimitive.Content\n                  role=\"menu\"\n                  aria-orientation=\"vertical\"\n                  data-state={getOpenState(context.open)}\n                  data-radix-menu-content=\"\"\n                  dir={rootContext.dir}\n                  {...popperScope}\n                  {...contentProps}\n                  ref={composedRefs}\n                  style={{ outline: 'none', ...contentProps.style }}\n                  onKeyDown={composeEventHandlers(contentProps.onKeyDown, (event) => {\n                    // submenu key events bubble through portals. We only care about keys in this menu.\n                    const target = event.target as HTMLElement;\n                    const isKeyDownInside =\n                      target.closest('[data-radix-menu-content]') === event.currentTarget;\n                    const isModifierKey = event.ctrlKey || event.altKey || event.metaKey;\n                    const isCharacterKey = event.key.length === 1;\n                    if (isKeyDownInside) {\n                      // menus should not be navigated using tab key so we prevent it\n                      if (event.key === 'Tab') event.preventDefault();\n                      if (!isModifierKey && isCharacterKey) handleTypeaheadSearch(event.key);\n                    }\n                    // focus first/last item based on key pressed\n                    const content = contentRef.current;\n                    if (event.target !== content) return;\n                    if (!FIRST_LAST_KEYS.includes(event.key)) return;\n                    event.preventDefault();\n                    const items = getItems().filter((item) => !item.disabled);\n                    const candidateNodes = items.map((item) => item.ref.current!);\n                    if (LAST_KEYS.includes(event.key)) candidateNodes.reverse();\n                    focusFirst(candidateNodes);\n                  })}\n                  onBlur={composeEventHandlers(props.onBlur, (event) => {\n                    // clear search buffer when leaving the menu\n                    if (!event.currentTarget.contains(event.target)) {\n                      window.clearTimeout(timerRef.current);\n                      searchRef.current = '';\n                    }\n                  })}\n                  onPointerMove={composeEventHandlers(\n                    props.onPointerMove,\n                    whenMouse((event) => {\n                      const target = event.target as HTMLElement;\n                      const pointerXHasChanged = lastPointerXRef.current !== event.clientX;\n\n                      // We don't use `event.movementX` for this check because Safari will\n                      // always return `0` on a pointer event.\n                      if (event.currentTarget.contains(target) && pointerXHasChanged) {\n                        const newDir = event.clientX > lastPointerXRef.current ? 'right' : 'left';\n                        pointerDirRef.current = newDir;\n                        lastPointerXRef.current = event.clientX;\n                      }\n                    })\n                  )}\n                />\n              </RovingFocusGroup.Root>\n            </DismissableLayer>\n          </FocusScope>\n        </ScrollLockWrapper>\n      </MenuContentProvider>\n    );\n  }\n);\n\nMenuContent.displayName = CONTENT_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuGroup\n * -----------------------------------------------------------------------------------------------*/\n\nconst GROUP_NAME = 'MenuGroup';\n\ntype MenuGroupElement = React.ElementRef<typeof Primitive.div>;\ntype PrimitiveDivProps = React.ComponentPropsWithoutRef<typeof Primitive.div>;\ninterface MenuGroupProps extends PrimitiveDivProps {}\n\nconst MenuGroup = React.forwardRef<MenuGroupElement, MenuGroupProps>(\n  (props: ScopedProps<MenuGroupProps>, forwardedRef) => {\n    const { __scopeMenu, ...groupProps } = props;\n    return <Primitive.div role=\"group\" {...groupProps} ref={forwardedRef} />;\n  }\n);\n\nMenuGroup.displayName = GROUP_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuLabel\n * -----------------------------------------------------------------------------------------------*/\n\nconst LABEL_NAME = 'MenuLabel';\n\ntype MenuLabelElement = React.ElementRef<typeof Primitive.div>;\ninterface MenuLabelProps extends PrimitiveDivProps {}\n\nconst MenuLabel = React.forwardRef<MenuLabelElement, MenuLabelProps>(\n  (props: ScopedProps<MenuLabelProps>, forwardedRef) => {\n    const { __scopeMenu, ...labelProps } = props;\n    return <Primitive.div {...labelProps} ref={forwardedRef} />;\n  }\n);\n\nMenuLabel.displayName = LABEL_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst ITEM_NAME = 'MenuItem';\nconst ITEM_SELECT = 'menu.itemSelect';\n\ntype MenuItemElement = MenuItemImplElement;\ninterface MenuItemProps extends Omit<MenuItemImplProps, 'onSelect'> {\n  onSelect?: (event: Event) => void;\n}\n\nconst MenuItem = React.forwardRef<MenuItemElement, MenuItemProps>(\n  (props: ScopedProps<MenuItemProps>, forwardedRef) => {\n    const { disabled = false, onSelect, ...itemProps } = props;\n    const ref = React.useRef<HTMLDivElement>(null);\n    const rootContext = useMenuRootContext(ITEM_NAME, props.__scopeMenu);\n    const contentContext = useMenuContentContext(ITEM_NAME, props.__scopeMenu);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const isPointerDownRef = React.useRef(false);\n\n    const handleSelect = () => {\n      const menuItem = ref.current;\n      if (!disabled && menuItem) {\n        const itemSelectEvent = new CustomEvent(ITEM_SELECT, { bubbles: true, cancelable: true });\n        menuItem.addEventListener(ITEM_SELECT, (event) => onSelect?.(event), { once: true });\n        dispatchDiscreteCustomEvent(menuItem, itemSelectEvent);\n        if (itemSelectEvent.defaultPrevented) {\n          isPointerDownRef.current = false;\n        } else {\n          rootContext.onClose();\n        }\n      }\n    };\n\n    return (\n      <MenuItemImpl\n        {...itemProps}\n        ref={composedRefs}\n        disabled={disabled}\n        onClick={composeEventHandlers(props.onClick, handleSelect)}\n        onPointerDown={(event) => {\n          props.onPointerDown?.(event);\n          isPointerDownRef.current = true;\n        }}\n        onPointerUp={composeEventHandlers(props.onPointerUp, (event) => {\n          // Pointer down can move to a different menu item which should activate it on pointer up.\n          // We dispatch a click for selection to allow composition with click based triggers and to\n          // prevent Firefox from getting stuck in text selection mode when the menu closes.\n          if (!isPointerDownRef.current) event.currentTarget?.click();\n        })}\n        onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n          const isTypingAhead = contentContext.searchRef.current !== '';\n          if (disabled || (isTypingAhead && event.key === ' ')) return;\n          if (SELECTION_KEYS.includes(event.key)) {\n            event.currentTarget.click();\n            /**\n             * We prevent default browser behaviour for selection keys as they should trigger\n             * a selection only:\n             * - prevents space from scrolling the page.\n             * - if keydown causes focus to move, prevents keydown from firing on the new target.\n             */\n            event.preventDefault();\n          }\n        })}\n      />\n    );\n  }\n);\n\nMenuItem.displayName = ITEM_NAME;\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype MenuItemImplElement = React.ElementRef<typeof Primitive.div>;\ninterface MenuItemImplProps extends PrimitiveDivProps {\n  disabled?: boolean;\n  textValue?: string;\n}\n\nconst MenuItemImpl = React.forwardRef<MenuItemImplElement, MenuItemImplProps>(\n  (props: ScopedProps<MenuItemImplProps>, forwardedRef) => {\n    const { __scopeMenu, disabled = false, textValue, ...itemProps } = props;\n    const contentContext = useMenuContentContext(ITEM_NAME, __scopeMenu);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeMenu);\n    const ref = React.useRef<HTMLDivElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const [isFocused, setIsFocused] = React.useState(false);\n\n    // get the item's `.textContent` as default strategy for typeahead `textValue`\n    const [textContent, setTextContent] = React.useState('');\n    React.useEffect(() => {\n      const menuItem = ref.current;\n      if (menuItem) {\n        setTextContent((menuItem.textContent ?? '').trim());\n      }\n    }, [itemProps.children]);\n\n    return (\n      <Collection.ItemSlot\n        scope={__scopeMenu}\n        disabled={disabled}\n        textValue={textValue ?? textContent}\n      >\n        <RovingFocusGroup.Item asChild {...rovingFocusGroupScope} focusable={!disabled}>\n          <Primitive.div\n            role=\"menuitem\"\n            data-highlighted={isFocused ? '' : undefined}\n            aria-disabled={disabled || undefined}\n            data-disabled={disabled ? '' : undefined}\n            {...itemProps}\n            ref={composedRefs}\n            /**\n             * We focus items on `pointerMove` to achieve the following:\n             *\n             * - Mouse over an item (it focuses)\n             * - Leave mouse where it is and use keyboard to focus a different item\n             * - Wiggle mouse without it leaving previously focused item\n             * - Previously focused item should re-focus\n             *\n             * If we used `mouseOver`/`mouseEnter` it would not re-focus when the mouse\n             * wiggles. This is to match native menu implementation.\n             */\n            onPointerMove={composeEventHandlers(\n              props.onPointerMove,\n              whenMouse((event) => {\n                if (disabled) {\n                  contentContext.onItemLeave(event);\n                } else {\n                  contentContext.onItemEnter(event);\n                  if (!event.defaultPrevented) {\n                    const item = event.currentTarget;\n                    item.focus({ preventScroll: true });\n                  }\n                }\n              })\n            )}\n            onPointerLeave={composeEventHandlers(\n              props.onPointerLeave,\n              whenMouse((event) => contentContext.onItemLeave(event))\n            )}\n            onFocus={composeEventHandlers(props.onFocus, () => setIsFocused(true))}\n            onBlur={composeEventHandlers(props.onBlur, () => setIsFocused(false))}\n          />\n        </RovingFocusGroup.Item>\n      </Collection.ItemSlot>\n    );\n  }\n);\n\n/* -------------------------------------------------------------------------------------------------\n * MenuCheckboxItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst CHECKBOX_ITEM_NAME = 'MenuCheckboxItem';\n\ntype MenuCheckboxItemElement = MenuItemElement;\n\ntype CheckedState = boolean | 'indeterminate';\n\ninterface MenuCheckboxItemProps extends MenuItemProps {\n  checked?: CheckedState;\n  // `onCheckedChange` can never be called with `\"indeterminate\"` from the inside\n  onCheckedChange?: (checked: boolean) => void;\n}\n\nconst MenuCheckboxItem = React.forwardRef<MenuCheckboxItemElement, MenuCheckboxItemProps>(\n  (props: ScopedProps<MenuCheckboxItemProps>, forwardedRef) => {\n    const { checked = false, onCheckedChange, ...checkboxItemProps } = props;\n    return (\n      <ItemIndicatorProvider scope={props.__scopeMenu} checked={checked}>\n        <MenuItem\n          role=\"menuitemcheckbox\"\n          aria-checked={isIndeterminate(checked) ? 'mixed' : checked}\n          {...checkboxItemProps}\n          ref={forwardedRef}\n          data-state={getCheckedState(checked)}\n          onSelect={composeEventHandlers(\n            checkboxItemProps.onSelect,\n            () => onCheckedChange?.(isIndeterminate(checked) ? true : !checked),\n            { checkForDefaultPrevented: false }\n          )}\n        />\n      </ItemIndicatorProvider>\n    );\n  }\n);\n\nMenuCheckboxItem.displayName = CHECKBOX_ITEM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuRadioGroup\n * -----------------------------------------------------------------------------------------------*/\n\nconst RADIO_GROUP_NAME = 'MenuRadioGroup';\n\nconst [RadioGroupProvider, useRadioGroupContext] = createMenuContext<MenuRadioGroupProps>(\n  RADIO_GROUP_NAME,\n  { value: undefined, onValueChange: () => {} }\n);\n\ntype MenuRadioGroupElement = React.ElementRef<typeof MenuGroup>;\ninterface MenuRadioGroupProps extends MenuGroupProps {\n  value?: string;\n  onValueChange?: (value: string) => void;\n}\n\nconst MenuRadioGroup = React.forwardRef<MenuRadioGroupElement, MenuRadioGroupProps>(\n  (props: ScopedProps<MenuRadioGroupProps>, forwardedRef) => {\n    const { value, onValueChange, ...groupProps } = props;\n    const handleValueChange = useCallbackRef(onValueChange);\n    return (\n      <RadioGroupProvider scope={props.__scopeMenu} value={value} onValueChange={handleValueChange}>\n        <MenuGroup {...groupProps} ref={forwardedRef} />\n      </RadioGroupProvider>\n    );\n  }\n);\n\nMenuRadioGroup.displayName = RADIO_GROUP_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuRadioItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst RADIO_ITEM_NAME = 'MenuRadioItem';\n\ntype MenuRadioItemElement = React.ElementRef<typeof MenuItem>;\ninterface MenuRadioItemProps extends MenuItemProps {\n  value: string;\n}\n\nconst MenuRadioItem = React.forwardRef<MenuRadioItemElement, MenuRadioItemProps>(\n  (props: ScopedProps<MenuRadioItemProps>, forwardedRef) => {\n    const { value, ...radioItemProps } = props;\n    const context = useRadioGroupContext(RADIO_ITEM_NAME, props.__scopeMenu);\n    const checked = value === context.value;\n    return (\n      <ItemIndicatorProvider scope={props.__scopeMenu} checked={checked}>\n        <MenuItem\n          role=\"menuitemradio\"\n          aria-checked={checked}\n          {...radioItemProps}\n          ref={forwardedRef}\n          data-state={getCheckedState(checked)}\n          onSelect={composeEventHandlers(\n            radioItemProps.onSelect,\n            () => context.onValueChange?.(value),\n            { checkForDefaultPrevented: false }\n          )}\n        />\n      </ItemIndicatorProvider>\n    );\n  }\n);\n\nMenuRadioItem.displayName = RADIO_ITEM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuItemIndicator\n * -----------------------------------------------------------------------------------------------*/\n\nconst ITEM_INDICATOR_NAME = 'MenuItemIndicator';\n\ntype CheckboxContextValue = { checked: CheckedState };\n\nconst [ItemIndicatorProvider, useItemIndicatorContext] = createMenuContext<CheckboxContextValue>(\n  ITEM_INDICATOR_NAME,\n  { checked: false }\n);\n\ntype MenuItemIndicatorElement = React.ElementRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = React.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface MenuItemIndicatorProps extends PrimitiveSpanProps {\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst MenuItemIndicator = React.forwardRef<MenuItemIndicatorElement, MenuItemIndicatorProps>(\n  (props: ScopedProps<MenuItemIndicatorProps>, forwardedRef) => {\n    const { __scopeMenu, forceMount, ...itemIndicatorProps } = props;\n    const indicatorContext = useItemIndicatorContext(ITEM_INDICATOR_NAME, __scopeMenu);\n    return (\n      <Presence\n        present={\n          forceMount ||\n          isIndeterminate(indicatorContext.checked) ||\n          indicatorContext.checked === true\n        }\n      >\n        <Primitive.span\n          {...itemIndicatorProps}\n          ref={forwardedRef}\n          data-state={getCheckedState(indicatorContext.checked)}\n        />\n      </Presence>\n    );\n  }\n);\n\nMenuItemIndicator.displayName = ITEM_INDICATOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuSeparator\n * -----------------------------------------------------------------------------------------------*/\n\nconst SEPARATOR_NAME = 'MenuSeparator';\n\ntype MenuSeparatorElement = React.ElementRef<typeof Primitive.div>;\ninterface MenuSeparatorProps extends PrimitiveDivProps {}\n\nconst MenuSeparator = React.forwardRef<MenuSeparatorElement, MenuSeparatorProps>(\n  (props: ScopedProps<MenuSeparatorProps>, forwardedRef) => {\n    const { __scopeMenu, ...separatorProps } = props;\n    return (\n      <Primitive.div\n        role=\"separator\"\n        aria-orientation=\"horizontal\"\n        {...separatorProps}\n        ref={forwardedRef}\n      />\n    );\n  }\n);\n\nMenuSeparator.displayName = SEPARATOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuArrow\n * -----------------------------------------------------------------------------------------------*/\n\nconst ARROW_NAME = 'MenuArrow';\n\ntype MenuArrowElement = React.ElementRef<typeof PopperPrimitive.Arrow>;\ntype PopperArrowProps = React.ComponentPropsWithoutRef<typeof PopperPrimitive.Arrow>;\ninterface MenuArrowProps extends PopperArrowProps {}\n\nconst MenuArrow = React.forwardRef<MenuArrowElement, MenuArrowProps>(\n  (props: ScopedProps<MenuArrowProps>, forwardedRef) => {\n    const { __scopeMenu, ...arrowProps } = props;\n    const popperScope = usePopperScope(__scopeMenu);\n    return <PopperPrimitive.Arrow {...popperScope} {...arrowProps} ref={forwardedRef} />;\n  }\n);\n\nMenuArrow.displayName = ARROW_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuSub\n * -----------------------------------------------------------------------------------------------*/\n\nconst SUB_NAME = 'MenuSub';\n\ntype MenuSubContextValue = {\n  contentId: string;\n  triggerId: string;\n  trigger: MenuSubTriggerElement | null;\n  onTriggerChange(trigger: MenuSubTriggerElement | null): void;\n};\n\nconst [MenuSubProvider, useMenuSubContext] = createMenuContext<MenuSubContextValue>(SUB_NAME);\n\ninterface MenuSubProps {\n  children?: React.ReactNode;\n  open?: boolean;\n  onOpenChange?(open: boolean): void;\n}\n\nconst MenuSub: React.FC<MenuSubProps> = (props: ScopedProps<MenuSubProps>) => {\n  const { __scopeMenu, children, open = false, onOpenChange } = props;\n  const parentMenuContext = useMenuContext(SUB_NAME, __scopeMenu);\n  const popperScope = usePopperScope(__scopeMenu);\n  const [trigger, setTrigger] = React.useState<MenuSubTriggerElement | null>(null);\n  const [content, setContent] = React.useState<MenuContentElement | null>(null);\n  const handleOpenChange = useCallbackRef(onOpenChange);\n\n  // Prevent the parent menu from reopening with open submenus.\n  React.useEffect(() => {\n    if (parentMenuContext.open === false) handleOpenChange(false);\n    return () => handleOpenChange(false);\n  }, [parentMenuContext.open, handleOpenChange]);\n\n  return (\n    <PopperPrimitive.Root {...popperScope}>\n      <MenuProvider\n        scope={__scopeMenu}\n        open={open}\n        onOpenChange={handleOpenChange}\n        content={content}\n        onContentChange={setContent}\n      >\n        <MenuSubProvider\n          scope={__scopeMenu}\n          contentId={useId()}\n          triggerId={useId()}\n          trigger={trigger}\n          onTriggerChange={setTrigger}\n        >\n          {children}\n        </MenuSubProvider>\n      </MenuProvider>\n    </PopperPrimitive.Root>\n  );\n};\n\nMenuSub.displayName = SUB_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuSubTrigger\n * -----------------------------------------------------------------------------------------------*/\n\nconst SUB_TRIGGER_NAME = 'MenuSubTrigger';\n\ntype MenuSubTriggerElement = MenuItemImplElement;\ninterface MenuSubTriggerProps extends MenuItemImplProps {}\n\nconst MenuSubTrigger = React.forwardRef<MenuSubTriggerElement, MenuSubTriggerProps>(\n  (props: ScopedProps<MenuSubTriggerProps>, forwardedRef) => {\n    const context = useMenuContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const rootContext = useMenuRootContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const subContext = useMenuSubContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const contentContext = useMenuContentContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const openTimerRef = React.useRef<number | null>(null);\n    const { pointerGraceTimerRef, onPointerGraceIntentChange } = contentContext;\n    const scope = { __scopeMenu: props.__scopeMenu };\n\n    const clearOpenTimer = React.useCallback(() => {\n      if (openTimerRef.current) window.clearTimeout(openTimerRef.current);\n      openTimerRef.current = null;\n    }, []);\n\n    React.useEffect(() => clearOpenTimer, [clearOpenTimer]);\n\n    React.useEffect(() => {\n      const pointerGraceTimer = pointerGraceTimerRef.current;\n      return () => {\n        window.clearTimeout(pointerGraceTimer);\n        onPointerGraceIntentChange(null);\n      };\n    }, [pointerGraceTimerRef, onPointerGraceIntentChange]);\n\n    return (\n      <MenuAnchor asChild {...scope}>\n        <MenuItemImpl\n          id={subContext.triggerId}\n          aria-haspopup=\"menu\"\n          aria-expanded={context.open}\n          aria-controls={subContext.contentId}\n          data-state={getOpenState(context.open)}\n          {...props}\n          ref={composeRefs(forwardedRef, subContext.onTriggerChange)}\n          // This is redundant for mouse users but we cannot determine pointer type from\n          // click event and we cannot use pointerup event (see git history for reasons why)\n          onClick={(event) => {\n            props.onClick?.(event);\n            if (props.disabled || event.defaultPrevented) return;\n            /**\n             * We manually focus because iOS Safari doesn't always focus on click (e.g. buttons)\n             * and we rely heavily on `onFocusOutside` for submenus to close when switching\n             * between separate submenus.\n             */\n            event.currentTarget.focus();\n            if (!context.open) context.onOpenChange(true);\n          }}\n          onPointerMove={composeEventHandlers(\n            props.onPointerMove,\n            whenMouse((event) => {\n              contentContext.onItemEnter(event);\n              if (event.defaultPrevented) return;\n              if (!props.disabled && !context.open && !openTimerRef.current) {\n                contentContext.onPointerGraceIntentChange(null);\n                openTimerRef.current = window.setTimeout(() => {\n                  context.onOpenChange(true);\n                  clearOpenTimer();\n                }, 100);\n              }\n            })\n          )}\n          onPointerLeave={composeEventHandlers(\n            props.onPointerLeave,\n            whenMouse((event) => {\n              clearOpenTimer();\n\n              const contentRect = context.content?.getBoundingClientRect();\n              if (contentRect) {\n                // TODO: make sure to update this when we change positioning logic\n                const side = context.content?.dataset.side as Side;\n                const rightSide = side === 'right';\n                const bleed = rightSide ? -5 : +5;\n                const contentNearEdge = contentRect[rightSide ? 'left' : 'right'];\n                const contentFarEdge = contentRect[rightSide ? 'right' : 'left'];\n\n                contentContext.onPointerGraceIntentChange({\n                  area: [\n                    // Apply a bleed on clientX to ensure that our exit point is\n                    // consistently within polygon bounds\n                    { x: event.clientX + bleed, y: event.clientY },\n                    { x: contentNearEdge, y: contentRect.top },\n                    { x: contentFarEdge, y: contentRect.top },\n                    { x: contentFarEdge, y: contentRect.bottom },\n                    { x: contentNearEdge, y: contentRect.bottom },\n                  ],\n                  side,\n                });\n\n                window.clearTimeout(pointerGraceTimerRef.current);\n                pointerGraceTimerRef.current = window.setTimeout(\n                  () => contentContext.onPointerGraceIntentChange(null),\n                  300\n                );\n              } else {\n                contentContext.onTriggerLeave(event);\n                if (event.defaultPrevented) return;\n\n                // There's 100ms where the user may leave an item before the submenu was opened.\n                contentContext.onPointerGraceIntentChange(null);\n              }\n            })\n          )}\n          onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n            const isTypingAhead = contentContext.searchRef.current !== '';\n            if (props.disabled || (isTypingAhead && event.key === ' ')) return;\n            if (SUB_OPEN_KEYS[rootContext.dir].includes(event.key)) {\n              context.onOpenChange(true);\n              // The trigger may hold focus if opened via pointer interaction\n              // so we ensure content is given focus again when switching to keyboard.\n              context.content?.focus();\n              // prevent window from scrolling\n              event.preventDefault();\n            }\n          })}\n        />\n      </MenuAnchor>\n    );\n  }\n);\n\nMenuSubTrigger.displayName = SUB_TRIGGER_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuSubContent\n * -----------------------------------------------------------------------------------------------*/\n\nconst SUB_CONTENT_NAME = 'MenuSubContent';\n\ntype MenuSubContentElement = MenuContentImplElement;\ninterface MenuSubContentProps\n  extends Omit<\n    MenuContentImplProps,\n    keyof MenuContentImplPrivateProps | 'onCloseAutoFocus' | 'onEntryFocus' | 'side' | 'align'\n  > {\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst MenuSubContent = React.forwardRef<MenuSubContentElement, MenuSubContentProps>(\n  (props: ScopedProps<MenuSubContentProps>, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeMenu);\n    const { forceMount = portalContext.forceMount, ...subContentProps } = props;\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    const rootContext = useMenuRootContext(CONTENT_NAME, props.__scopeMenu);\n    const subContext = useMenuSubContext(SUB_CONTENT_NAME, props.__scopeMenu);\n    const ref = React.useRef<MenuSubContentElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    return (\n      <Collection.Provider scope={props.__scopeMenu}>\n        <Presence present={forceMount || context.open}>\n          <Collection.Slot scope={props.__scopeMenu}>\n            <MenuContentImpl\n              id={subContext.contentId}\n              aria-labelledby={subContext.triggerId}\n              {...subContentProps}\n              ref={composedRefs}\n              align=\"start\"\n              side={rootContext.dir === 'rtl' ? 'left' : 'right'}\n              disableOutsidePointerEvents={false}\n              disableOutsideScroll={false}\n              trapFocus={false}\n              onOpenAutoFocus={(event) => {\n                // when opening a submenu, focus content for keyboard users only\n                if (rootContext.isUsingKeyboardRef.current) ref.current?.focus();\n                event.preventDefault();\n              }}\n              // The menu might close because of focusing another menu item in the parent menu. We\n              // don't want it to refocus the trigger in that case so we handle trigger focus ourselves.\n              onCloseAutoFocus={(event) => event.preventDefault()}\n              onFocusOutside={composeEventHandlers(props.onFocusOutside, (event) => {\n                // We prevent closing when the trigger is focused to avoid triggering a re-open animation\n                // on pointer interaction.\n                if (event.target !== subContext.trigger) context.onOpenChange(false);\n              })}\n              onEscapeKeyDown={composeEventHandlers(props.onEscapeKeyDown, (event) => {\n                rootContext.onClose();\n                // ensure pressing escape in submenu doesn't escape full screen mode\n                event.preventDefault();\n              })}\n              onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n                // Submenu key events bubble through portals. We only care about keys in this menu.\n                const isKeyDownInside = event.currentTarget.contains(event.target as HTMLElement);\n                const isCloseKey = SUB_CLOSE_KEYS[rootContext.dir].includes(event.key);\n                if (isKeyDownInside && isCloseKey) {\n                  context.onOpenChange(false);\n                  // We focus manually because we prevented it in `onCloseAutoFocus`\n                  subContext.trigger?.focus();\n                  // prevent window from scrolling\n                  event.preventDefault();\n                }\n              })}\n            />\n          </Collection.Slot>\n        </Presence>\n      </Collection.Provider>\n    );\n  }\n);\n\nMenuSubContent.displayName = SUB_CONTENT_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nfunction getOpenState(open: boolean) {\n  return open ? 'open' : 'closed';\n}\n\nfunction isIndeterminate(checked?: CheckedState): checked is 'indeterminate' {\n  return checked === 'indeterminate';\n}\n\nfunction getCheckedState(checked: CheckedState) {\n  return isIndeterminate(checked) ? 'indeterminate' : checked ? 'checked' : 'unchecked';\n}\n\nfunction focusFirst(candidates: HTMLElement[]) {\n  const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n  for (const candidate of candidates) {\n    // if focus is already where we want to go, we don't want to keep going through the candidates\n    if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n    candidate.focus();\n    if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n  }\n}\n\n/**\n * Wraps an array around itself at a given start index\n * Example: `wrapArray(['a', 'b', 'c', 'd'], 2) === ['c', 'd', 'a', 'b']`\n */\nfunction wrapArray<T>(array: T[], startIndex: number) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\n\n/**\n * This is the \"meat\" of the typeahead matching logic. It takes in all the values,\n * the search and the current match, and returns the next match (or `undefined`).\n *\n * We normalize the search because if a user has repeatedly pressed a character,\n * we want the exact same behavior as if we only had that one character\n * (ie. cycle through options starting with that character)\n *\n * We also reorder the values by wrapping the array around the current match.\n * This is so we always look forward from the current match, and picking the first\n * match will always be the correct one.\n *\n * Finally, if the normalized search is exactly one character, we exclude the\n * current match from the values because otherwise it would be the first to match always\n * and focus would never move. This is as opposed to the regular case, where we\n * don't want focus to move if the current match still matches.\n */\nfunction getNextMatch(values: string[], search: string, currentMatch?: string) {\n  const isRepeated = search.length > 1 && Array.from(search).every((char) => char === search[0]);\n  const normalizedSearch = isRepeated ? search[0] : search;\n  const currentMatchIndex = currentMatch ? values.indexOf(currentMatch) : -1;\n  let wrappedValues = wrapArray(values, Math.max(currentMatchIndex, 0));\n  const excludeCurrentMatch = normalizedSearch.length === 1;\n  if (excludeCurrentMatch) wrappedValues = wrappedValues.filter((v) => v !== currentMatch);\n  const nextMatch = wrappedValues.find((value) =>\n    value.toLowerCase().startsWith(normalizedSearch.toLowerCase())\n  );\n  return nextMatch !== currentMatch ? nextMatch : undefined;\n}\n\ntype Point = { x: number; y: number };\ntype Polygon = Point[];\ntype Side = 'left' | 'right';\ntype GraceIntent = { area: Polygon; side: Side };\n\n// Determine if a point is inside of a polygon.\n// Based on https://github.com/substack/point-in-polygon\nfunction isPointInPolygon(point: Point, polygon: Polygon) {\n  const { x, y } = point;\n  let inside = false;\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    const xi = polygon[i].x;\n    const yi = polygon[i].y;\n    const xj = polygon[j].x;\n    const yj = polygon[j].y;\n\n    // prettier-ignore\n    const intersect = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n    if (intersect) inside = !inside;\n  }\n\n  return inside;\n}\n\nfunction isPointerInGraceArea(event: React.PointerEvent, area?: Polygon) {\n  if (!area) return false;\n  const cursorPos = { x: event.clientX, y: event.clientY };\n  return isPointInPolygon(cursorPos, area);\n}\n\nfunction whenMouse<E>(handler: React.PointerEventHandler<E>): React.PointerEventHandler<E> {\n  return (event) => (event.pointerType === 'mouse' ? handler(event) : undefined);\n}\n\nconst Root = Menu;\nconst Anchor = MenuAnchor;\nconst Portal = MenuPortal;\nconst Content = MenuContent;\nconst Group = MenuGroup;\nconst Label = MenuLabel;\nconst Item = MenuItem;\nconst CheckboxItem = MenuCheckboxItem;\nconst RadioGroup = MenuRadioGroup;\nconst RadioItem = MenuRadioItem;\nconst ItemIndicator = MenuItemIndicator;\nconst Separator = MenuSeparator;\nconst Arrow = MenuArrow;\nconst Sub = MenuSub;\nconst SubTrigger = MenuSubTrigger;\nconst SubContent = MenuSubContent;\n\nexport {\n  createMenuScope,\n  //\n  Menu,\n  MenuAnchor,\n  MenuPortal,\n  MenuContent,\n  MenuGroup,\n  MenuLabel,\n  MenuItem,\n  MenuCheckboxItem,\n  MenuRadioGroup,\n  MenuRadioItem,\n  MenuItemIndicator,\n  MenuSeparator,\n  MenuArrow,\n  MenuSub,\n  MenuSubTrigger,\n  MenuSubContent,\n  //\n  Root,\n  Anchor,\n  Portal,\n  Content,\n  Group,\n  Label,\n  Item,\n  CheckboxItem,\n  RadioGroup,\n  RadioItem,\n  ItemIndicator,\n  Separator,\n  Arrow,\n  Sub,\n  SubTrigger,\n  SubContent,\n};\nexport type {\n  MenuProps,\n  MenuAnchorProps,\n  MenuPortalProps,\n  MenuContentProps,\n  MenuGroupProps,\n  MenuLabelProps,\n  MenuItemProps,\n  MenuCheckboxItemProps,\n  MenuRadioGroupProps,\n  MenuRadioItemProps,\n  MenuItemIndicatorProps,\n  MenuSeparatorProps,\n  MenuArrowProps,\n  MenuSubProps,\n  MenuSubTriggerProps,\n  MenuSubContentProps,\n};\n", "import * as React from 'react';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { createCollection } from '@radix-ui/react-collection';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { useId } from '@radix-ui/react-id';\nimport { Primitive } from '@radix-ui/react-primitive';\nimport { useCallbackRef } from '@radix-ui/react-use-callback-ref';\nimport { useControllableState } from '@radix-ui/react-use-controllable-state';\nimport { useDirection } from '@radix-ui/react-direction';\n\nimport type { Scope } from '@radix-ui/react-context';\n\nconst ENTRY_FOCUS = 'rovingFocusGroup.onEntryFocus';\nconst EVENT_OPTIONS = { bubbles: false, cancelable: true };\n\n/* -------------------------------------------------------------------------------------------------\n * RovingFocusGroup\n * -----------------------------------------------------------------------------------------------*/\n\nconst GROUP_NAME = 'RovingFocusGroup';\n\ntype ItemData = { id: string; focusable: boolean; active: boolean };\nconst [Collection, useCollection, createCollectionScope] = createCollection<\n  HTMLSpanElement,\n  ItemData\n>(GROUP_NAME);\n\ntype ScopedProps<P> = P & { __scopeRovingFocusGroup?: Scope };\nconst [createRovingFocusGroupContext, createRovingFocusGroupScope] = createContextScope(\n  GROUP_NAME,\n  [createCollectionScope]\n);\n\ntype Orientation = React.AriaAttributes['aria-orientation'];\ntype Direction = 'ltr' | 'rtl';\n\ninterface RovingFocusGroupOptions {\n  /**\n   * The orientation of the group.\n   * Mainly so arrow navigation is done accordingly (left & right vs. up & down)\n   */\n  orientation?: Orientation;\n  /**\n   * The direction of navigation between items.\n   */\n  dir?: Direction;\n  /**\n   * Whether keyboard navigation should loop around\n   * @defaultValue false\n   */\n  loop?: boolean;\n}\n\ntype RovingContextValue = RovingFocusGroupOptions & {\n  currentTabStopId: string | null;\n  onItemFocus(tabStopId: string): void;\n  onItemShiftTab(): void;\n  onFocusableItemAdd(): void;\n  onFocusableItemRemove(): void;\n};\n\nconst [RovingFocusProvider, useRovingFocusContext] =\n  createRovingFocusGroupContext<RovingContextValue>(GROUP_NAME);\n\ntype RovingFocusGroupElement = RovingFocusGroupImplElement;\ninterface RovingFocusGroupProps extends RovingFocusGroupImplProps {}\n\nconst RovingFocusGroup = React.forwardRef<RovingFocusGroupElement, RovingFocusGroupProps>(\n  (props: ScopedProps<RovingFocusGroupProps>, forwardedRef) => {\n    return (\n      <Collection.Provider scope={props.__scopeRovingFocusGroup}>\n        <Collection.Slot scope={props.__scopeRovingFocusGroup}>\n          <RovingFocusGroupImpl {...props} ref={forwardedRef} />\n        </Collection.Slot>\n      </Collection.Provider>\n    );\n  }\n);\n\nRovingFocusGroup.displayName = GROUP_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\ntype RovingFocusGroupImplElement = React.ElementRef<typeof Primitive.div>;\ntype PrimitiveDivProps = React.ComponentPropsWithoutRef<typeof Primitive.div>;\ninterface RovingFocusGroupImplProps\n  extends Omit<PrimitiveDivProps, 'dir'>,\n    RovingFocusGroupOptions {\n  currentTabStopId?: string | null;\n  defaultCurrentTabStopId?: string;\n  onCurrentTabStopIdChange?: (tabStopId: string | null) => void;\n  onEntryFocus?: (event: Event) => void;\n  preventScrollOnEntryFocus?: boolean;\n}\n\nconst RovingFocusGroupImpl = React.forwardRef<\n  RovingFocusGroupImplElement,\n  RovingFocusGroupImplProps\n>((props: ScopedProps<RovingFocusGroupImplProps>, forwardedRef) => {\n  const {\n    __scopeRovingFocusGroup,\n    orientation,\n    loop = false,\n    dir,\n    currentTabStopId: currentTabStopIdProp,\n    defaultCurrentTabStopId,\n    onCurrentTabStopIdChange,\n    onEntryFocus,\n    preventScrollOnEntryFocus = false,\n    ...groupProps\n  } = props;\n  const ref = React.useRef<RovingFocusGroupImplElement>(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  const direction = useDirection(dir);\n  const [currentTabStopId = null, setCurrentTabStopId] = useControllableState({\n    prop: currentTabStopIdProp,\n    defaultProp: defaultCurrentTabStopId,\n    onChange: onCurrentTabStopIdChange,\n  });\n  const [isTabbingBackOut, setIsTabbingBackOut] = React.useState(false);\n  const handleEntryFocus = useCallbackRef(onEntryFocus);\n  const getItems = useCollection(__scopeRovingFocusGroup);\n  const isClickFocusRef = React.useRef(false);\n  const [focusableItemsCount, setFocusableItemsCount] = React.useState(0);\n\n  React.useEffect(() => {\n    const node = ref.current;\n    if (node) {\n      node.addEventListener(ENTRY_FOCUS, handleEntryFocus);\n      return () => node.removeEventListener(ENTRY_FOCUS, handleEntryFocus);\n    }\n  }, [handleEntryFocus]);\n\n  return (\n    <RovingFocusProvider\n      scope={__scopeRovingFocusGroup}\n      orientation={orientation}\n      dir={direction}\n      loop={loop}\n      currentTabStopId={currentTabStopId}\n      onItemFocus={React.useCallback(\n        (tabStopId) => setCurrentTabStopId(tabStopId),\n        [setCurrentTabStopId]\n      )}\n      onItemShiftTab={React.useCallback(() => setIsTabbingBackOut(true), [])}\n      onFocusableItemAdd={React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount + 1),\n        []\n      )}\n      onFocusableItemRemove={React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount - 1),\n        []\n      )}\n    >\n      <Primitive.div\n        tabIndex={isTabbingBackOut || focusableItemsCount === 0 ? -1 : 0}\n        data-orientation={orientation}\n        {...groupProps}\n        ref={composedRefs}\n        style={{ outline: 'none', ...props.style }}\n        onMouseDown={composeEventHandlers(props.onMouseDown, () => {\n          isClickFocusRef.current = true;\n        })}\n        onFocus={composeEventHandlers(props.onFocus, (event) => {\n          // We normally wouldn't need this check, because we already check\n          // that the focus is on the current target and not bubbling to it.\n          // We do this because Safari doesn't focus buttons when clicked, and\n          // instead, the wrapper will get focused and not through a bubbling event.\n          const isKeyboardFocus = !isClickFocusRef.current;\n\n          if (event.target === event.currentTarget && isKeyboardFocus && !isTabbingBackOut) {\n            const entryFocusEvent = new CustomEvent(ENTRY_FOCUS, EVENT_OPTIONS);\n            event.currentTarget.dispatchEvent(entryFocusEvent);\n\n            if (!entryFocusEvent.defaultPrevented) {\n              const items = getItems().filter((item) => item.focusable);\n              const activeItem = items.find((item) => item.active);\n              const currentItem = items.find((item) => item.id === currentTabStopId);\n              const candidateItems = [activeItem, currentItem, ...items].filter(\n                Boolean\n              ) as typeof items;\n              const candidateNodes = candidateItems.map((item) => item.ref.current!);\n              focusFirst(candidateNodes, preventScrollOnEntryFocus);\n            }\n          }\n\n          isClickFocusRef.current = false;\n        })}\n        onBlur={composeEventHandlers(props.onBlur, () => setIsTabbingBackOut(false))}\n      />\n    </RovingFocusProvider>\n  );\n});\n\n/* -------------------------------------------------------------------------------------------------\n * RovingFocusGroupItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst ITEM_NAME = 'RovingFocusGroupItem';\n\ntype RovingFocusItemElement = React.ElementRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = React.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface RovingFocusItemProps extends PrimitiveSpanProps {\n  tabStopId?: string;\n  focusable?: boolean;\n  active?: boolean;\n}\n\nconst RovingFocusGroupItem = React.forwardRef<RovingFocusItemElement, RovingFocusItemProps>(\n  (props: ScopedProps<RovingFocusItemProps>, forwardedRef) => {\n    const {\n      __scopeRovingFocusGroup,\n      focusable = true,\n      active = false,\n      tabStopId,\n      ...itemProps\n    } = props;\n    const autoId = useId();\n    const id = tabStopId || autoId;\n    const context = useRovingFocusContext(ITEM_NAME, __scopeRovingFocusGroup);\n    const isCurrentTabStop = context.currentTabStopId === id;\n    const getItems = useCollection(__scopeRovingFocusGroup);\n\n    const { onFocusableItemAdd, onFocusableItemRemove } = context;\n\n    React.useEffect(() => {\n      if (focusable) {\n        onFocusableItemAdd();\n        return () => onFocusableItemRemove();\n      }\n    }, [focusable, onFocusableItemAdd, onFocusableItemRemove]);\n\n    return (\n      <Collection.ItemSlot\n        scope={__scopeRovingFocusGroup}\n        id={id}\n        focusable={focusable}\n        active={active}\n      >\n        <Primitive.span\n          tabIndex={isCurrentTabStop ? 0 : -1}\n          data-orientation={context.orientation}\n          {...itemProps}\n          ref={forwardedRef}\n          onMouseDown={composeEventHandlers(props.onMouseDown, (event) => {\n            // We prevent focusing non-focusable items on `mousedown`.\n            // Even though the item has tabIndex={-1}, that only means take it out of the tab order.\n            if (!focusable) event.preventDefault();\n            // Safari doesn't focus a button when clicked so we run our logic on mousedown also\n            else context.onItemFocus(id);\n          })}\n          onFocus={composeEventHandlers(props.onFocus, () => context.onItemFocus(id))}\n          onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n            if (event.key === 'Tab' && event.shiftKey) {\n              context.onItemShiftTab();\n              return;\n            }\n\n            if (event.target !== event.currentTarget) return;\n\n            const focusIntent = getFocusIntent(event, context.orientation, context.dir);\n\n            if (focusIntent !== undefined) {\n              if (event.metaKey || event.ctrlKey || event.altKey || event.shiftKey) return;\n              event.preventDefault();\n              const items = getItems().filter((item) => item.focusable);\n              let candidateNodes = items.map((item) => item.ref.current!);\n\n              if (focusIntent === 'last') candidateNodes.reverse();\n              else if (focusIntent === 'prev' || focusIntent === 'next') {\n                if (focusIntent === 'prev') candidateNodes.reverse();\n                const currentIndex = candidateNodes.indexOf(event.currentTarget);\n                candidateNodes = context.loop\n                  ? wrapArray(candidateNodes, currentIndex + 1)\n                  : candidateNodes.slice(currentIndex + 1);\n              }\n\n              /**\n               * Imperative focus during keydown is risky so we prevent React's batching updates\n               * to avoid potential bugs. See: https://github.com/facebook/react/issues/20332\n               */\n              setTimeout(() => focusFirst(candidateNodes));\n            }\n          })}\n        />\n      </Collection.ItemSlot>\n    );\n  }\n);\n\nRovingFocusGroupItem.displayName = ITEM_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\n// prettier-ignore\nconst MAP_KEY_TO_FOCUS_INTENT: Record<string, FocusIntent> = {\n  ArrowLeft: 'prev', ArrowUp: 'prev',\n  ArrowRight: 'next', ArrowDown: 'next',\n  PageUp: 'first', Home: 'first',\n  PageDown: 'last', End: 'last',\n};\n\nfunction getDirectionAwareKey(key: string, dir?: Direction) {\n  if (dir !== 'rtl') return key;\n  return key === 'ArrowLeft' ? 'ArrowRight' : key === 'ArrowRight' ? 'ArrowLeft' : key;\n}\n\ntype FocusIntent = 'first' | 'last' | 'prev' | 'next';\n\nfunction getFocusIntent(event: React.KeyboardEvent, orientation?: Orientation, dir?: Direction) {\n  const key = getDirectionAwareKey(event.key, dir);\n  if (orientation === 'vertical' && ['ArrowLeft', 'ArrowRight'].includes(key)) return undefined;\n  if (orientation === 'horizontal' && ['ArrowUp', 'ArrowDown'].includes(key)) return undefined;\n  return MAP_KEY_TO_FOCUS_INTENT[key];\n}\n\nfunction focusFirst(candidates: HTMLElement[], preventScroll = false) {\n  const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n  for (const candidate of candidates) {\n    // if focus is already where we want to go, we don't want to keep going through the candidates\n    if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n    candidate.focus({ preventScroll });\n    if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n  }\n}\n\n/**\n * Wraps an array around itself at a given start index\n * Example: `wrapArray(['a', 'b', 'c', 'd'], 2) === ['c', 'd', 'a', 'b']`\n */\nfunction wrapArray<T>(array: T[], startIndex: number) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\n\nconst Root = RovingFocusGroup;\nconst Item = RovingFocusGroupItem;\n\nexport {\n  createRovingFocusGroupScope,\n  //\n  RovingFocusGroup,\n  RovingFocusGroupItem,\n  //\n  Root,\n  Item,\n};\nexport type { RovingFocusGroupProps, RovingFocusItemProps };\n", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/DropdownMenu.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/DropdownMenu.tsx\");\n  import.meta.hot.lastModified = \"1738073419111.3938\";\n}\n// REMIX HMR END\n\nimport * as DropdownMenu from '@radix-ui/react-dropdown-menu';\nimport { forwardRef } from 'react';\nimport { cn } from '~/utils/style';\nconst Arrow = forwardRef(_c = ({\n  className,\n  ...rest\n}, ref) => <DropdownMenu.Arrow ref={ref} className={cn('fill-white dark:fill-zinc-600', className)} {...rest} />);\n_c2 = Arrow;\nArrow.displayName = 'Arrow';\nconst Content = forwardRef(_c3 = ({\n  className,\n  ...rest\n}, ref) => <DropdownMenu.Content ref={ref} className={cn('bg-white', 'dark:bg-zinc-600', 'rounded-md', 'p-1', 'space-y-1', 'shadow-lg', 'dark:shadow-none', 'will-change-[opacity,transform]', 'data-[side=top]:animate-slideDownAndFade', 'data-[side=right]:animate-slideLeftAndFade', 'data-[side=bottom]:animate-slideUpAndFade', 'data-[side=left]:animate-slideRightAndFade', className)} {...rest} />);\n_c4 = Content;\nContent.displayName = 'Content';\nconst Item = forwardRef(_c5 = ({\n  className,\n  ...rest\n}, ref) => <DropdownMenu.Item ref={ref} className={cn('group', 'text-base', 'leading-none', 'text-zinc-800', 'dark:text-zinc-200', 'rounded', 'flex', 'items-center', 'h-6', 'py-6 md:py-5', 'relative', 'px-4', 'select-none', 'outline-none', 'data-[disabled]:text-zinc-600', 'data-[disabled]:cursor-not-allowed', 'dark:data-[disabled]:text-zinc-400', 'data-[highlighted]:bg-orange-500', 'data-[highlighted]:text-white', className)} {...rest} />);\n_c6 = Item;\nItem.displayName = 'Item';\nexport default {\n  ...DropdownMenu,\n  Arrow,\n  Content,\n  Item\n};\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"Arrow$forwardRef\");\n$RefreshReg$(_c2, \"Arrow\");\n$RefreshReg$(_c3, \"Content$forwardRef\");\n$RefreshReg$(_c4, \"Content\");\n$RefreshReg$(_c5, \"Item$forwardRef\");\n$RefreshReg$(_c6, \"Item\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/utils/populateTraceLink.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419125.5488\";\n}\n// REMIX HMR END\n\nexport default function populateTraceLink(\n\tsessionID: string,\n\ttraceLink?: string\n) {\n\tif (!traceLink) return undefined\n\tconst url = new URL(traceLink)\n\n\tconst end = +new Date()\n\tconst start = end - 3600000\n\turl.searchParams.set('start', (start * 1000).toString())\n\turl.searchParams.set('end', (end * 1000).toString())\n\turl.searchParams.set('tags', JSON.stringify({ 'peer.SessionID': sessionID }))\n\n\treturn url.toString()\n}\n", "import * as React from 'react';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport * as DialogPrimitive from '@radix-ui/react-dialog';\nimport { createDialogScope } from '@radix-ui/react-dialog';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { Slottable } from '@radix-ui/react-slot';\n\nimport type { Scope } from '@radix-ui/react-context';\n\n/* -------------------------------------------------------------------------------------------------\n * AlertDialog\n * -----------------------------------------------------------------------------------------------*/\n\nconst ROOT_NAME = 'AlertDialog';\n\ntype ScopedProps<P> = P & { __scopeAlertDialog?: Scope };\nconst [createAlertDialogContext, createAlertDialogScope] = createContextScope(ROOT_NAME, [\n  createDialogScope,\n]);\nconst useDialogScope = createDialogScope();\n\ntype DialogProps = React.ComponentPropsWithoutRef<typeof DialogPrimitive.Root>;\ninterface AlertDialogProps extends Omit<DialogProps, 'modal'> {}\n\nconst AlertDialog: React.FC<AlertDialogProps> = (props: ScopedProps<AlertDialogProps>) => {\n  const { __scopeAlertDialog, ...alertDialogProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return <DialogPrimitive.Root {...dialogScope} {...alertDialogProps} modal={true} />;\n};\n\nAlertDialog.displayName = ROOT_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogTrigger\n * -----------------------------------------------------------------------------------------------*/\nconst TRIGGER_NAME = 'AlertDialogTrigger';\n\ntype AlertDialogTriggerElement = React.ElementRef<typeof DialogPrimitive.Trigger>;\ntype DialogTriggerProps = React.ComponentPropsWithoutRef<typeof DialogPrimitive.Trigger>;\ninterface AlertDialogTriggerProps extends DialogTriggerProps {}\n\nconst AlertDialogTrigger = React.forwardRef<AlertDialogTriggerElement, AlertDialogTriggerProps>(\n  (props: ScopedProps<AlertDialogTriggerProps>, forwardedRef) => {\n    const { __scopeAlertDialog, ...triggerProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return <DialogPrimitive.Trigger {...dialogScope} {...triggerProps} ref={forwardedRef} />;\n  }\n);\n\nAlertDialogTrigger.displayName = TRIGGER_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogPortal\n * -----------------------------------------------------------------------------------------------*/\n\nconst PORTAL_NAME = 'AlertDialogPortal';\n\ntype DialogPortalProps = React.ComponentPropsWithoutRef<typeof DialogPrimitive.Portal>;\ninterface AlertDialogPortalProps extends DialogPortalProps {}\n\nconst AlertDialogPortal: React.FC<AlertDialogPortalProps> = (\n  props: ScopedProps<AlertDialogPortalProps>\n) => {\n  const { __scopeAlertDialog, ...portalProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return <DialogPrimitive.Portal {...dialogScope} {...portalProps} />;\n};\n\nAlertDialogPortal.displayName = PORTAL_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogOverlay\n * -----------------------------------------------------------------------------------------------*/\n\nconst OVERLAY_NAME = 'AlertDialogOverlay';\n\ntype AlertDialogOverlayElement = React.ElementRef<typeof DialogPrimitive.Overlay>;\ntype DialogOverlayProps = React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>;\ninterface AlertDialogOverlayProps extends DialogOverlayProps {}\n\nconst AlertDialogOverlay = React.forwardRef<AlertDialogOverlayElement, AlertDialogOverlayProps>(\n  (props: ScopedProps<AlertDialogOverlayProps>, forwardedRef) => {\n    const { __scopeAlertDialog, ...overlayProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return <DialogPrimitive.Overlay {...dialogScope} {...overlayProps} ref={forwardedRef} />;\n  }\n);\n\nAlertDialogOverlay.displayName = OVERLAY_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogContent\n * -----------------------------------------------------------------------------------------------*/\n\nconst CONTENT_NAME = 'AlertDialogContent';\n\ntype AlertDialogContentContextValue = {\n  cancelRef: React.MutableRefObject<AlertDialogCancelElement | null>;\n};\n\nconst [AlertDialogContentProvider, useAlertDialogContentContext] =\n  createAlertDialogContext<AlertDialogContentContextValue>(CONTENT_NAME);\n\ntype AlertDialogContentElement = React.ElementRef<typeof DialogPrimitive.Content>;\ntype DialogContentProps = React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>;\ninterface AlertDialogContentProps\n  extends Omit<DialogContentProps, 'onPointerDownOutside' | 'onInteractOutside'> {}\n\nconst AlertDialogContent = React.forwardRef<AlertDialogContentElement, AlertDialogContentProps>(\n  (props: ScopedProps<AlertDialogContentProps>, forwardedRef) => {\n    const { __scopeAlertDialog, children, ...contentProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    const contentRef = React.useRef<AlertDialogContentElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, contentRef);\n    const cancelRef = React.useRef<AlertDialogCancelElement | null>(null);\n\n    return (\n      <DialogPrimitive.WarningProvider\n        contentName={CONTENT_NAME}\n        titleName={TITLE_NAME}\n        docsSlug=\"alert-dialog\"\n      >\n        <AlertDialogContentProvider scope={__scopeAlertDialog} cancelRef={cancelRef}>\n          <DialogPrimitive.Content\n            role=\"alertdialog\"\n            {...dialogScope}\n            {...contentProps}\n            ref={composedRefs}\n            onOpenAutoFocus={composeEventHandlers(contentProps.onOpenAutoFocus, (event) => {\n              event.preventDefault();\n              cancelRef.current?.focus({ preventScroll: true });\n            })}\n            onPointerDownOutside={(event) => event.preventDefault()}\n            onInteractOutside={(event) => event.preventDefault()}\n          >\n            {/**\n             * We have to use `Slottable` here as we cannot wrap the `AlertDialogContentProvider`\n             * around everything, otherwise the `DescriptionWarning` would be rendered straight away.\n             * This is because we want the accessibility checks to run only once the content is actually\n             * open and that behaviour is already encapsulated in `DialogContent`.\n             */}\n            <Slottable>{children}</Slottable>\n            {process.env.NODE_ENV === 'development' && (\n              <DescriptionWarning contentRef={contentRef} />\n            )}\n          </DialogPrimitive.Content>\n        </AlertDialogContentProvider>\n      </DialogPrimitive.WarningProvider>\n    );\n  }\n);\n\nAlertDialogContent.displayName = CONTENT_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogTitle\n * -----------------------------------------------------------------------------------------------*/\n\nconst TITLE_NAME = 'AlertDialogTitle';\n\ntype AlertDialogTitleElement = React.ElementRef<typeof DialogPrimitive.Title>;\ntype DialogTitleProps = React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>;\ninterface AlertDialogTitleProps extends DialogTitleProps {}\n\nconst AlertDialogTitle = React.forwardRef<AlertDialogTitleElement, AlertDialogTitleProps>(\n  (props: ScopedProps<AlertDialogTitleProps>, forwardedRef) => {\n    const { __scopeAlertDialog, ...titleProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return <DialogPrimitive.Title {...dialogScope} {...titleProps} ref={forwardedRef} />;\n  }\n);\n\nAlertDialogTitle.displayName = TITLE_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogDescription\n * -----------------------------------------------------------------------------------------------*/\n\nconst DESCRIPTION_NAME = 'AlertDialogDescription';\n\ntype AlertDialogDescriptionElement = React.ElementRef<typeof DialogPrimitive.Description>;\ntype DialogDescriptionProps = React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>;\ninterface AlertDialogDescriptionProps extends DialogDescriptionProps {}\n\nconst AlertDialogDescription = React.forwardRef<\n  AlertDialogDescriptionElement,\n  AlertDialogDescriptionProps\n>((props: ScopedProps<AlertDialogDescriptionProps>, forwardedRef) => {\n  const { __scopeAlertDialog, ...descriptionProps } = props;\n  const dialogScope = useDialogScope(__scopeAlertDialog);\n  return <DialogPrimitive.Description {...dialogScope} {...descriptionProps} ref={forwardedRef} />;\n});\n\nAlertDialogDescription.displayName = DESCRIPTION_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogAction\n * -----------------------------------------------------------------------------------------------*/\n\nconst ACTION_NAME = 'AlertDialogAction';\n\ntype AlertDialogActionElement = React.ElementRef<typeof DialogPrimitive.Close>;\ntype DialogCloseProps = React.ComponentPropsWithoutRef<typeof DialogPrimitive.Close>;\ninterface AlertDialogActionProps extends DialogCloseProps {}\n\nconst AlertDialogAction = React.forwardRef<AlertDialogActionElement, AlertDialogActionProps>(\n  (props: ScopedProps<AlertDialogActionProps>, forwardedRef) => {\n    const { __scopeAlertDialog, ...actionProps } = props;\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    return <DialogPrimitive.Close {...dialogScope} {...actionProps} ref={forwardedRef} />;\n  }\n);\n\nAlertDialogAction.displayName = ACTION_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * AlertDialogCancel\n * -----------------------------------------------------------------------------------------------*/\n\nconst CANCEL_NAME = 'AlertDialogCancel';\n\ntype AlertDialogCancelElement = React.ElementRef<typeof DialogPrimitive.Close>;\ninterface AlertDialogCancelProps extends DialogCloseProps {}\n\nconst AlertDialogCancel = React.forwardRef<AlertDialogCancelElement, AlertDialogCancelProps>(\n  (props: ScopedProps<AlertDialogCancelProps>, forwardedRef) => {\n    const { __scopeAlertDialog, ...cancelProps } = props;\n    const { cancelRef } = useAlertDialogContentContext(CANCEL_NAME, __scopeAlertDialog);\n    const dialogScope = useDialogScope(__scopeAlertDialog);\n    const ref = useComposedRefs(forwardedRef, cancelRef);\n    return <DialogPrimitive.Close {...dialogScope} {...cancelProps} ref={ref} />;\n  }\n);\n\nAlertDialogCancel.displayName = CANCEL_NAME;\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype DescriptionWarningProps = {\n  contentRef: React.RefObject<AlertDialogContentElement | null>;\n};\n\nconst DescriptionWarning: React.FC<DescriptionWarningProps> = ({ contentRef }) => {\n  const MESSAGE = `\\`${CONTENT_NAME}\\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \\`${CONTENT_NAME}\\` by passing a \\`${DESCRIPTION_NAME}\\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \\`id\\` and passing the same value to the \\`aria-describedby\\` prop in \\`${CONTENT_NAME}\\`. If the description is confusing or duplicative for sighted users, you can use the \\`@radix-ui/react-visually-hidden\\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;\n\n  React.useEffect(() => {\n    const hasDescription = document.getElementById(\n      contentRef.current?.getAttribute('aria-describedby')!\n    );\n    if (!hasDescription) console.warn(MESSAGE);\n  }, [MESSAGE, contentRef]);\n\n  return null;\n};\n\nconst Root = AlertDialog;\nconst Trigger = AlertDialogTrigger;\nconst Portal = AlertDialogPortal;\nconst Overlay = AlertDialogOverlay;\nconst Content = AlertDialogContent;\nconst Action = AlertDialogAction;\nconst Cancel = AlertDialogCancel;\nconst Title = AlertDialogTitle;\nconst Description = AlertDialogDescription;\n\nexport {\n  createAlertDialogScope,\n  //\n  AlertDialog,\n  AlertDialogTrigger,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogContent,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  //\n  Root,\n  Trigger,\n  Portal,\n  Overlay,\n  Content,\n  Action,\n  Cancel,\n  Title,\n  Description,\n};\nexport type {\n  AlertDialogProps,\n  AlertDialogTriggerProps,\n  AlertDialogPortalProps,\n  AlertDialogOverlayProps,\n  AlertDialogContentProps,\n  AlertDialogActionProps,\n  AlertDialogCancelProps,\n  AlertDialogTitleProps,\n  AlertDialogDescriptionProps,\n};\n", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/AlertDialog.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/AlertDialog.tsx\");\n  import.meta.hot.lastModified = \"1738073419110.3489\";\n}\n// REMIX HMR END\n\nimport * as AlertDialog from '@radix-ui/react-alert-dialog';\nimport { forwardRef } from 'react';\nimport { cn } from '~/utils/style';\nexport const Overlay = forwardRef(_c = ({\n  className,\n  ...rest\n}, ref) => <AlertDialog.Overlay ref={ref} className={cn('fixed inset-0 bg-black opacity-40', className)} {...rest} />);\n_c2 = Overlay;\nOverlay.displayName = 'Overlay';\nexport const Content = forwardRef(_c3 = ({\n  className: _className,\n  children,\n  ...rest\n}, ref) => <AlertDialog.Content ref={ref} className={cn('fixed', 'rounded-lg', 'top-1/2', 'left-1/2', '-translate-x-1/2', '-translate-y-1/2', 'min-w-[min(400px,95vw)]', 'max-w-[95vw]', 'max-h-[85vh]', 'overflow-y-auto', 'p-6', 'bg-inherit', 'shadow-xl', 'dark:shadow-none')} {...rest}>\n\t\t{children}\n\t</AlertDialog.Content>);\n_c4 = Content;\nContent.displayName = 'Content';\nconst Title = forwardRef(_c5 = ({\n  className,\n  ...rest\n}, ref) => <AlertDialog.Title ref={ref} className={cn('text-zinc-800 dark:text-zinc-200 m-0 text-base font-medium', className)} {...rest} />);\n_c6 = Title;\nTitle.displayName = 'Title';\nconst Description = forwardRef(_c7 = ({\n  className,\n  ...rest\n}, ref) => <AlertDialog.Description ref={ref} className={cn('text-zinc-500 dark:text-zinc-400 mt-4 mb-5 text-sm leading-normal', className)} {...rest} />);\n_c8 = Description;\nDescription.displayName = 'Description';\nconst Actions = ({\n  children,\n  className\n}) => {\n  return <div className={cn('flex justify-end gap-4', className)}>{children}</div>;\n};\n_c9 = Actions;\nexport default {\n  ...AlertDialog,\n  Overlay,\n  Content,\n  Title,\n  Description,\n  Actions\n};\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n$RefreshReg$(_c, \"Overlay$forwardRef\");\n$RefreshReg$(_c2, \"Overlay\");\n$RefreshReg$(_c3, \"Content$forwardRef\");\n$RefreshReg$(_c4, \"Content\");\n$RefreshReg$(_c5, \"Title$forwardRef\");\n$RefreshReg$(_c6, \"Title\");\n$RefreshReg$(_c7, \"Description$forwardRef\");\n$RefreshReg$(_c8, \"Description\");\n$RefreshReg$(_c9, \"Actions\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/MuteUserButton.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/MuteUserButton.tsx\");\n  import.meta.hot.lastModified = \"1738073419112.736\";\n}\n// REMIX HMR END\n\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\nimport { useRoomContext } from '~/hooks/useRoomContext';\nimport { useUserMetadata } from '~/hooks/useUserMetadata';\nimport AlertDialog from './AlertDialog';\nimport { Button } from './Button';\nimport { Icon } from './Icon/Icon';\nimport { Tooltip } from './Tooltip';\nexport const MuteUserButton = ({\n  user,\n  displayType = 'secondary',\n  mutedDisplayType = 'danger'\n}) => {\n  _s();\n  const {\n    room\n  } = useRoomContext();\n  const {\n    data\n  } = useUserMetadata(user.name);\n  if (user.tracks.audioUnavailable) {\n    return <Tooltip content=\"Mic is unavailable. User cannot unmute.\">\n\t\t\t\t<Button disabled displayType=\"secondary\">\n\t\t\t\t\t<Icon type=\"micOff\" className=\"text-red-700 dark:text-red-400\" />\n\t\t\t\t\t<VisuallyHidden>\n\t\t\t\t\t\tUser's mic is unavailable, cannot unmute.\n\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t</Button>\n\t\t\t</Tooltip>;\n  }\n  return <AlertDialog.Root>\n\t\t\t{user.tracks.audioEnabled ? <Tooltip content={`Mute ${data?.displayName}`}>\n\t\t\t\t\t<AlertDialog.Trigger asChild>\n\t\t\t\t\t\t<Button displayType={displayType} disabled={!user.tracks.audioEnabled}>\n\t\t\t\t\t\t\t<Icon type=\"micOn\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</AlertDialog.Trigger>\n\t\t\t\t</Tooltip> : <Tooltip content=\"Cannot unmute\">\n\t\t\t\t\t<Button displayType={mutedDisplayType} disabled>\n\t\t\t\t\t\t<Icon type=\"micOff\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</Tooltip>}\n\n\t\t\t<AlertDialog.Portal>\n\t\t\t\t<AlertDialog.Overlay />\n\t\t\t\t<AlertDialog.Content\n      // If we don't prevent the alert from restoring focus the tooltip\n      // will continue to show when we don't want it to.\n      onCloseAutoFocus={e => e.preventDefault()}>\n\t\t\t\t\t<AlertDialog.Title>Mute {data?.displayName}</AlertDialog.Title>\n\t\t\t\t\t<AlertDialog.Description>\n\t\t\t\t\t\tThey will need to unmute themselves to be heard again.\n\t\t\t\t\t</AlertDialog.Description>\n\t\t\t\t\t<AlertDialog.Actions>\n\t\t\t\t\t\t<AlertDialog.Cancel asChild>\n\t\t\t\t\t\t\t<Button className=\"text-sm\" displayType=\"secondary\">\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</AlertDialog.Cancel>\n\t\t\t\t\t\t<AlertDialog.Action asChild>\n\t\t\t\t\t\t\t<Button onClick={() => {\n              room.websocket.send(JSON.stringify({\n                type: 'muteUser',\n                id: user.id\n              }));\n            }} className=\"text-sm\" displayType=\"danger\">\n\t\t\t\t\t\t\t\tMute\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</AlertDialog.Action>\n\t\t\t\t\t</AlertDialog.Actions>\n\t\t\t\t</AlertDialog.Content>\n\t\t\t</AlertDialog.Portal>\n\t\t</AlertDialog.Root>;\n};\n_s(MuteUserButton, \"Huxc+ViWRWeyT/WEbdbWjG8TD7w=\", false, function () {\n  return [useRoomContext, useUserMetadata];\n});\n_c = MuteUserButton;\nvar _c;\n$RefreshReg$(_c, \"MuteUserButton\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/OptionalLink.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/OptionalLink.tsx\");\n  import.meta.hot.lastModified = \"1738073419112.8145\";\n}\n// REMIX HMR END\n\nimport { cn } from '~/utils/style';\nexport function OptionalLink({\n  children,\n  className,\n  href,\n  ...rest\n}) {\n  if (href === undefined) {\n    return <span className={className}>{children}</span>;\n  }\n  return <a href={href} className={cn('no-underline hover:underline', className)} {...rest}>\n\t\t\t{children}\n\t\t</a>;\n}\n_c = OptionalLink;\nvar _c;\n$RefreshReg$(_c, \"OptionalLink\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/ParticipantsMenu.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/ParticipantsMenu.tsx\");\n  import.meta.hot.lastModified = \"1738073419113.3616\";\n}\n// REMIX HMR END\n\nimport { useRoomContext } from '~/hooks/useRoomContext';\nimport { useUserMetadata } from '~/hooks/useUserMetadata';\nimport populateTraceLink from '~/utils/populateTraceLink';\nimport { cn } from '~/utils/style';\nimport { AudioIndicator } from './AudioIndicator';\nimport { Button } from './Button';\nimport { Dialog, DialogContent, DialogOverlay, Portal, Trigger } from './Dialog';\nimport { Icon } from './Icon/Icon';\nimport { MuteUserButton } from './MuteUserButton';\nimport { OptionalLink } from './OptionalLink';\nimport { usePulledAudioTrack } from './PullAudioTracks';\nimport { Tooltip } from './Tooltip';\nconst UserListItem = ({\n  user,\n  audioTrack\n}) => {\n  _s();\n  const {\n    traceLink\n  } = useRoomContext();\n  const {\n    data\n  } = useUserMetadata(user.name);\n  return <li className=\"flex items-center gap-4 text-base h-9\">\n\t\t\t<div className=\"mr-auto overflow-hidden whitespace-nowrap text-ellipsis\">\n\t\t\t\t<OptionalLink href={user.transceiverSessionId ? populateTraceLink(user.transceiverSessionId, traceLink) : undefined} target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\t{data?.displayName}\n\t\t\t\t</OptionalLink>\n\t\t\t</div>\n\t\t\t{audioTrack && user.tracks.audioEnabled && <div className=\"px-5\">\n\t\t\t\t\t<AudioIndicator audioTrack={audioTrack} />\n\t\t\t\t</div>}\n\t\t\t<MuteUserButton user={user} />\n\t\t</li>;\n};\n_s(UserListItem, \"9Q/NPvAI5LaMd8Nz/PsChtpCCmc=\", false, function () {\n  return [useRoomContext, useUserMetadata];\n});\n_c = UserListItem;\nconst OtherUser = ({\n  user\n}) => {\n  _s2();\n  const audioTrack = usePulledAudioTrack(user.tracks.audio);\n  return <UserListItem user={user} audioTrack={audioTrack}></UserListItem>;\n};\n_s2(OtherUser, \"/n3JAqIzuAb8VZjtuh9Jo33nezY=\", false, function () {\n  return [usePulledAudioTrack];\n});\n_c2 = OtherUser;\nexport const participantCount = count => `${count} Participant${count > 1 ? 's' : ''}`;\nexport const ParticipantsButton = ({\n  className,\n  ...rest\n}) => {\n  _s3();\n  const {\n    room: {\n      otherUsers\n    }\n  } = useRoomContext();\n  return <ParticipantsDialog {...rest}>\n\t\t\t<Tooltip content={participantCount(otherUsers.length + 1)}>\n\t\t\t\t<Trigger asChild>\n\t\t\t\t\t<Button className={cn('relative', className)} displayType=\"secondary\">\n\t\t\t\t\t\t<Icon type=\"userGroup\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</Trigger>\n\t\t\t</Tooltip>\n\t\t</ParticipantsDialog>;\n};\n_s3(ParticipantsButton, \"jXS23yfDln+RpYgvIFRILljo7nM=\", false, function () {\n  return [useRoomContext];\n});\n_c3 = ParticipantsButton;\nexport const ParticipantsDialog = ({\n  children,\n  otherUsers,\n  identity,\n  open,\n  onOpenChange\n}) => {\n  _s4();\n  const {\n    userMedia\n  } = useRoomContext();\n  return <Dialog open={open} onOpenChange={onOpenChange}>\n\t\t\t{children}\n\n\t\t\t<Portal>\n\t\t\t\t<DialogOverlay />\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t<h2 className=\"text-xl font-bold\">\n\t\t\t\t\t\t\t{participantCount(otherUsers.length + 1)}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<ul className=\"space-y-2\">\n\t\t\t\t\t\t\t{identity && <UserListItem user={identity} audioTrack={userMedia.audioStreamTrack}>\n\t\t\t\t\t\t\t\t\t{identity.name}\n\t\t\t\t\t\t\t\t</UserListItem>}\n\t\t\t\t\t\t\t{otherUsers.map(u => <OtherUser user={u} key={u.id} />)}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</DialogContent>\n\t\t\t</Portal>\n\t\t</Dialog>;\n};\n_s4(ParticipantsDialog, \"7lE0qpw/cqR15oBMizxgyG4BIvw=\", false, function () {\n  return [useRoomContext];\n});\n_c4 = ParticipantsDialog;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"UserListItem\");\n$RefreshReg$(_c2, \"OtherUser\");\n$RefreshReg$(_c3, \"ParticipantsButton\");\n$RefreshReg$(_c4, \"ParticipantsDialog\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/hooks/useCopyToClipboard.tsx\"\n);\nimport.meta.hot.lastModified = \"1738073419116.2925\";\n}\n// REMIX HMR END\n\nimport { useCallback, useEffect, useRef, useState } from 'react'\n\nexport default function useCopyToClipboard(delay = 2000) {\n\tconst [copied, setCopied] = useState(false)\n\tconst timeoutRef = useRef(-1)\n\n\tconst copy = useCallback(\n\t\t(value: string) => {\n\t\t\tnavigator.clipboard.writeText(value)\n\t\t\tsetCopied(true)\n\t\t\tclearTimeout(timeoutRef.current)\n\t\t\ttimeoutRef.current = window.setTimeout(() => {\n\t\t\t\tsetCopied(false)\n\t\t\t}, delay)\n\t\t},\n\t\t[delay]\n\t)\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tclearTimeout(timeoutRef.current)\n\t\t}\n\t}, [])\n\n\treturn [copied, copy] as const\n}\n", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/TextArea.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/TextArea.tsx\");\n  import.meta.hot.lastModified = \"1738073419115.0684\";\n}\n// REMIX HMR END\n\nimport { forwardRef } from 'react';\nimport { cn } from '~/utils/style';\nexport const TextArea = forwardRef(_c = ({\n  className,\n  ...rest\n}, ref) => <textarea ref={ref} className={cn('bg-zinc-50 dark:bg-zinc-600 text-base border-2 border-zinc-500 w-full resize-none block p-2 rounded', className)} {...rest} />);\n_c2 = TextArea;\nTextArea.displayName = 'TextArea';\nvar _c, _c2;\n$RefreshReg$(_c, \"TextArea$forwardRef\");\n$RefreshReg$(_c2, \"TextArea\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/ReportBugDialog.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/ReportBugDialog.tsx\");\n  import.meta.hot.lastModified = \"1738073419114.5461\";\n}\n// REMIX HMR END\n\nimport { useFetcher, useParams } from '@remix-run/react';\nimport useCopyToClipboard from '~/hooks/useCopyToClipboard';\nimport { useRoomContext } from '~/hooks/useRoomContext';\nimport { Button } from './Button';\nimport { Description, Dialog, DialogContent, DialogOverlay, DialogTitle, Portal } from './Dialog';\nimport { Label } from './Label';\nimport { TextArea } from './TextArea';\nexport const ReportBugDialog = ({\n  onOpenChange\n}) => {\n  return <Dialog open onOpenChange={onOpenChange}>\n\t\t\t<Portal>\n\t\t\t\t<DialogOverlay />\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<ReportBugForm />\n\t\t\t\t</DialogContent>\n\t\t\t</Portal>\n\t\t</Dialog>;\n};\n_c = ReportBugDialog;\nconst ReportBugForm = () => {\n  _s();\n  const {\n    Form,\n    data,\n    state\n  } = useFetcher();\n  const {\n    room,\n    roomHistory\n  } = useRoomContext();\n  const {\n    roomName\n  } = useParams();\n  const {\n    identity\n  } = room;\n  const info = {\n    roomName,\n    identity,\n    roomHistory,\n    url: typeof location !== 'undefined' ? location.href : undefined\n  };\n  const [copied, copy] = useCopyToClipboard();\n  const infoString = JSON.stringify(info, null, 2);\n  return data ? <div className=\"space-y-4\">\n\t\t\t<DialogTitle>Thank you!</DialogTitle>\n\t\t\t<Description>Your report has been submitted!</Description>\n\t\t</div> : <div className=\"space-y-4\">\n\t\t\t<DialogTitle>Report a bug</DialogTitle>\n\t\t\t<Description>\n\t\t\t\tThe Calls team will be notified with tracing details.\n\t\t\t</Description>\n\t\t\t<details className=\"cursor-pointer\">\n\t\t\t\t<summary className=\"text-sm text-zinc-500 dark:text-zinc-400\">\n\t\t\t\t\tDebug Info (included automatically)\n\t\t\t\t</summary>\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t{/* Empty div so the button gets padding top from stack */}\n\t\t\t\t\t<div></div>\n\t\t\t\t\t<Button className=\"text-sm\" onClick={() => {\n          copy(infoString);\n        }}>\n\t\t\t\t\t\t{copied ? 'Copied!' : 'Copy'}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<TextArea rows={10} readOnly defaultValue={infoString}></TextArea>\n\t\t\t\t</div>\n\t\t\t</details>\n\n\t\t\t<Form method=\"post\" action=\"/api/bugReport\">\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t<Label className=\"font-bold\">Description</Label>\n\t\t\t\t\t<TextArea name=\"description\" rows={8}></TextArea>\n\t\t\t\t</div>\n\t\t\t\t<input name=\"info\" type=\"hidden\" value={JSON.stringify(info)} />\n\t\t\t\t<Button className=\"mt-4 text-sm\" type=\"submit\" disabled={state === 'submitting'}>\n\t\t\t\t\t{state === 'submitting' ? 'Submitting...' : 'Submit'}\n\t\t\t\t</Button>\n\t\t\t</Form>\n\t\t</div>;\n};\n_s(ReportBugForm, \"tuW1TGxmCThFK9HthDP9WMiSs3E=\", false, function () {\n  return [useFetcher, useRoomContext, useParams, useCopyToClipboard];\n});\n_c2 = ReportBugForm;\nvar _c, _c2;\n$RefreshReg$(_c, \"ReportBugDialog\");\n$RefreshReg$(_c2, \"ReportBugForm\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/ParticipantLayout.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/ParticipantLayout.tsx\");\n  import.meta.hot.lastModified = \"1738073419113.1226\";\n}\n// REMIX HMR END\n\nimport { useId, useMemo } from 'react';\nimport { Flipper } from 'react-flip-toolkit';\nimport useMeasure from 'react-use/lib/useMeasure';\nimport { calculateLayout } from '~/utils/calculateLayout';\nimport { Participant } from './Participant';\nexport function ParticipantLayout(props) {\n  _s();\n  const [containerRef, {\n    width: containerWidth,\n    height: containerHeight\n  }] = useMeasure();\n  const [firstFlexChildRef, {\n    width: firstFlexChildWidth\n  }] = useMeasure();\n  const flexContainerWidth = useMemo(() => 100 / calculateLayout({\n    count: props.users.length,\n    height: containerHeight,\n    width: containerWidth\n  }).cols + '%', [containerHeight, containerWidth, props.users.length]);\n  const id = useId();\n  if (props.users.length === 0) {\n    return null;\n  }\n  return <Flipper flipKey={id + props.users.length}>\n\t\t\t<div className=\"absolute inset-0 h-full w-full isolate flex flex-wrap justify-around gap-[--gap]\" style={{\n      // the flex basis that is needed to achieve row layout\n      '--flex-container-width': flexContainerWidth,\n      // the size of the first user's flex container\n      '--participant-max-width': firstFlexChildWidth + 'px'\n    }} ref={containerRef}>\n\t\t\t\t{props.users.map((user, i) => <Participant key={user.id} user={user} ref={i === 0 ? firstFlexChildRef : undefined} />)}\n\t\t\t</div>\n\t\t</Flipper>;\n}\n_s(ParticipantLayout, \"xKuBpJwsfDPy762eNhd2UD0j75c=\", false, function () {\n  return [useMeasure, useMeasure, useId];\n});\n_c = ParticipantLayout;\nvar _c;\n$RefreshReg$(_c, \"ParticipantLayout\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "/*! @license Rematrix v0.2.2\n\n\tCopyright 2018 Fisssion LLC.\n\n\tPermission is hereby granted, free of charge, to any person obtaining a copy\n\tof this software and associated documentation files (the \"Software\"), to deal\n\tin the Software without restriction, including without limitation the rights\n\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\tcopies of the Software, and to permit persons to whom the Software is\n\tfurnished to do so, subject to the following conditions:\n\n\tThe above copyright notice and this permission notice shall be included in\n\tall copies or substantial portions of the Software.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n\tTHE SOFTWARE.\n*/\n/**\n * @module Rematrix\n */\n\n/**\n * Transformation matrices in the browser come in two flavors:\n *\n *  - `matrix` using 6 values (short)\n *  - `matrix3d` using 16 values (long)\n *\n * This utility follows this [conversion guide](https://goo.gl/EJlUQ1)\n * to expand short form matrices to their equivalent long form.\n *\n * @param  {array} source - Accepts both short and long form matrices.\n * @return {array}\n */\nfunction format(source) {\n\tif (source.constructor !== Array) {\n\t\tthrow new TypeError('Expected array.')\n\t}\n\tif (source.length === 16) {\n\t\treturn source\n\t}\n\tif (source.length === 6) {\n\t\tvar matrix = identity();\n\t\tmatrix[0] = source[0];\n\t\tmatrix[1] = source[1];\n\t\tmatrix[4] = source[2];\n\t\tmatrix[5] = source[3];\n\t\tmatrix[12] = source[4];\n\t\tmatrix[13] = source[5];\n\t\treturn matrix\n\t}\n\tthrow new RangeError('Expected array with either 6 or 16 values.')\n}\n\n/**\n * Returns a matrix representing no transformation. The product of any matrix\n * multiplied by the identity matrix will be the original matrix.\n *\n * > **Tip:** Similar to how `5 * 1 === 5`, where `1` is the identity.\n *\n * @return {array}\n */\nfunction identity() {\n\tvar matrix = [];\n\tfor (var i = 0; i < 16; i++) {\n\t\ti % 5 == 0 ? matrix.push(1) : matrix.push(0);\n\t}\n\treturn matrix\n}\n\n/**\n * Returns a matrix describing the inverse transformation of the source\n * matrix. The product of any matrix multiplied by its inverse will be the\n * identity matrix.\n *\n * > **Tip:** Similar to how `5 * (1/5) === 1`, where `1/5` is the inverse.\n *\n * @param  {array} source - Accepts both short and long form matrices.\n * @return {array}\n */\nfunction inverse(source) {\n\tvar m = format(source);\n\n\tvar s0 = m[0] * m[5] - m[4] * m[1];\n\tvar s1 = m[0] * m[6] - m[4] * m[2];\n\tvar s2 = m[0] * m[7] - m[4] * m[3];\n\tvar s3 = m[1] * m[6] - m[5] * m[2];\n\tvar s4 = m[1] * m[7] - m[5] * m[3];\n\tvar s5 = m[2] * m[7] - m[6] * m[3];\n\n\tvar c5 = m[10] * m[15] - m[14] * m[11];\n\tvar c4 = m[9] * m[15] - m[13] * m[11];\n\tvar c3 = m[9] * m[14] - m[13] * m[10];\n\tvar c2 = m[8] * m[15] - m[12] * m[11];\n\tvar c1 = m[8] * m[14] - m[12] * m[10];\n\tvar c0 = m[8] * m[13] - m[12] * m[9];\n\n\tvar determinant = 1 / (s0 * c5 - s1 * c4 + s2 * c3 + s3 * c2 - s4 * c1 + s5 * c0);\n\n\tif (isNaN(determinant) || determinant === Infinity) {\n\t\tthrow new Error('Inverse determinant attempted to divide by zero.')\n\t}\n\n\treturn [\n\t\t(m[5] * c5 - m[6] * c4 + m[7] * c3) * determinant,\n\t\t(-m[1] * c5 + m[2] * c4 - m[3] * c3) * determinant,\n\t\t(m[13] * s5 - m[14] * s4 + m[15] * s3) * determinant,\n\t\t(-m[9] * s5 + m[10] * s4 - m[11] * s3) * determinant,\n\n\t\t(-m[4] * c5 + m[6] * c2 - m[7] * c1) * determinant,\n\t\t(m[0] * c5 - m[2] * c2 + m[3] * c1) * determinant,\n\t\t(-m[12] * s5 + m[14] * s2 - m[15] * s1) * determinant,\n\t\t(m[8] * s5 - m[10] * s2 + m[11] * s1) * determinant,\n\n\t\t(m[4] * c4 - m[5] * c2 + m[7] * c0) * determinant,\n\t\t(-m[0] * c4 + m[1] * c2 - m[3] * c0) * determinant,\n\t\t(m[12] * s4 - m[13] * s2 + m[15] * s0) * determinant,\n\t\t(-m[8] * s4 + m[9] * s2 - m[11] * s0) * determinant,\n\n\t\t(-m[4] * c3 + m[5] * c1 - m[6] * c0) * determinant,\n\t\t(m[0] * c3 - m[1] * c1 + m[2] * c0) * determinant,\n\t\t(-m[12] * s3 + m[13] * s1 - m[14] * s0) * determinant,\n\t\t(m[8] * s3 - m[9] * s1 + m[10] * s0) * determinant\n\t]\n}\n\n/**\n * Returns a 4x4 matrix describing the combined transformations\n * of both arguments.\n *\n * > **Note:** Order is very important. For example, rotating 45\u00B0\n * along the Z-axis, followed by translating 500 pixels along the\n * Y-axis... is not the same as translating 500 pixels along the\n * Y-axis, followed by rotating 45\u00B0 along on the Z-axis.\n *\n * @param  {array} m - Accepts both short and long form matrices.\n * @param  {array} x - Accepts both short and long form matrices.\n * @return {array}\n */\nfunction multiply(m, x) {\n\tvar fm = format(m);\n\tvar fx = format(x);\n\tvar product = [];\n\n\tfor (var i = 0; i < 4; i++) {\n\t\tvar row = [fm[i], fm[i + 4], fm[i + 8], fm[i + 12]];\n\t\tfor (var j = 0; j < 4; j++) {\n\t\t\tvar k = j * 4;\n\t\t\tvar col = [fx[k], fx[k + 1], fx[k + 2], fx[k + 3]];\n\t\t\tvar result =\n\t\t\t\trow[0] * col[0] + row[1] * col[1] + row[2] * col[2] + row[3] * col[3];\n\n\t\t\tproduct[i + k] = result;\n\t\t}\n\t}\n\n\treturn product\n}\n\n/**\n * Attempts to return a 4x4 matrix describing the CSS transform\n * matrix passed in, but will return the identity matrix as a\n * fallback.\n *\n * **Tip:** In virtually all cases, this method is used to convert\n * a CSS matrix (retrieved as a `string` from computed styles) to\n * its equivalent array format.\n *\n * @param  {string} source - String containing a valid CSS `matrix` or `matrix3d` property.\n * @return {array}\n */\nfunction parse(source) {\n\tif (typeof source === 'string') {\n\t\tvar match = source.match(/matrix(3d)?\\(([^)]+)\\)/);\n\t\tif (match) {\n\t\t\tvar raw = match[2].split(', ').map(parseFloat);\n\t\t\treturn format(raw)\n\t\t}\n\t}\n\treturn identity()\n}\n\n/**\n * Returns a 4x4 matrix describing Z-axis rotation.\n *\n * @param  {number} angle - Measured in degrees.\n * @return {array}\n */\nfunction rotate(angle) {\n\treturn rotateZ(angle)\n}\n\n/**\n * Returns a 4x4 matrix describing X-axis rotation.\n *\n * @param  {number} angle - Measured in degrees.\n * @return {array}\n */\nfunction rotateX(angle) {\n\tvar theta = Math.PI / 180 * angle;\n\tvar matrix = identity();\n\n\tmatrix[5] = matrix[10] = Math.cos(theta);\n\tmatrix[6] = matrix[9] = Math.sin(theta);\n\tmatrix[9] *= -1;\n\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing Y-axis rotation.\n *\n * @param  {number} angle - Measured in degrees.\n * @return {array}\n */\nfunction rotateY(angle) {\n\tvar theta = Math.PI / 180 * angle;\n\tvar matrix = identity();\n\n\tmatrix[0] = matrix[10] = Math.cos(theta);\n\tmatrix[2] = matrix[8] = Math.sin(theta);\n\tmatrix[2] *= -1;\n\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing Z-axis rotation.\n *\n * @param  {number} angle - Measured in degrees.\n * @return {array}\n */\nfunction rotateZ(angle) {\n\tvar theta = Math.PI / 180 * angle;\n\tvar matrix = identity();\n\n\tmatrix[0] = matrix[5] = Math.cos(theta);\n\tmatrix[1] = matrix[4] = Math.sin(theta);\n\tmatrix[4] *= -1;\n\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing 2D scaling. The first argument\n * is used for both X and Y-axis scaling, unless an optional\n * second argument is provided to explicitly define Y-axis scaling.\n *\n * @param  {number} scalar    - Decimal multiplier.\n * @param  {number} [scalarY] - Decimal multiplier.\n * @return {array}\n */\nfunction scale(scalar, scalarY) {\n\tvar matrix = identity();\n\n\tmatrix[0] = scalar;\n\tmatrix[5] = typeof scalarY === 'number' ? scalarY : scalar;\n\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing X-axis scaling.\n *\n * @param  {number} scalar - Decimal multiplier.\n * @return {array}\n */\nfunction scaleX(scalar) {\n\tvar matrix = identity();\n\tmatrix[0] = scalar;\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing Y-axis scaling.\n *\n * @param  {number} scalar - Decimal multiplier.\n * @return {array}\n */\nfunction scaleY(scalar) {\n\tvar matrix = identity();\n\tmatrix[5] = scalar;\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing Z-axis scaling.\n *\n * @param  {number} scalar - Decimal multiplier.\n * @return {array}\n */\nfunction scaleZ(scalar) {\n\tvar matrix = identity();\n\tmatrix[10] = scalar;\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing shear. The first argument\n * defines X-axis shearing, and an optional second argument\n * defines Y-axis shearing.\n *\n * @param  {number} angleX   - Measured in degrees.\n * @param  {number} [angleY] - Measured in degrees.\n * @return {array}\n */\nfunction skew(angleX, angleY) {\n\tvar thetaX = Math.PI / 180 * angleX;\n\tvar matrix = identity();\n\n\tmatrix[4] = Math.tan(thetaX);\n\n\tif (angleY) {\n\t\tvar thetaY = Math.PI / 180 * angleY;\n\t\tmatrix[1] = Math.tan(thetaY);\n\t}\n\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing X-axis shear.\n *\n * @param  {number} angle - Measured in degrees.\n * @return {array}\n */\nfunction skewX(angle) {\n\tvar theta = Math.PI / 180 * angle;\n\tvar matrix = identity();\n\n\tmatrix[4] = Math.tan(theta);\n\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing Y-axis shear.\n *\n * @param  {number} angle - Measured in degrees\n * @return {array}\n */\nfunction skewY(angle) {\n\tvar theta = Math.PI / 180 * angle;\n\tvar matrix = identity();\n\n\tmatrix[1] = Math.tan(theta);\n\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing 2D translation. The first\n * argument defines X-axis translation, and an optional second\n * argument defines Y-axis translation.\n *\n * @param  {number} distanceX   - Measured in pixels.\n * @param  {number} [distanceY] - Measured in pixels.\n * @return {array}\n */\nfunction translate(distanceX, distanceY) {\n\tvar matrix = identity();\n\tmatrix[12] = distanceX;\n\n\tif (distanceY) {\n\t\tmatrix[13] = distanceY;\n\t}\n\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing X-axis translation.\n *\n * @param  {number} distance - Measured in pixels.\n * @return {array}\n */\nfunction translateX(distance) {\n\tvar matrix = identity();\n\tmatrix[12] = distance;\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing Y-axis translation.\n *\n * @param  {number} distance - Measured in pixels.\n * @return {array}\n */\nfunction translateY(distance) {\n\tvar matrix = identity();\n\tmatrix[13] = distance;\n\treturn matrix\n}\n\n/**\n * Returns a 4x4 matrix describing Z-axis translation.\n *\n * @param  {number} distance - Measured in pixels.\n * @return {array}\n */\nfunction translateZ(distance) {\n\tvar matrix = identity();\n\tmatrix[14] = distance;\n\treturn matrix\n}\n\nexport { format, identity, inverse, multiply, parse, rotate, rotateX, rotateY, rotateZ, scale, scaleX, scaleY, scaleZ, skew, skewX, skewY, translate, translateX, translateY, translateZ };\n", "import { IndexableObject } from './types'\n\nexport const isNumber = (x: any) => typeof x === 'number'\n\nexport const isFunction = (x: any) => typeof x === 'function'\n\nexport const isObject = (x: any) =>\n  Object.prototype.toString.call(x) === '[object Object]'\n\nexport const toArray = (arrayLike: ArrayLike<any>) =>\n  Array.prototype.slice.apply(arrayLike)\n\nexport const getDuplicateValsAsStrings = (arr: string[]): string[] => {\n  const baseObj: IndexableObject = {}\n  const obj = arr.reduce((acc, curr) => {\n    acc[curr] = (acc[curr] || 0) + 1\n    return acc\n  }, baseObj)\n  return Object.keys(obj).filter(val => obj[val] > 1)\n}\n\n// tslint only likes this with a regular function, not an arrow function\nexport function assign(target: IndexableObject, ...args: IndexableObject[]) {\n  args.forEach(arg => {\n    if (!arg) {\n      return\n    }\n    // Skip over if undefined or null\n    for (const nextKey in arg) {\n      // Avoid bugs when hasOwnProperty is shadowed\n      if (Object.prototype.hasOwnProperty.call(arg, nextKey)) {\n        target[nextKey] = arg[nextKey]\n      }\n    }\n  })\n  return target\n}\n\nexport const tweenProp = (start: number, end: number, position: number) =>\n  start + (end - start) * position\n", "/**\n *  Copyright (c) 2013, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n *\n *\n */\n\nlet _onFrame\nif (typeof window !== \"undefined\") {\n  _onFrame = window.requestAnimationFrame\n}\n\n_onFrame =\n  _onFrame ||\n  function(callback) {\n    window.setTimeout(callback, 1000 / 60)\n  }\n\nexport default _onFrame\n", "export const DATA_FLIP_ID = 'data-flip-id'\nexport const DATA_INVERSE_FLIP_ID = 'data-inverse-flip-id'\nexport const DATA_FLIP_COMPONENT_ID = 'data-flip-component-id'\nexport const DATA_FLIP_CONFIG = 'data-flip-config'\nexport const DATA_PORTAL_KEY = 'data-portal-key'\nexport const DATA_EXIT_CONTAINER = 'data-exit-container'\n", "import { isObject, assign } from '../utilities'\nimport { SpringPresets, SpringConfig, SpringOption } from './types'\n\n// adapted from\n// https://github.com/chenglou/react-motion/blob/master/src/presets.js\nexport const springPresets: SpringPresets = {\n  noWobble: { stiffness: 200, damping: 26 },\n  gentle: { stiffness: 120, damping: 14 },\n  veryGentle: { stiffness: 130, damping: 17 },\n  wobbly: { stiffness: 180, damping: 12 },\n  stiff: { stiffness: 260, damping: 26 }\n}\n\nfunction argIsSpringConfig(\n  arg: SpringConfig | keyof SpringPresets | undefined\n): arg is SpringConfig {\n  return isObject(arg)\n}\n\nexport const normalizeSpring = (\n  spring?: SpringConfig | keyof SpringPresets | any\n) => {\n  if (argIsSpringConfig(spring)) {\n    return spring\n  } else if (Object.keys(springPresets).indexOf(spring) > -1) {\n    return springPresets[spring]\n  } else {\n    return {}\n  }\n}\n\nexport const getSpringConfig = ({\n  flipperSpring,\n  flippedSpring\n}: { flipperSpring?: SpringOption; flippedSpring?: SpringOption } = {}) => {\n  return assign(\n    {},\n    springPresets.noWobble,\n    normalizeSpring(flipperSpring),\n    normalizeSpring(flippedSpring)\n  )\n}\n", "/**\n *  Copyright (c) 2013, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n *\n *\n */\n\nexport { default as onFrame } from './onFrame'\n\nconst start = Date.now()\nexport const performanceNow =\n  typeof performance === 'object' && typeof performance.now === 'function'\n    ? () => performance.now()\n    : () => Date.now() - start\n\n// Lop off the first occurence of the reference in the Array.\nexport function removeFirst(array, item) {\n  const idx = array.indexOf(item)\n  idx !== -1 && array.splice(idx, 1)\n}\n", "/**\n *  Copyright (c) 2013, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n *\n *\n */\n\nimport { onFrame, performanceNow } from \"./util\"\n\n/**\n * Plays each frame of the SpringSystem on animation\n * timing loop. This is the default type of looper for a new spring system\n * as it is the most common when developing UI.\n * @public\n */\nexport class AnimationLooper {\n  run() {\n    onFrame(() => {\n      this.springSystem.loop(performanceNow())\n    })\n  }\n}\n", "/**\n *  Copyright (c) 2013, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n *\n *\n */\n\nimport { removeFirst } from './util'\n\nclass PhysicsState {\n  constructor() {\n    this.position = 0\n    this.velocity = 0\n  }\n}\n\nlet ID = 0\nconst MAX_DELTA_TIME_SEC = 0.064\nconst SOLVER_TIMESTEP_SEC = 0.001\n\n/**\n * Provides a model of a classical spring acting to\n * resolve a body to equilibrium. Springs have configurable\n * tension which is a force multipler on the displacement of the\n * spring from its rest point or `endValue` as defined by [Hooke's\n * law](http://en.wikipedia.org/wiki/Hooke's_law). Springs also have\n * configurable friction, which ensures that they do not oscillate\n * infinitely. When a Spring is displaced by updating it's resting\n * or `currentValue`, the SpringSystems that contain that Spring\n * will automatically start looping to solve for equilibrium. As each\n * timestep passes, `SpringListener` objects attached to the Spring\n * will be notified of the updates providing a way to drive an\n * animation off of the spring's resolution curve.\n * @public\n */\nclass Spring {\n  constructor(springSystem) {\n    this._id = `s${ID++}`\n    this._springSystem = springSystem\n\n    this.listeners = []\n    this._startValue = 0\n\n    this._currentState = new PhysicsState()\n    this._displacementFromRestThreshold = 0.001\n    this._endValue = 0\n    this._overshootClampingEnabled = false\n    this._previousState = new PhysicsState()\n    this._restSpeedThreshold = 0.001\n\n    this._tempState = new PhysicsState()\n    this._timeAccumulator = 0\n    this._wasAtRest = true\n    // hack from alex -- only call 1x\n    this._onActivateCalled\n    this._cachedSpringConfig = {}\n  }\n\n  getId() {\n    return this._id\n  }\n\n  /**\n   * Remove a Spring from simulation and clear its listeners.\n   * @public\n   */\n  destroy() {\n    this.listeners = []\n    this._springSystem.deregisterSpring(this)\n  }\n\n  /**\n   * Set the configuration values for this Spring. A SpringConfig\n   * contains the tension and friction values used to solve for the\n   * equilibrium of the Spring in the physics loop.\n   * @public\n   */\n  setSpringConfig(springConfig) {\n    this._springConfig = springConfig\n    return this\n  }\n  /**\n   * Retrieve the current value of the Spring.\n   * @public\n   */\n  getCurrentValue() {\n    return this._currentState.position\n  }\n\n  /**\n   * Get the absolute distance of the Spring from a given state value\n   */\n  getDisplacementDistanceForState(state) {\n    return Math.abs(this._endValue - state.position)\n  }\n\n  /**\n   * Set the endValue or resting position of the spring. If this\n   * value is different than the current value, the SpringSystem will\n   * be notified and will begin running its solver loop to resolve\n   * the Spring to equilibrium. Any listeners that are registered\n   * for onSpringEndStateChange will also be notified of this update\n   * immediately.\n   * @public\n   */\n\n  setEndValue(endValue) {\n    if (endValue === this._endValue) return this\n    this.prevEndValue = endValue\n    if (this._endValue === endValue && this.isAtRest()) {\n      return this\n    }\n    this._startValue = this.getCurrentValue()\n    this._endValue = endValue\n    this._springSystem.activateSpring(this.getId())\n    for (let i = 0, len = this.listeners.length; i < len; i++) {\n      const listener = this.listeners[i]\n      const onChange = listener.onSpringEndStateChange\n      onChange && onChange(this)\n    }\n    return this\n  }\n\n  /**\n   * Set the current velocity of the Spring, in pixels per second. As\n   * previously mentioned, this can be useful when you are performing\n   * a direct manipulation gesture. When a UI element is released you\n   * may call setVelocity on its animation Spring so that the Spring\n   * continues with the same velocity as the gesture ended with. The\n   * friction, tension, and displacement of the Spring will then\n   * govern its motion to return to rest on a natural feeling curve.\n   * @public\n   */\n  setVelocity(velocity) {\n    if (velocity === this._currentState.velocity) {\n      return this\n    }\n    this._currentState.velocity = velocity\n    this._springSystem.activateSpring(this.getId())\n    return this\n  }\n\n  setCurrentValue(currentValue) {\n    this._startValue = currentValue\n    this._currentState.position = currentValue\n    for (var i = 0, len = this.listeners.length; i < len; i++) {\n      var listener = this.listeners[i]\n      listener.onSpringUpdate && listener.onSpringUpdate(this)\n    }\n    return this\n  }\n\n  setAtRest() {\n    this._endValue = this._currentState.position\n    this._tempState.position = this._currentState.position\n    this._currentState.velocity = 0\n    return this\n  }\n\n  /**\n   * Enable overshoot clamping. This means that the Spring will stop\n   * immediately when it reaches its resting position regardless of\n   * any existing momentum it may have. This can be useful for certain\n   * types of animations that should not oscillate such as a scale\n   * down to 0 or alpha fade.\n   * @public\n   */\n  setOvershootClampingEnabled(enabled) {\n    this._overshootClampingEnabled = enabled\n    return this\n  }\n\n  /**\n   * Check if the Spring has gone past its end point by comparing\n   * the direction it was moving in when it started to the current\n   * position and end value.\n   * @public\n   */\n  isOvershooting() {\n    const start = this._startValue\n    const end = this._endValue\n    return (\n      this._springConfig.tension > 0 &&\n      ((start < end && this.getCurrentValue() > end) ||\n        (start > end && this.getCurrentValue() < end))\n    )\n  }\n\n  /**\n   * The main solver method for the Spring. It takes\n   * the current time and delta since the last time step and performs\n   * an RK4 integration to get the new position and velocity state\n   * for the Spring based on the tension, friction, velocity, and\n   * displacement of the Spring.\n   * @public\n   */\n  advance(time, realDeltaTime) {\n    let isAtRest = this.isAtRest()\n\n    if (isAtRest && this._wasAtRest) {\n      return\n    }\n\n    let adjustedDeltaTime = realDeltaTime\n    if (realDeltaTime > MAX_DELTA_TIME_SEC) {\n      adjustedDeltaTime = MAX_DELTA_TIME_SEC\n    }\n\n    this._timeAccumulator += adjustedDeltaTime\n\n    const tension = this._springConfig.tension\n    const friction = this._springConfig.friction\n    let position = this._currentState.position\n    let velocity = this._currentState.velocity\n    let tempPosition = this._tempState.position\n    let tempVelocity = this._tempState.velocity\n    let aVelocity\n    let aAcceleration\n    let bVelocity\n    let bAcceleration\n    let cVelocity\n    let cAcceleration\n    let dVelocity\n    let dAcceleration\n    let dxdt\n    let dvdt\n\n    while (this._timeAccumulator >= SOLVER_TIMESTEP_SEC) {\n      this._timeAccumulator -= SOLVER_TIMESTEP_SEC\n\n      if (this._timeAccumulator < SOLVER_TIMESTEP_SEC) {\n        this._previousState.position = position\n        this._previousState.velocity = velocity\n      }\n\n      aVelocity = velocity\n      aAcceleration =\n        tension * (this._endValue - tempPosition) - friction * velocity\n\n      tempPosition = position + aVelocity * SOLVER_TIMESTEP_SEC * 0.5\n      tempVelocity = velocity + aAcceleration * SOLVER_TIMESTEP_SEC * 0.5\n      bVelocity = tempVelocity\n      bAcceleration =\n        tension * (this._endValue - tempPosition) - friction * tempVelocity\n\n      tempPosition = position + bVelocity * SOLVER_TIMESTEP_SEC * 0.5\n      tempVelocity = velocity + bAcceleration * SOLVER_TIMESTEP_SEC * 0.5\n      cVelocity = tempVelocity\n      cAcceleration =\n        tension * (this._endValue - tempPosition) - friction * tempVelocity\n\n      tempPosition = position + cVelocity * SOLVER_TIMESTEP_SEC\n      tempVelocity = velocity + cAcceleration * SOLVER_TIMESTEP_SEC\n      dVelocity = tempVelocity\n      dAcceleration =\n        tension * (this._endValue - tempPosition) - friction * tempVelocity\n\n      dxdt =\n        (1.0 / 6.0) * (aVelocity + 2.0 * (bVelocity + cVelocity) + dVelocity)\n      dvdt =\n        (1.0 / 6.0) *\n        (aAcceleration + 2.0 * (bAcceleration + cAcceleration) + dAcceleration)\n\n      position += dxdt * SOLVER_TIMESTEP_SEC\n      velocity += dvdt * SOLVER_TIMESTEP_SEC\n    }\n\n    this._tempState.position = tempPosition\n    this._tempState.velocity = tempVelocity\n\n    this._currentState.position = position\n    this._currentState.velocity = velocity\n\n    if (this._timeAccumulator > 0) {\n      this._interpolate(this._timeAccumulator / SOLVER_TIMESTEP_SEC)\n    }\n\n    if (\n      this.isAtRest() ||\n      (this._overshootClampingEnabled && this.isOvershooting())\n    ) {\n      if (this._springConfig.tension > 0) {\n        this._startValue = this._endValue\n        this._currentState.position = this._endValue\n      } else {\n        this._endValue = this._currentState.position\n        this._startValue = this._endValue\n      }\n      this.setVelocity(0)\n      isAtRest = true\n    }\n\n    let notifyActivate = false\n    if (this._wasAtRest) {\n      this._wasAtRest = false\n      notifyActivate = true\n    }\n\n    let notifyAtRest = false\n    if (isAtRest) {\n      this._wasAtRest = true\n      notifyAtRest = true\n    }\n\n    this.notifyPositionUpdated(notifyActivate, notifyAtRest)\n  }\n\n  notifyPositionUpdated(notifyActivate, notifyAtRest) {\n    this.listeners.filter(Boolean).forEach(listener => {\n      if (\n        notifyActivate &&\n        listener.onSpringActivate &&\n        !this._onActivateCalled\n      ) {\n        listener.onSpringActivate(this)\n        this._onActivateCalled = true\n      }\n\n      if (listener.onSpringUpdate) {\n        listener.onSpringUpdate(this)\n      }\n\n      if (notifyAtRest && listener.onSpringAtRest) {\n        listener.onSpringAtRest(this)\n      }\n    })\n  }\n\n  /**\n   * Check if the SpringSystem should advance. Springs are advanced\n   * a final frame after they reach equilibrium to ensure that the\n   * currentValue is exactly the requested endValue regardless of the\n   * displacement threshold.\n   * @public\n   */\n  systemShouldAdvance() {\n    return !this.isAtRest() || !this.wasAtRest()\n  }\n\n  wasAtRest() {\n    return this._wasAtRest\n  }\n\n  /**\n   * Check if the Spring is atRest meaning that it's currentValue and\n   * endValue are the same and that it has no velocity. The previously\n   * described thresholds for speed and displacement define the bounds\n   * of this equivalence check. If the Spring has 0 tension, then it will\n   * be considered at rest whenever its absolute velocity drops below the\n   * restSpeedThreshold.\n   * @public\n   */\n  isAtRest() {\n    const isAtRest =\n      Math.abs(this._currentState.velocity) < this._restSpeedThreshold &&\n      (this.getDisplacementDistanceForState(this._currentState) <=\n        this._displacementFromRestThreshold ||\n        this._springConfig.tension === 0)\n    return isAtRest\n  }\n\n  _interpolate(alpha) {\n    this._currentState.position =\n      this._currentState.position * alpha +\n      this._previousState.position * (1 - alpha)\n    this._currentState.velocity =\n      this._currentState.velocity * alpha +\n      this._previousState.velocity * (1 - alpha)\n  }\n\n  addListener(newListener) {\n    this.listeners.push(newListener)\n    return this\n  }\n\n  addOneTimeListener(newListener) {\n    const oneTimeFunc = func => (...args) => {\n      func(...args)\n      this.removeListener(newListener)\n    }\n    Object.keys(newListener).forEach(key => {\n      newListener[key] = oneTimeFunc(newListener[key])\n    })\n    this.listeners.push(newListener)\n    return this\n  }\n\n  removeListener(listenerToRemove) {\n    removeFirst(this.listeners, listenerToRemove)\n    return this\n  }\n}\n\nexport default Spring\n", "//\n/**\n *  Copyright (c) 2013, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n *\n */\n\nimport { AnimationLooper } from './Loopers'\nimport Spring from './Spring'\nimport { removeFirst } from './util'\n\n/**\n * A set of Springs that all run on the same physics\n * timing loop. To get started with a Rebound animation, first\n * create a new SpringSystem and then add springs to it.\n * @public\n */\nclass SpringSystem {\n  constructor(looper) {\n    this.looper = looper || new AnimationLooper()\n    this.looper.springSystem = this\n\n    this.listeners = []\n    this._activeSprings = []\n    this._idleSpringIndices = []\n    this._isIdle = true\n    this._lastTimeMillis = -1\n    this._springRegistry = {}\n  }\n\n  /**\n   * Add a new spring to this SpringSystem. This Spring will now be solved for\n   * during the physics iteration loop. By default the spring will use the\n   * default Origami spring config with 40 tension and 7 friction, but you can\n   * also provide your own values here.\n   * @public\n   */\n  createSpring(tension, friction) {\n    return this.createSpringWithConfig({ tension, friction })\n  }\n  /**\n   * Add a spring with the provided SpringConfig.\n   * @public\n   */\n  createSpringWithConfig(springConfig) {\n    const spring = new Spring(this)\n    this.registerSpring(spring)\n    spring.setSpringConfig(springConfig)\n    return spring\n  }\n\n  /**\n   * Check if a SpringSystem is idle or active. If all of the Springs in the\n   * SpringSystem are at rest, i.e. the physics forces have reached equilibrium,\n   * then this method will return true.\n   * @public\n   */\n  getIsIdle() {\n    return this._isIdle\n  }\n\n  /**\n   * Manually add a spring to this system. This is called automatically\n   * if a Spring is created with SpringSystem#createSpring.\n   *\n   * This method sets the spring up in the registry so that it can be solved\n   * in the solver loop.\n   * @public\n   */\n  registerSpring(spring) {\n    this._springRegistry[spring.getId()] = spring\n  }\n\n  /**\n   * Deregister a spring with this SpringSystem. The SpringSystem will\n   * no longer consider this Spring during its integration loop once\n   * this is called. This is normally done automatically for you when\n   * you call Spring#destroy.\n   * @public\n   */\n  deregisterSpring(spring) {\n    removeFirst(this._activeSprings, spring)\n    delete this._springRegistry[spring.getId()]\n  }\n\n  advance(time, deltaTime) {\n    while (this._idleSpringIndices.length > 0) {\n      this._idleSpringIndices.pop()\n    }\n    this._activeSprings.filter(Boolean).forEach(spring => {\n      if (spring.systemShouldAdvance()) {\n        spring.advance(time / 1000.0, deltaTime / 1000.0)\n      } else {\n        this._idleSpringIndices.push(this._activeSprings.indexOf(spring))\n      }\n    })\n\n    while (this._idleSpringIndices.length > 0) {\n      const idx = this._idleSpringIndices.pop()\n      idx >= 0 && this._activeSprings.splice(idx, 1)\n    }\n  }\n\n  /**\n   * This is the main solver loop called to move the simulation\n   * forward through time. Before each pass in the solver loop\n   * onBeforeIntegrate is called on an any listeners that have\n   * registered themeselves with the SpringSystem. This gives you\n   * an opportunity to apply any constraints or adjustments to\n   * the springs that should be enforced before each iteration\n   * loop. Next the advance method is called to move each Spring in\n   * the systemShouldAdvance forward to the current time. After the\n   * integration step runs in advance, onAfterIntegrate is called\n   * on any listeners that have registered themselves with the\n   * SpringSystem. This gives you an opportunity to run any post\n   * integration constraints or adjustments on the Springs in the\n   * SpringSystem.\n   * @public\n   */\n  loop(currentTimeMillis) {\n    let listener\n    if (this._lastTimeMillis === -1) {\n      this._lastTimeMillis = currentTimeMillis - 1\n    }\n    const ellapsedMillis = currentTimeMillis - this._lastTimeMillis\n    this._lastTimeMillis = currentTimeMillis\n\n    let i = 0\n    const len = this.listeners.length\n    for (i = 0; i < len; i++) {\n      listener = this.listeners[i]\n      listener.onBeforeIntegrate && listener.onBeforeIntegrate(this)\n    }\n\n    this.advance(currentTimeMillis, ellapsedMillis)\n    if (this._activeSprings.length === 0) {\n      this._isIdle = true\n      this._lastTimeMillis = -1\n    }\n\n    for (i = 0; i < len; i++) {\n      listener = this.listeners[i]\n      listener.onAfterIntegrate && listener.onAfterIntegrate(this)\n    }\n\n    if (!this._isIdle) {\n      this.looper.run()\n    }\n  }\n\n  /**\n   * Used to notify the SpringSystem that a Spring has become displaced.\n   * The system responds by starting its solver loop up if it is currently idle.\n   */\n  activateSpring(springId) {\n    const spring = this._springRegistry[springId]\n    if (this._activeSprings.indexOf(spring) === -1) {\n      this._activeSprings.push(spring)\n    }\n    if (this.getIsIdle()) {\n      this._isIdle = false\n      this.looper.run()\n    }\n  }\n}\n\nexport default SpringSystem\n", "import { SpringSystem } from '../../../forked-rebound'\nimport { StaggerConfigValue } from '../../../types'\nimport { FlipData, FlipDataArray } from '../types'\nimport {\n  SpringSystemInterface,\n  AddListenerArgs\n} from '../../../forked-rebound/types'\n\n// this should get created only 1x\nconst springSystem: SpringSystemInterface = new SpringSystem()\n\nexport const createSuspendedSpring = (flipData: FlipData) => {\n  const {\n    springConfig: { stiffness, damping, overshootClamping },\n    getOnUpdateFunc,\n    onAnimationEnd,\n    onSpringActivate\n  } = flipData\n\n  const spring = springSystem.createSpring(stiffness!, damping!)\n  spring.setOvershootClampingEnabled(!!overshootClamping)\n  const onSpringAtRest = () => {\n    // prevent SpringSystem from caching unused springs\n    spring.destroy()\n    onAnimationEnd()\n  }\n\n  const springConfig: AddListenerArgs = {\n    onSpringActivate,\n    onSpringAtRest,\n    onSpringUpdate: getOnUpdateFunc({\n      spring,\n      onAnimationEnd\n    })\n  }\n\n  spring.addListener(springConfig)\n  return spring\n}\n\nexport const createSpring = (flipped: FlipData) => {\n  const spring = createSuspendedSpring(flipped)\n  spring.setEndValue(1)\n  return spring\n}\n\nexport const normalizeSpeed = (speedConfig: number | undefined) => {\n  if (typeof speedConfig !== 'number') return 1.1\n  return 1 + Math.min(Math.max(speedConfig * 5, 0), 5)\n}\n\nexport const createStaggeredSprings = (\n  flippedArray: FlipDataArray,\n  staggerConfig: StaggerConfigValue = {}\n) => {\n  if (!flippedArray || !flippedArray.length) {\n    return\n  }\n\n  if (staggerConfig.reverse) {\n    flippedArray.reverse()\n  }\n\n  const normalizedSpeed = normalizeSpeed(staggerConfig.speed)\n\n  const nextThreshold = 1 / Math.max(Math.min(flippedArray.length, 100), 10)\n\n  const setEndValueFuncs = flippedArray\n    .map((flipped, i) => {\n      const cachedGetOnUpdate = flipped.getOnUpdateFunc\n\n      // modify the update function to adjust\n      // the end value of the trailing Flipped component\n      flipped.getOnUpdateFunc = args => {\n        const onUpdate = cachedGetOnUpdate(args)\n        return spring => {\n          let currentValue = spring.getCurrentValue()\n          // make sure trailing animations complete\n          currentValue =\n            currentValue < 0.01 ? 0 : currentValue > 0.99 ? 1 : currentValue\n\n          const updateTrailingAnimation = currentValue >= nextThreshold\n          if (updateTrailingAnimation) {\n            if (setEndValueFuncs[i + 1]) {\n              setEndValueFuncs[i + 1]!(\n                Math.max(Math.min(currentValue * normalizedSpeed, 1), 0)\n              )\n            }\n          }\n          // now call the actual update function\n          onUpdate(spring)\n        }\n      }\n      return flipped\n    })\n    .map(flipped => {\n      const spring = createSuspendedSpring(flipped)\n      if (!spring) {\n        return\n      }\n      return spring.setEndValue.bind(spring)\n    })\n    .filter(Boolean)\n\n  if (setEndValueFuncs[0]) {\n    setEndValueFuncs[0]!(1)\n  }\n}\n", "import * as Rematrix from 'rematrix'\nimport { getSpringConfig } from '../../springSettings'\nimport {\n  toArray,\n  isFunction,\n  isNumber,\n  getDuplicateValsAsStrings,\n  assign,\n  tweenProp\n} from '../../utilities'\nimport * as constants from '../../constants'\nimport {\n  GetOnUpdateFunc,\n  OnUpdate,\n  Matrix,\n  InvertedChildren,\n  AnimateFlippedElementsArgs,\n  AnimatedVals,\n  FlipDataArray,\n  FlipData,\n  InitializeFlip\n} from './types'\nimport { BoundingClientRect } from '../getFlippedElementPositions/types'\nimport { FlippedIds } from '../types'\nimport { createSpring, createStaggeredSprings } from './spring'\nimport { IndexableObject } from '../../utilities/types'\nimport { FlipId } from '../../types'\n\n// 3d transforms were causing weird issues in chrome,\n// especially when opacity was also being tweened,\n// so convert to a 2d matrix\nexport const convertMatrix3dArrayTo2dArray = (matrix: Matrix): Matrix =>\n  [0, 1, 4, 5, 12, 13].map(index => matrix[index])\n\nexport const convertMatrix2dArrayToString = (matrix: Matrix) =>\n  `matrix(${matrix.join(', ')})`\n\nexport const invertTransformsForChildren = ({\n  invertedChildren,\n  matrix,\n  body\n}: {\n  matrix: Matrix\n  body: HTMLBodyElement\n  invertedChildren: InvertedChildren\n}) => {\n  invertedChildren.forEach(([child, childFlipConfig]) => {\n    if (!body.contains(child)) {\n      return\n    }\n    const scaleX = matrix[0]\n    const scaleY = matrix[3]\n    const translateX = matrix[4]\n    const translateY = matrix[5]\n\n    const inverseVals = { translateX: 0, translateY: 0, scaleX: 1, scaleY: 1 }\n    let transformString = ''\n    if (childFlipConfig.translate) {\n      inverseVals.translateX = -translateX / scaleX\n      inverseVals.translateY = -translateY / scaleY\n      transformString += `translate(${inverseVals.translateX}px, ${inverseVals.translateY}px)`\n    }\n    if (childFlipConfig.scale) {\n      inverseVals.scaleX = 1 / scaleX\n      inverseVals.scaleY = 1 / scaleY\n      transformString += ` scale(${inverseVals.scaleX}, ${inverseVals.scaleY})`\n    }\n    child.style.transform = transformString\n  })\n}\n\nexport const createApplyStylesFunc =\n  ({\n    element,\n    invertedChildren,\n    body\n  }: {\n    element: HTMLElement\n    invertedChildren: InvertedChildren\n    body: HTMLBodyElement\n  }) =>\n  ({\n    matrix,\n    opacity,\n    forceMinVals\n  }: {\n    matrix: Matrix\n    opacity?: number\n    forceMinVals?: boolean\n  }) => {\n    if (isNumber(opacity)) {\n      element.style.opacity = opacity + ''\n    }\n\n    if (forceMinVals) {\n      element.style.minHeight = '1px'\n      element.style.minWidth = '1px'\n    }\n\n    if (!matrix) {\n      return\n    }\n\n    const stringTransform = convertMatrix2dArrayToString(matrix)\n\n    // always apply transform, even if identity,\n    // because identity might be the starting state in a FLIP\n    // transition, if the element's position is controlled by transforms\n    element.style.transform = stringTransform\n\n    if (invertedChildren) {\n      invertTransformsForChildren({\n        invertedChildren,\n        matrix,\n        body\n      })\n    }\n  }\n\nexport const rectInViewport = ({\n  top,\n  bottom,\n  left,\n  right\n}: BoundingClientRect) => {\n  return (\n    top < window.innerHeight &&\n    bottom > 0 &&\n    left < window.innerWidth &&\n    right > 0\n  )\n}\n\nconst getInvertedChildren = (element: HTMLElement, id: string) =>\n  toArray(\n    element.querySelectorAll(`[${constants.DATA_INVERSE_FLIP_ID}=\"${id}\"]`)\n  )\n\nfunction extractFlipConfig(element: HTMLElement) {\n  const flipConfig = JSON.parse(element.dataset.flipConfig || '{}')\n  return flipConfig\n}\n\nexport default ({\n  flippedIds,\n  flipCallbacks,\n  inProgressAnimations,\n  flippedElementPositionsBeforeUpdate,\n  flippedElementPositionsAfterUpdate,\n  applyTransformOrigin,\n  spring,\n  getElement,\n  debug,\n  staggerConfig = {},\n  decisionData = {},\n  onComplete,\n  containerEl\n}: AnimateFlippedElementsArgs) => {\n  // the stuff below is used so we can return a promise that resolves when all FLIP animations have\n  // completed\n  let closureResolve: (flipIds: FlippedIds) => void\n\n  const flipCompletedPromise: Promise<FlippedIds> = new Promise(resolve => {\n    closureResolve = resolve\n  })\n  // hook for users of lib to attach logic when all flip animations have completed\n  if (onComplete) {\n    flipCompletedPromise.then(() => onComplete(containerEl, decisionData))\n  }\n  if (!flippedIds.length) {\n    return () => {\n      closureResolve!([])\n      return flipCompletedPromise\n    }\n  }\n\n  const completedAnimationIds: FlippedIds = []\n\n  const firstElement: HTMLElement = getElement(flippedIds[0])\n  // special handling for iframes\n  const body = firstElement\n    ? firstElement.ownerDocument!.querySelector('body')!\n    : document.querySelector('body')!\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (debug) {\n      // eslint-disable-next-line no-console\n      console.error(\n        '[react-flip-toolkit]\\nThe \"debug\" prop is set to true. All FLIP animations will return at the beginning of the transition.'\n      )\n    }\n  }\n\n  const duplicateFlipIds = getDuplicateValsAsStrings(flippedIds)\n  if (process.env.NODE_ENV !== 'production') {\n    if (duplicateFlipIds.length) {\n      // eslint-disable-next-line no-console\n      console.error(\n        `[react-flip-toolkit]\\nThere are currently multiple elements with the same flipId on the page.\\nThe animation will only work if each Flipped component has a unique flipId.\\nDuplicate flipId${\n          duplicateFlipIds.length > 1 ? 's' : ''\n        }: ${duplicateFlipIds.join('\\n')}`\n      )\n    }\n  }\n\n  const flipDataArray: FlipDataArray = flippedIds\n\n    // take all the measurements we need\n    // and return an object with animation functions + necessary data\n    .map(id => {\n      const prevRect = flippedElementPositionsBeforeUpdate[id].rect\n      const currentRect = flippedElementPositionsAfterUpdate[id].rect\n      const prevOpacity = flippedElementPositionsBeforeUpdate[id].opacity\n      const currentOpacity = flippedElementPositionsAfterUpdate[id].opacity\n      const needsForcedMinVals = currentRect.width < 1 || currentRect.height < 1\n      const element = flippedElementPositionsAfterUpdate[id].element\n\n      // don't animate elements outside of the user's viewport\n      if (!rectInViewport(prevRect) && !rectInViewport(currentRect)) {\n        return false\n      }\n\n      // this might happen if we are rapidly adding & removing elements(?)\n      if (!element) {\n        return false\n      }\n\n      const flipConfig = extractFlipConfig(element)\n\n      const springConfig = getSpringConfig({\n        flipperSpring: spring,\n        flippedSpring: flipConfig.spring\n      })\n\n      const stagger =\n        flipConfig.stagger === true ? 'default' : flipConfig.stagger\n\n      const toReturn = {\n        element,\n        id,\n        stagger,\n        springConfig\n      }\n\n      if (flipCallbacks[id] && flipCallbacks[id].shouldFlip) {\n        const elementShouldFlip = flipCallbacks[id].shouldFlip!(\n          decisionData.previous,\n          decisionData.current\n        )\n        if (!elementShouldFlip) {\n          return false\n        }\n      }\n\n      // don't animate elements that didn't visibly change\n      // but possibly animate their children\n\n      const translateXDifference = Math.abs(prevRect.left - currentRect.left)\n      const translateYDifference = Math.abs(prevRect.top - currentRect.top)\n\n      const translateDifference = translateXDifference + translateYDifference\n\n      const scaleXDifference = Math.abs(prevRect.width - currentRect.width)\n      const scaleYDifference = Math.abs(prevRect.height - currentRect.height)\n\n      const scaleDifference = scaleXDifference + scaleYDifference\n\n      const opacityDifference = Math.abs(currentOpacity - prevOpacity)\n      const differenceTooSmall =\n        translateDifference < 0.5 &&\n        scaleDifference < 0.5 &&\n        opacityDifference < 0.01\n\n      const hiddenDueToDimensions =\n        (prevRect.height === 0 && currentRect.height === 0) ||\n        (prevRect.width === 0 && currentRect.width === 0)\n      if (hiddenDueToDimensions || differenceTooSmall) {\n        return false\n      }\n\n      const currentTransform = Rematrix.parse(\n        flippedElementPositionsAfterUpdate[id].transform\n      )\n\n      const toVals: AnimatedVals = { matrix: currentTransform }\n\n      const fromVals: AnimatedVals = { matrix: [] }\n      const transformsArray = [currentTransform]\n\n      // we're only going to animate the values that the child wants animated\n      if (flipConfig.translate) {\n        transformsArray.push(\n          Rematrix.translateX(prevRect.left - currentRect.left)\n        )\n        transformsArray.push(\n          Rematrix.translateY(prevRect.top - currentRect.top)\n        )\n      }\n      // going any smaller than 1px breaks transitions in Chrome\n      if (flipConfig.scale) {\n        transformsArray.push(\n          Rematrix.scaleX(\n            Math.max(prevRect.width, 1) / Math.max(currentRect.width, 1)\n          )\n        )\n        transformsArray.push(\n          Rematrix.scaleY(\n            Math.max(prevRect.height, 1) / Math.max(currentRect.height, 1)\n          )\n        )\n      }\n\n      if (flipConfig.opacity) {\n        fromVals.opacity = prevOpacity\n        toVals.opacity = currentOpacity\n      }\n\n      let invertedChildren: InvertedChildren = []\n\n      if (\n        !flipCallbacks[id] ||\n        !flipCallbacks[id].shouldInvert ||\n        flipCallbacks[id].shouldInvert!(\n          decisionData.previous,\n          decisionData.current\n        )\n      ) {\n        const invertedChildElements = getInvertedChildren(element, id)\n        invertedChildren = invertedChildElements.map(c => [\n          c,\n          extractFlipConfig(c)\n        ]) as InvertedChildren\n      }\n\n      fromVals.matrix = convertMatrix3dArrayTo2dArray(\n        transformsArray.reduce(Rematrix.multiply)\n      )\n\n      toVals.matrix = convertMatrix3dArrayTo2dArray(toVals.matrix)\n\n      const applyStyles = createApplyStylesFunc({\n        element,\n        invertedChildren,\n        body\n      })\n\n      let onComplete: () => void\n      if (flipCallbacks[id] && flipCallbacks[id].onComplete) {\n        // must cache or else this could cause an error\n        const cachedOnComplete = flipCallbacks[id].onComplete\n        onComplete = () => cachedOnComplete!(element, decisionData)\n      }\n\n      // this should be called when animation ends naturally\n      // but also when it is interrupted\n      // when it is called, the animation has already been cancelled\n      const onAnimationEnd = (isCancellation: boolean) => {\n        delete inProgressAnimations[id]\n        if (isFunction(onComplete)) {\n          onComplete()\n        }\n        // remove identity transform -- this should have no effect on layout\n        element.style.transform = ''\n        invertedChildren.forEach(([element]) => {\n          element.style.transform = ''\n        })\n        if (needsForcedMinVals && element) {\n          element.style.minHeight = ''\n          element.style.minWidth = ''\n        }\n        if (isCancellation) return\n\n        completedAnimationIds.push(id)\n\n        if (completedAnimationIds.length >= flipDataArray.length) {\n          // we can theoretically call multiple times since a promise only resolves 1x\n          // but that shouldnt happen\n          closureResolve(completedAnimationIds)\n        }\n      }\n\n      const animateOpacity =\n        isNumber(fromVals.opacity) &&\n        isNumber(toVals.opacity) &&\n        fromVals.opacity !== toVals.opacity\n\n      let onStartCalled = false\n\n      const getOnUpdateFunc: GetOnUpdateFunc = ({ spring, onAnimationEnd }) => {\n        inProgressAnimations[id] = {\n          destroy: spring.destroy.bind(spring),\n          onAnimationEnd\n        }\n        const onUpdate: OnUpdate = spring => {\n          if (flipCallbacks[id] && flipCallbacks[id].onSpringUpdate) {\n            flipCallbacks[id].onSpringUpdate!(spring.getCurrentValue())\n          }\n          // trigger the user provided onStart function\n          if (!onStartCalled) {\n            onStartCalled = true\n            if (flipCallbacks[id] && flipCallbacks[id].onStart) {\n              flipCallbacks[id].onStart!(element, decisionData)\n            }\n          }\n\n          const currentValue = spring.getCurrentValue()\n          if (!body.contains(element)) {\n            spring.destroy()\n            return\n          }\n\n          const vals: AnimatedVals = { matrix: [] }\n\n          vals.matrix = fromVals.matrix.map((fromVal, index) =>\n            tweenProp(fromVal, toVals.matrix[index], currentValue)\n          )\n\n          if (animateOpacity) {\n            vals.opacity = tweenProp(\n              fromVals.opacity!,\n              toVals.opacity!,\n              currentValue\n            )\n          }\n          applyStyles(vals)\n        }\n        return onUpdate\n      }\n\n      const initializeFlip: InitializeFlip = () => {\n        // before animating, immediately apply FLIP styles to prevent flicker\n        applyStyles({\n          matrix: fromVals.matrix,\n          opacity: animateOpacity ? fromVals.opacity : undefined,\n          forceMinVals: needsForcedMinVals\n        })\n\n        if (flipCallbacks[id] && flipCallbacks[id].onStartImmediate) {\n          flipCallbacks[id].onStartImmediate!(element, decisionData)\n        }\n        // and batch any other style updates if necessary\n        if (flipConfig.transformOrigin) {\n          element.style.transformOrigin = flipConfig.transformOrigin\n        } else if (applyTransformOrigin) {\n          element.style.transformOrigin = '0 0'\n        }\n\n        invertedChildren.forEach(([child, childFlipConfig]) => {\n          if (childFlipConfig.transformOrigin) {\n            child.style.transformOrigin = childFlipConfig.transformOrigin\n          } else if (applyTransformOrigin) {\n            child.style.transformOrigin = '0 0'\n          }\n        })\n      }\n\n      return assign({}, toReturn, {\n        stagger,\n        springConfig,\n        getOnUpdateFunc,\n        initializeFlip,\n        onAnimationEnd,\n        delayUntil: flipConfig.delayUntil\n      }) as FlipData\n    })\n    // filter out data for all non-animated elements first\n    .filter(Boolean) as FlipDataArray\n\n  flipDataArray.forEach(({ initializeFlip }) => initializeFlip())\n\n  if (debug) {\n    return () => {}\n  }\n\n  const elementIsFlipped = (flipId: FlipId) =>\n    flipDataArray.filter(f => f.id === flipId).length\n\n  const delayedFlip = flipDataArray.filter(\n    f => f.delayUntil && elementIsFlipped(f.delayUntil)\n  )\n\n  // key: flipId value: flip to delay until key is called\n  const delayUntilSprings = {} as IndexableObject\n  // key: flipId value: stagger to delay until key is called\n  const delayUntilStaggers = {} as IndexableObject\n  // key: stagger value: true\n  const delayedStaggerKeys = {} as IndexableObject\n\n  delayedFlip.forEach(flip => {\n    if (flip.stagger) {\n      delayedStaggerKeys[flip.stagger] = true\n      if (delayUntilStaggers[flip.delayUntil!])\n        delayUntilStaggers[flip.delayUntil!].push(flip.stagger)\n      else delayUntilStaggers[flip.delayUntil!] = [flip.stagger]\n    } else {\n      if (delayUntilSprings[flip.delayUntil!])\n        delayUntilSprings[flip.delayUntil!].push(flip)\n      else delayUntilSprings[flip.delayUntil!] = [flip]\n    }\n  })\n\n  const staggerDict = flipDataArray\n    .filter(flipData => flipData.stagger)\n    .reduce((acc, curr) => {\n      if (acc[curr.stagger]) {\n        acc[curr.stagger].push(curr)\n      } else {\n        acc[curr.stagger] = [curr]\n      }\n      return acc\n    }, {} as IndexableObject)\n\n  const immediateFlip = flipDataArray.filter(f => delayedFlip.indexOf(f) === -1)\n\n  immediateFlip.forEach(flipData => {\n    flipData.onSpringActivate = () => {\n      if (delayUntilSprings[flipData.id]) {\n        delayUntilSprings[flipData.id].forEach(createSpring)\n      }\n      if (delayUntilStaggers[flipData.id]) {\n        const uniqueStaggerKeys = Object.keys(\n          delayUntilStaggers[flipData.id].reduce(\n            (acc: IndexableObject, curr: string) =>\n              assign(acc, { [curr]: true }),\n            {}\n          )\n        )\n        uniqueStaggerKeys.forEach((staggerKey: string) => {\n          createStaggeredSprings(\n            staggerDict[staggerKey],\n            staggerConfig[staggerKey]\n          )\n        })\n      }\n    }\n  })\n\n  return () => {\n    // if there are no active FLIP animations, immediately resolve the\n    // returned promise\n    if (!flipDataArray.length) {\n      closureResolve([])\n    }\n    // animate non-staggered elements\n    immediateFlip\n      .filter(flipData => {\n        return !flipData.stagger\n      })\n      .forEach(createSpring)\n\n    // animate staggered elements\n    Object.keys(staggerDict).forEach(staggerKey => {\n      if (delayedStaggerKeys[staggerKey]) return\n      createStaggeredSprings(staggerDict[staggerKey], staggerConfig[staggerKey])\n    })\n    return flipCompletedPromise\n  }\n}\n", "import { toArray, assign } from '../../utilities'\nimport * as constants from '../../constants'\nimport { BoundingClientRect } from './types'\n\nexport const addTupleToObject = <T>(\n  acc: Record<string, T>,\n  curr: [string, T]\n): Record<string, T> => assign(acc, { [curr[0]]: curr[1] })\n\nexport const getAllElements = (\n  element?: HTMLElement,\n  portalKey?: string\n): HTMLElement[] => {\n  if (portalKey) {\n    return toArray(\n      document.querySelectorAll(`[${constants.DATA_PORTAL_KEY}=\"${portalKey}\"]`)\n    )\n  } else {\n    return toArray(element!.querySelectorAll(`[${constants.DATA_FLIP_ID}]`))\n  }\n}\nexport const getRects = (\n  flippedElements: HTMLElement[]\n): [HTMLElement, BoundingClientRect][] => {\n  return flippedElements.map(\n    (child: HTMLElement): [HTMLElement, BoundingClientRect] => [\n      child,\n      child.getBoundingClientRect()\n    ]\n  )\n}\n", "import animateUnflippedElements from './animateUnflippedElements'\nimport animateFlippedElements from './animateFlippedElements'\nimport getFlippedElementPositionsAfterUpdate from './getFlippedElementPositions/getFlippedElementPositionsAfterUpdate'\nimport * as constants from '../constants'\nimport { assign, toArray } from '../utilities'\nimport {\n  GetElement,\n  BaseFlipArgs,\n  OnFlipKeyUpdateArgs,\n  FlippedIds\n} from './types'\nimport { AnimateUnflippedElementsArgs } from './animateUnflippedElements/types'\nimport {\n  AnimateFlippedElementsArgs,\n  ScopedSelector\n} from './animateFlippedElements/types'\n\nlet enabled = true\n\nexport const disableFlip = () => (enabled = false)\n\nexport const enableFlip = () => (enabled = true)\n\nexport const isFlipEnabled = () => enabled\n\nconst createPortalScopedSelector =\n  (portalKey: string) => (selector: string) => {\n    return toArray(\n      document.querySelectorAll(\n        `[${constants.DATA_PORTAL_KEY}=\"${portalKey}\"]${selector}`\n      )\n    )\n  }\nconst createFlipperScopedSelector = (containerEl: HTMLElement) => {\n  const tempFlipperId = Math.random().toFixed(5)\n  containerEl.dataset.flipperId = tempFlipperId\n\n  return (selector: string) => {\n    return toArray(\n      containerEl.querySelectorAll(\n        `[data-flipper-id=\"${tempFlipperId}\"] ${selector}`\n      )\n    )\n  }\n}\nconst createScopedSelector = ({\n  containerEl,\n  portalKey\n}: {\n  containerEl?: HTMLElement\n  portalKey?: string\n}): ScopedSelector => {\n  if (portalKey) {\n    return createPortalScopedSelector(portalKey)\n  } else if (containerEl) {\n    return createFlipperScopedSelector(containerEl)\n  } else {\n    return () => []\n  }\n}\n\nconst createGetElementFunc = (scopedSelector: ScopedSelector): GetElement => {\n  return (id: string) => {\n    return scopedSelector(`[${constants.DATA_FLIP_ID}=\"${id}\"]`)[0]\n  }\n}\n\nexport const onFlipKeyUpdate = ({\n  cachedOrderedFlipIds = [],\n  inProgressAnimations = {},\n  flippedElementPositionsBeforeUpdate = {},\n  flipCallbacks = {},\n  containerEl,\n  applyTransformOrigin,\n  spring,\n  debug,\n  portalKey,\n  staggerConfig = {},\n  decisionData = {},\n  handleEnterUpdateDelete,\n  onComplete,\n  onStart\n}: OnFlipKeyUpdateArgs) => {\n  if (!enabled) return\n  const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)')\n  if (mediaQuery.matches) return\n  const flippedElementPositionsAfterUpdate =\n    getFlippedElementPositionsAfterUpdate({\n      element: containerEl,\n      portalKey\n    })\n\n  const scopedSelector = createScopedSelector({\n    containerEl,\n    portalKey\n  })\n  const getElement = createGetElementFunc(scopedSelector)\n\n  const isFlipped = (id: string) =>\n    flippedElementPositionsBeforeUpdate[id] &&\n    flippedElementPositionsAfterUpdate[id]\n\n  const unflippedIds = Object.keys(flippedElementPositionsBeforeUpdate)\n    .concat(Object.keys(flippedElementPositionsAfterUpdate))\n    .filter(id => !isFlipped(id))\n\n  const baseArgs: BaseFlipArgs = {\n    flipCallbacks,\n    getElement,\n    flippedElementPositionsBeforeUpdate,\n    flippedElementPositionsAfterUpdate,\n    inProgressAnimations,\n    decisionData\n  }\n\n  const animateUnFlippedElementsArgs = assign({}, baseArgs, {\n    unflippedIds\n  }) as AnimateUnflippedElementsArgs\n\n  const {\n    hideEnteringElements,\n    animateEnteringElements,\n    animateExitingElements\n  } = animateUnflippedElements(animateUnFlippedElementsArgs)\n\n  const flippedIds: FlippedIds = cachedOrderedFlipIds.filter(isFlipped)\n  // @ts-ignore\n  const animateFlippedElementsArgs: AnimateFlippedElementsArgs = assign(\n    {},\n    baseArgs,\n    {\n      containerEl,\n      flippedIds,\n      applyTransformOrigin,\n      spring,\n      debug,\n      staggerConfig,\n      scopedSelector,\n      onComplete\n    }\n  )\n  if (onStart) onStart(containerEl, decisionData)\n\n  // the function handles putting flipped elements back in their original positions\n  // and returns another function to actually call the flip animation\n  const flip = animateFlippedElements(animateFlippedElementsArgs)\n\n  if (handleEnterUpdateDelete) {\n    handleEnterUpdateDelete({\n      hideEnteringElements,\n      animateEnteringElements,\n      animateExitingElements,\n      animateFlippedElements: flip\n    })\n  } else {\n    hideEnteringElements()\n    animateExitingElements().then(animateEnteringElements)\n    flip()\n  }\n}\n\n", "import { addTupleToObject, getRects, getAllElements } from '../utilities'\nimport {\n  FlippedElementPositionsAfterUpdate,\n  FlippedElementPositionDatumAfterUpdate\n} from './types'\n\nconst getFlippedElementPositionsAfterUpdate = ({\n  element,\n  portalKey\n}: {\n  element: HTMLElement\n  portalKey?: string\n}): FlippedElementPositionsAfterUpdate => {\n  const positionArray = getRects(getAllElements(element, portalKey)).map(\n    ([child, childBCR]) => {\n      const computedStyle = window.getComputedStyle(child)\n      return [\n        child.dataset.flipId,\n        {\n          element: child,\n          rect: childBCR,\n          opacity: parseFloat(computedStyle.opacity!),\n          transform: computedStyle.transform\n        }\n      ]\n    }\n  ) as [string, FlippedElementPositionDatumAfterUpdate][]\n\n  return positionArray.reduce(addTupleToObject, {})\n}\n\nexport default getFlippedElementPositionsAfterUpdate\n", "import { AnimateUnflippedElementsArgs, FragmentTuple } from './types'\n\nconst animateUnflippedElements = ({\n  unflippedIds,\n  flipCallbacks,\n  getElement,\n  flippedElementPositionsBeforeUpdate,\n  flippedElementPositionsAfterUpdate,\n  inProgressAnimations,\n  decisionData\n}: AnimateUnflippedElementsArgs) => {\n  const enteringElementIds = unflippedIds.filter(\n    id => flippedElementPositionsAfterUpdate[id]\n  )\n  const animatedEnteringElementIds = enteringElementIds.filter(\n    id => flipCallbacks[id] && flipCallbacks[id].onAppear\n  )\n\n  const animatedExitingElementIds = unflippedIds.filter(\n    id =>\n      flippedElementPositionsBeforeUpdate[id] &&\n      flipCallbacks[id] &&\n      flipCallbacks[id].onExit\n  )\n\n  const hideEnteringElements = () => {\n    animatedEnteringElementIds.forEach(id => {\n      const element = getElement(id)\n      if (element) {\n        element.style.opacity = '0'\n      }\n    })\n  }\n\n  const animateEnteringElements = () => {\n    animatedEnteringElementIds.forEach((id, i) => {\n      const element = getElement(id)\n      if (element) {\n        flipCallbacks[id].onAppear!(element, i, decisionData)\n      }\n    })\n  }\n\n  let closureResolve: () => void\n\n  const promiseToReturn: Promise<void> = new Promise(resolve => {\n    closureResolve = resolve\n  })\n\n  const fragmentTuples: FragmentTuple[] = []\n  let exitingElementCount = 0\n\n  const onExitCallbacks = animatedExitingElementIds.map((id, i) => {\n    const {\n      domDataForExitAnimations: {\n        element,\n        parent,\n        childPosition: { top, left, width, height }\n      }\n    } = flippedElementPositionsBeforeUpdate[id]\n    // insert back into dom\n    if (getComputedStyle(parent).position === 'static') {\n      parent.style.position = 'relative'\n    }\n    element.style.transform = 'matrix(1, 0, 0, 1, 0, 0)'\n    element.style.position = 'absolute'\n    element.style.top = top + 'px'\n    element.style.left = left + 'px'\n    // taken out of the dom flow, the element might have lost these dimensions\n    element.style.height = height + 'px'\n    element.style.width = width + 'px'\n    let fragmentTuple: FragmentTuple | undefined = fragmentTuples.filter(\n      t => t[0] === parent\n    )[0]\n    if (!fragmentTuple) {\n      fragmentTuple = [parent, document.createDocumentFragment()]\n      fragmentTuples.push(fragmentTuple)\n    }\n    fragmentTuple[1].appendChild(element)\n\n    exitingElementCount += 1\n\n    const stop = () => {\n      try {\n        parent.removeChild(element)\n      } catch (DOMException) {\n        // the element is already gone\n      } finally {\n        exitingElementCount -= 1\n        if (exitingElementCount === 0) {\n          closureResolve()\n        }\n      }\n    }\n    // @ts-ignore\n    inProgressAnimations[id] = { stop }\n    return () => flipCallbacks[id].onExit!(element, i, stop, decisionData)\n  })\n\n  // now append all the fragments from the onExit callbacks\n  // (we use fragments for performance)\n  fragmentTuples.forEach(t => {\n    t[0].appendChild(t[1])\n  })\n\n  if (!onExitCallbacks.length) {\n    closureResolve!()\n  }\n\n  const animateExitingElements = () => {\n    onExitCallbacks.forEach(c => c())\n    return promiseToReturn\n  }\n\n  return {\n    hideEnteringElements,\n    animateEnteringElements,\n    animateExitingElements\n  }\n}\n\nexport default animateUnflippedElements\n", "import { addTupleToObject, getAllElements, getRects } from '../utilities'\nimport * as constants from '../../../constants'\nimport { toArray, assign } from '../../../utilities'\nimport {\n  FlippedElementPositionsBeforeUpdateReturnVals,\n  FlippedElementPositionDatumBeforeUpdate,\n  GetFlippedElementPositionsBeforeUpdateArgs,\n  ParentBCRs,\n  ChildIdsToParentBCRs,\n  ChildIdsToParents\n} from './types'\nimport { InProgressAnimations } from '../../../types'\n\nexport const cancelInProgressAnimations = (\n  inProgressAnimations: InProgressAnimations,\n  animatingElements: HTMLElement[]\n) => {\n  Object.keys(inProgressAnimations).forEach(id => {\n    if (inProgressAnimations[id].destroy) {\n      inProgressAnimations[id].destroy!()\n    }\n    if (inProgressAnimations[id].onAnimationEnd) {\n      inProgressAnimations[id].onAnimationEnd!(true)\n    }\n    delete inProgressAnimations[id]\n  })\n  animatingElements.forEach(el => {\n    el.style.transform = ''\n    el.style.opacity = ''\n  })\n}\n\nconst getFlippedElementPositionsBeforeUpdate = ({\n  element,\n  flipCallbacks = {},\n  inProgressAnimations = {},\n  portalKey\n}: GetFlippedElementPositionsBeforeUpdateArgs): FlippedElementPositionsBeforeUpdateReturnVals => {\n  const flippedElements = getAllElements(element, portalKey)\n\n  const inverseFlippedElements = toArray(\n    element.querySelectorAll(`[${constants.DATA_INVERSE_FLIP_ID}]`)\n  )\n\n  const childIdsToParentBCRs: ChildIdsToParentBCRs = {}\n  const parentBCRs: ParentBCRs = []\n  const childIdsToParents: ChildIdsToParents = {}\n  // this is for exit animations so we can re-insert exiting elements in the\n  // DOM later\n  flippedElements\n    .filter(\n      el =>\n        flipCallbacks &&\n        flipCallbacks[el.dataset.flipId!] &&\n        flipCallbacks[el.dataset.flipId!].onExit\n    )\n    .forEach(el => {\n      let parent = el.parentNode as HTMLElement\n      // this won't work for IE11\n      if (el.closest) {\n        const exitContainer = el.closest(\n          `[${constants.DATA_EXIT_CONTAINER}]`\n        ) as HTMLElement\n        if (exitContainer) {\n          parent = exitContainer\n        }\n      }\n      let bcrIndex = parentBCRs.findIndex(n => n[0] === parent)\n      if (bcrIndex === -1) {\n        parentBCRs.push([parent, parent.getBoundingClientRect()])\n        bcrIndex = parentBCRs.length - 1\n      }\n      childIdsToParentBCRs[el.dataset.flipId!] = parentBCRs[bcrIndex][1]\n      childIdsToParents[el.dataset.flipId!] = parent\n    })\n\n  const filteredFlippedElements = getRects(flippedElements)\n\n  const flippedElementPositionsTupleArray: [\n    string,\n    FlippedElementPositionDatumBeforeUpdate\n  ][] = filteredFlippedElements.map(([child, childBCR]) => {\n    const domDataForExitAnimations = {}\n\n    // only cache extra data for exit animations\n    // if the element has an onExit listener\n    if (\n      flipCallbacks &&\n      flipCallbacks[child.dataset.flipId!] &&\n      flipCallbacks[child.dataset.flipId!].onExit\n    ) {\n      const parentBCR = childIdsToParentBCRs[child.dataset.flipId!]\n\n      assign(domDataForExitAnimations, {\n        element: child,\n        parent: childIdsToParents[child.dataset.flipId!],\n        childPosition: {\n          top: childBCR.top - parentBCR.top,\n          left: childBCR.left - parentBCR.left,\n          width: childBCR.width,\n          height: childBCR.height\n        }\n      })\n    }\n\n    return [\n      child.dataset.flipId!,\n      {\n        rect: childBCR,\n        opacity: parseFloat(window.getComputedStyle(child).opacity || '1'),\n        domDataForExitAnimations\n      }\n    ]\n  }) as [string, FlippedElementPositionDatumBeforeUpdate][]\n\n  const flippedElementPositions = flippedElementPositionsTupleArray.reduce(\n    addTupleToObject,\n    {}\n  )\n\n  // do this at the very end since we want to cache positions of elements\n  // while they are mid-transition\n  cancelInProgressAnimations(\n    inProgressAnimations,\n    flippedElements.concat(inverseFlippedElements)\n  )\n\n  return {\n    flippedElementPositions,\n    cachedOrderedFlipIds: filteredFlippedElements.map(\n      ([el]) => el.dataset.flipId!\n    )\n  }\n}\n\nexport default getFlippedElementPositionsBeforeUpdate\n", "import { onFlipKeyUpdate } from './flip'\nimport getFlippedElementPositionsBeforeUpdate from './flip/getFlippedElementPositions/getFlippedElementPositionsBeforeUpdate'\nimport { assign } from './utilities'\nimport {\n  StaggerConfig,\n  HandleEnterUpdateDelete,\n  InProgressAnimations,\n  FlipCallbacks,\n  OnFlipperComplete,\n  FlippedProps,\n  OnFlipperStart\n} from './types'\nimport { SpringOption } from './springSettings/types'\nimport { FlippedElementPositionsBeforeUpdate } from './flip/getFlippedElementPositions/getFlippedElementPositionsBeforeUpdate/types'\nimport { FlippedIds } from './flip/types'\n\ninterface Options {\n  element: HTMLElement\n  staggerConfig?: StaggerConfig\n  spring?: SpringOption\n  applyTransformOrigin?: boolean\n  handleEnterUpdateDelete?: HandleEnterUpdateDelete\n  debug?: boolean\n  onStart?: OnFlipperStart\n  onComplete?: OnFlipperComplete\n}\n\nclass Flipper {\n  private element!: HTMLElement\n  private staggerConfig!: StaggerConfig\n  private applyTransformOrigin = true\n  private handleEnterUpdateDelete!: HandleEnterUpdateDelete\n  private debug?: boolean\n  private spring!: SpringOption\n  private inProgressAnimations: InProgressAnimations\n  private flipCallbacks: FlipCallbacks\n  private snapshot?: {\n    flippedElementPositions: FlippedElementPositionsBeforeUpdate\n    cachedOrderedFlipIds: FlippedIds\n  }\n  private onComplete?: OnFlipperComplete\n  private onStart?: OnFlipperStart\n\n  constructor(options: Options) {\n    assign(this, options)\n\n    this.inProgressAnimations = {}\n    this.flipCallbacks = {}\n\n    this.recordBeforeUpdate = this.recordBeforeUpdate.bind(this)\n    this.update = this.update.bind(this)\n    this.addFlipped = this.addFlipped.bind(this)\n    this.addInverted = this.addInverted.bind(this)\n  }\n\n  recordBeforeUpdate() {\n    this.snapshot = getFlippedElementPositionsBeforeUpdate({\n      element: this.element,\n      flipCallbacks: this.flipCallbacks,\n      inProgressAnimations: this.inProgressAnimations\n    })\n  }\n  update(prevDecisionData: any, currentDecisionData: any) {\n    if (this.snapshot) {\n      onFlipKeyUpdate({\n        flippedElementPositionsBeforeUpdate:\n          this.snapshot.flippedElementPositions,\n        cachedOrderedFlipIds: this.snapshot.cachedOrderedFlipIds,\n        containerEl: this.element,\n        inProgressAnimations: this.inProgressAnimations,\n        flipCallbacks: this.flipCallbacks,\n        applyTransformOrigin: this.applyTransformOrigin,\n        spring: this.spring,\n        debug: this.debug,\n        staggerConfig: this.staggerConfig,\n        handleEnterUpdateDelete: this.handleEnterUpdateDelete,\n        decisionData: {\n          previous: prevDecisionData,\n          current: currentDecisionData\n        },\n        onComplete: this.onComplete,\n        onStart: this.onStart\n      })\n      delete this.snapshot\n    }\n  }\n\n  addFlipped({\n    element,\n    flipId,\n    opacity,\n    translate,\n    scale,\n    transformOrigin,\n    spring,\n    stagger,\n    delayUntil,\n    onAppear,\n    onStart,\n    onSpringUpdate,\n    onComplete,\n    onExit,\n    shouldFlip,\n    shouldInvert\n  }: FlippedProps & { element: HTMLElement }) {\n    if (!element) {\n      throw new Error('no element provided')\n    }\n    if (!flipId) {\n      throw new Error('No flipId provided')\n    }\n    const flipConfig = {\n      scale,\n      translate,\n      opacity,\n      transformOrigin,\n      spring,\n      stagger,\n      delayUntil\n    }\n    if (!flipConfig.scale && !flipConfig.translate && !flipConfig.opacity) {\n      assign(flipConfig, {\n        translate: true,\n        scale: true,\n        opacity: true\n      })\n    }\n    if (flipId) {\n      element.dataset.flipId = String(flipId)\n    }\n    element.dataset.flipConfig = JSON.stringify(flipConfig)\n    // finally, add callbacks\n    this.flipCallbacks[flipId] = {\n      shouldFlip,\n      shouldInvert,\n      onAppear,\n      onStart,\n      onSpringUpdate,\n      onComplete,\n      onExit\n    }\n  }\n\n  addInverted({\n    element,\n    parent,\n    opacity,\n    translate,\n    scale,\n    transformOrigin\n  }: {\n    element: HTMLElement\n    parent: HTMLElement\n    opacity: boolean\n    translate: boolean\n    scale: boolean\n    transformOrigin: string\n  }) {\n    if (!element) {\n      throw new Error('no element provided')\n    }\n    if (!parent) {\n      throw new Error('parent must be provided')\n    }\n\n    const inverseFlipId = parent.dataset.flipId\n    const flipConfig = {\n      scale,\n      translate,\n      opacity,\n      transformOrigin\n    }\n    if (!flipConfig.scale && !flipConfig.translate && !flipConfig.opacity) {\n      assign(flipConfig, {\n        translate: true,\n        scale: true,\n        opacity: true\n      })\n    }\n    element.dataset.inverseFlipId = inverseFlipId\n    element.dataset.flipConfig = JSON.stringify(flipConfig)\n  }\n}\n\nexport default Flipper\n", "// this is exclusively for users of the library to create their own enter + exit animations\nimport { SpringSystem } from '../forked-rebound'\nimport { SpringSystemInterface } from '../forked-rebound/types.d'\nimport { tweenProp, assign } from '../utilities'\nimport { normalizeSpring, springPresets } from '../springSettings'\nimport { SimpleSpringOptions } from './types'\nimport { SpringConfig } from '../springSettings/types'\n\n// this should get created only 1x\nconst springSystem: SpringSystemInterface = new SpringSystem()\n\n/**\n * A simple spring function for animating DOM properties.\n * Returns a function that will immediately cancel the in-progress animation.\n * */\nconst createSimpleSpring = ({\n  config,\n  values,\n  onUpdate,\n  delay = 0,\n  onComplete\n}: SimpleSpringOptions) => {\n  const { stiffness, damping, overshootClamping } = assign(\n    {},\n    springPresets.noWobble,\n    normalizeSpring(config)\n  ) as SpringConfig\n  const spring = springSystem.createSpring(stiffness!, damping!)\n  spring.setOvershootClampingEnabled(!!overshootClamping)\n  spring.addListener({\n    onSpringAtRest: spring => {\n      if (onComplete) onComplete()\n      spring.destroy()\n    },\n    onSpringUpdate: spring => {\n      const springVal = spring.getCurrentValue()\n      if (!values) return onUpdate(springVal)\n      const currentValues = Object.keys(values)\n        .map(value => [\n          value,\n          tweenProp(values[value][0], values[value][1], springVal)\n        ])\n        .reduce((acc, curr) => {\n          return Object.assign(acc, { [curr[0]]: curr[1] })\n        }, {})\n      onUpdate(currentValues)\n    }\n  })\n  if (delay) {\n    setTimeout(() => {\n      spring.setEndValue(1)\n    }, delay)\n  } else {\n    spring.setEndValue(1)\n  }\n  return spring\n}\n\nexport default createSimpleSpring\n", "import { createContext } from 'react'\nimport { FlipCallbacks } from 'flip-toolkit/lib/types'\n\nexport const FlipContext = createContext({} as FlipCallbacks)\nexport const PortalContext = createContext('portal')\n", "import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  getFlippedElementPositionsBeforeUpdate,\n  onFlipKeyUpdate\n} from 'flip-toolkit'\nimport {\n  FlipperProps,\n  InProgressAnimations,\n  FlipCallbacks\n} from 'flip-toolkit/lib/types'\nimport { FlippedElementPositionsBeforeUpdateReturnVals } from 'flip-toolkit/lib/flip/getFlippedElementPositions/getFlippedElementPositionsBeforeUpdate/types'\nimport { FlipContext, PortalContext } from './context'\n\nclass Flipper extends Component<FlipperProps> {\n  static defaultProps = {\n    applyTransformOrigin: true,\n    element: 'div'\n  }\n\n  private inProgressAnimations: InProgressAnimations = {}\n  private flipCallbacks: FlipCallbacks = {}\n  private el?: HTMLElement = undefined\n\n  getSnapshotBeforeUpdate(prevProps: FlipperProps) {\n    if (prevProps.flipKey !== this.props.flipKey && this.el) {\n      return getFlippedElementPositionsBeforeUpdate({\n        element: this.el,\n        // if onExit callbacks exist here, we'll cache the DOM node\n        flipCallbacks: this.flipCallbacks,\n        inProgressAnimations: this.inProgressAnimations,\n        portalKey: this.props.portalKey\n      })\n    }\n    return null\n  }\n\n  componentDidUpdate(\n    prevProps: FlipperProps,\n    _prevState: any,\n    cachedData: FlippedElementPositionsBeforeUpdateReturnVals\n  ) {\n    if (this.props.flipKey !== prevProps.flipKey && this.el) {\n      onFlipKeyUpdate({\n        flippedElementPositionsBeforeUpdate: cachedData.flippedElementPositions,\n        cachedOrderedFlipIds: cachedData.cachedOrderedFlipIds,\n        containerEl: this.el,\n        inProgressAnimations: this.inProgressAnimations,\n        flipCallbacks: this.flipCallbacks,\n        applyTransformOrigin: this.props.applyTransformOrigin,\n        spring: this.props.spring,\n        debug: this.props.debug,\n        portalKey: this.props.portalKey,\n        staggerConfig: this.props.staggerConfig,\n        handleEnterUpdateDelete: this.props.handleEnterUpdateDelete,\n        decisionData: {\n          previous: prevProps.decisionData,\n          current: this.props.decisionData\n        },\n        onComplete: this.props.onComplete,\n        onStart: this.props.onStart\n      })\n    }\n  }\n\n  public render() {\n    const { element, className, portalKey } = this.props\n    const Element = element\n\n    let flipperMarkup = (\n      <FlipContext.Provider value={this.flipCallbacks}>\n        {/*\n        // @ts-ignore */}\n        <Element\n          className={className}\n          ref={(el: HTMLElement) => (this.el = el)}\n        >\n          {this.props.children}\n        </Element>\n      </FlipContext.Provider>\n    )\n\n    if (portalKey) {\n      flipperMarkup = (\n        <PortalContext.Provider value={portalKey}>\n          {flipperMarkup}\n        </PortalContext.Provider>\n      )\n    }\n\n    return flipperMarkup\n  }\n}\n// @ts-ignore\n\nif (process.env.NODE_ENV !== 'production') {\n  // @ts-ignore\n  Flipper.propTypes = {\n    flipKey: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number,\n      PropTypes.bool\n    ]),\n    children: PropTypes.node.isRequired,\n    spring: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    applyTransformOrigin: PropTypes.bool,\n    debug: PropTypes.bool,\n    element: PropTypes.string,\n    className: PropTypes.string,\n    portalKey: PropTypes.string,\n    staggerConfig: PropTypes.object,\n    decisionData: PropTypes.any,\n    handleEnterUpdateDelete: PropTypes.func,\n    onComplete: PropTypes.func,\n    onStart: PropTypes.func\n  }\n}\n\nexport default Flipper\n", "import React, {\n  FunctionComponent,\n  Children,\n  cloneElement,\n  ReactElement\n} from 'react'\nimport PropTypes from 'prop-types'\nimport { utilities, constants } from 'flip-toolkit'\nimport { FlippedProps, SerializableFlippedProps } from 'flip-toolkit/lib/types'\nimport { FlipContext, PortalContext } from '../Flipper/context'\n\nfunction isFunction(child: any): child is Function {\n  return typeof child === 'function'\n}\n\n// This wrapper creates child components for the main Flipper component\nexport const Flipped: FunctionComponent<SerializableFlippedProps> = ({\n  children,\n  flipId,\n  inverseFlipId,\n  portalKey,\n  ...rest\n}) => {\n  let child = children\n  const isFunctionAsChildren = isFunction(child)\n\n  if (!isFunctionAsChildren) {\n    try {\n      child = Children.only(children)\n    } catch (e) {\n      throw new Error('Each Flipped component must wrap a single child')\n    }\n  }\n\n  // if nothing is being animated, assume everything is being animated\n  if (!rest.scale && !rest.translate && !rest.opacity) {\n    utilities.assign(rest, {\n      translate: true,\n      scale: true,\n      opacity: true\n    })\n  }\n\n  const dataAttributes: Record<string, string | undefined> = {\n    [constants.DATA_FLIP_CONFIG]: JSON.stringify(rest)\n  }\n\n  if (flipId !== undefined)\n    dataAttributes[constants.DATA_FLIP_ID] = String(flipId)\n  else if (inverseFlipId)\n    dataAttributes[constants.DATA_INVERSE_FLIP_ID] = String(inverseFlipId)\n  if (portalKey !== undefined) {\n    dataAttributes[constants.DATA_PORTAL_KEY] = portalKey\n  }\n  if (isFunctionAsChildren) {\n    return (child as Function)(dataAttributes)\n  }\n  return cloneElement(child as ReactElement<any>, dataAttributes)\n}\n// @ts-ignore\nexport const FlippedWithContext: FunctionComponent<FlippedProps> = ({\n  children,\n  flipId,\n  shouldFlip,\n  shouldInvert,\n  onAppear,\n  onStart,\n  onStartImmediate,\n  onComplete,\n  onExit,\n  onSpringUpdate,\n  ...rest\n}) => {\n  if (!children) {\n    return null\n  }\n  if (rest.inverseFlipId) {\n    return <Flipped {...rest}>{children}</Flipped>\n  }\n\n  return (\n    <PortalContext.Consumer>\n      {portalKey => (\n        <FlipContext.Consumer>\n          {data => {\n            // if there is no surrounding Flipper component,\n            // we don't want to throw an error, so check\n            // that data exists and is not the default string\n            if (utilities.isObject(data) && flipId) {\n              data[flipId] = {\n                shouldFlip,\n                shouldInvert,\n                onAppear,\n                onStart,\n                onStartImmediate,\n                onComplete,\n                onExit,\n                onSpringUpdate\n              }\n            }\n            return (\n              <Flipped flipId={flipId} {...rest} portalKey={portalKey}>\n                {children}\n              </Flipped>\n            )\n          }}\n        </FlipContext.Consumer>\n      )}\n    </PortalContext.Consumer>\n  )\n}\nif (process.env.NODE_ENV !== 'production') {\n  FlippedWithContext.propTypes = {\n    // @ts-expect-error\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired,\n    inverseFlipId: PropTypes.string,\n    flipId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    opacity: PropTypes.bool,\n    translate: PropTypes.bool,\n    scale: PropTypes.bool,\n    transformOrigin: PropTypes.string,\n    spring: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    onStart: PropTypes.func,\n    onStartImmediate: PropTypes.func,\n    onComplete: PropTypes.func,\n    onAppear: PropTypes.func,\n    onSpringUpdate: PropTypes.func,\n    shouldFlip: PropTypes.func,\n    shouldInvert: PropTypes.func,\n    onExit: PropTypes.func,\n    portalKey: PropTypes.string,\n    stagger: PropTypes.oneOfType([PropTypes.string, PropTypes.bool])\n  }\n}\n\nFlippedWithContext.displayName = 'Flipped'\n\nexport default FlippedWithContext\n", "import { cloneElement, ReactElement, ReactNode } from 'react'\nimport { constants } from 'flip-toolkit'\n\nconst ExitContainer = ({ children }: { children: ReactNode }) => {\n  return cloneElement(children as ReactElement<any>, {\n    [constants.DATA_EXIT_CONTAINER]: true\n  })\n}\n\nexport default ExitContainer\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/utils/calculateLayout.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419122.016\";\n}\n// REMIX HMR END\n\nimport invariant from 'tiny-invariant'\n\ninterface Layout {\n\trows: number\n\tcols: number\n}\n\nfunction possibleLayouts(count: number) {\n\tconst max = Math.ceil(Math.sqrt(count))\n\n\tlet layouts: Layout[] = [{ rows: max, cols: max }]\n\n\tfor (let rows = 1; rows < max; rows++) {\n\t\tlayouts.push({\n\t\t\trows,\n\t\t\tcols: Math.ceil(count / rows),\n\t\t})\n\t}\n\n\tfor (let cols = 1; cols < max; cols++) {\n\t\tlayouts.push({\n\t\t\tcols,\n\t\t\trows: Math.ceil(count / cols),\n\t\t})\n\t}\n\n\treturn layouts\n}\n\n/**\n * Finds the layout that would provide the largest 16:9\n * tiles given the container dimensions, and number of\n * tiles to fit.\n */\nexport function calculateLayout(config: {\n\tcount: number\n\theight: number\n\twidth: number\n}): Layout {\n\tconst { count, height, width } = config\n\tif (height === 0 || width === 0) {\n\t\treturn {\n\t\t\tcols: 0,\n\t\t\trows: 0,\n\t\t}\n\t}\n\n\tlet idealLayout: null | Layout = null\n\tlet largestArea = 0\n\n\tconst targetTileAspectRatio = 4 / 3\n\n\tfor (const layout of possibleLayouts(count)) {\n\t\tconst tileHeight = height / layout.rows\n\t\tconst tileWidth = width / layout.cols\n\n\t\tconst constrainingDimension = tileHeight > tileWidth ? 'width' : 'height'\n\n\t\tconst area =\n\t\t\tconstrainingDimension === 'height'\n\t\t\t\t? // calculate tileWidth\n\t\t\t\t\ttargetTileAspectRatio *\n\t\t\t\t\ttileHeight *\n\t\t\t\t\t// then multiply by tileHeight\n\t\t\t\t\ttileHeight\n\t\t\t\t: // calculate tileHeight\n\t\t\t\t\t(1 / targetTileAspectRatio) *\n\t\t\t\t\ttileWidth *\n\t\t\t\t\t// then multiply by tileWidth\n\t\t\t\t\ttileWidth\n\n\t\tif (area > largestArea) {\n\t\t\tlargestArea = area\n\t\t\tidealLayout = layout\n\t\t}\n\t}\n\tinvariant(idealLayout)\n\treturn idealLayout\n}\n", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/Participant.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/Participant.tsx\");\n  import.meta.hot.lastModified = \"1738073419113.0427\";\n}\n// REMIX HMR END\n\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\nimport { useObservableAsValue } from 'partytracks/react';\nimport { forwardRef, useEffect, useMemo } from 'react';\nimport { Flipped } from 'react-flip-toolkit';\nimport { combineLatest, fromEvent, map, of, switchMap } from 'rxjs';\nimport { useDeadPulledTrackMonitor } from '~/hooks/useDeadPulledTrackMonitor';\nimport useIsSpeaking from '~/hooks/useIsSpeaking';\nimport { useRoomContext } from '~/hooks/useRoomContext';\nimport { screenshareSuffix } from '~/hooks/useStageManager';\nimport { useUserMetadata } from '~/hooks/useUserMetadata';\nimport isNonNullable from '~/utils/isNonNullable';\nimport populateTraceLink from '~/utils/populateTraceLink';\nimport { ewma } from '~/utils/rxjs/ewma';\nimport { getPacketLoss$ } from '~/utils/rxjs/getPacketLoss$';\nimport { cn } from '~/utils/style';\nimport { usePulledVideoTrack } from '../hooks/usePulledVideoTrack';\nimport { AudioGlow } from './AudioGlow';\nimport { AudioIndicator } from './AudioIndicator';\nimport { ConnectionIndicator, getConnectionQuality } from './ConnectionIndicator';\nimport { HoverFade } from './HoverFade';\nimport { Icon } from './Icon/Icon';\nimport { MuteUserButton } from './MuteUserButton';\nimport { OptionalLink } from './OptionalLink';\nimport { usePulledAudioTrack } from './PullAudioTracks';\nimport { Tooltip } from './Tooltip';\nimport { VideoSrcObject } from './VideoSrcObject';\nfunction useMid(track) {\n  _s();\n  const {\n    partyTracks\n  } = useRoomContext();\n  const transceivers$ = useMemo(() => combineLatest([partyTracks.peerConnection$, partyTracks.peerConnection$.pipe(switchMap(peerConnection => fromEvent(peerConnection, 'track')))]).pipe(map(([pc]) => pc.getTransceivers())), [partyTracks.peerConnection$]);\n  const transceivers = useObservableAsValue(transceivers$, []);\n  if (!track) return null;\n  return transceivers.find(t => t.sender.track === track || t.receiver.track === track)?.mid;\n}\n_s(useMid, \"w1jS9Lyys9s+L3sQdjp4QtuOvcs=\", false, function () {\n  return [useRoomContext, useObservableAsValue];\n});\nexport const Participant = _s2(forwardRef(_c = _s2(({\n  user\n}, ref) => {\n  _s2();\n  const {\n    data\n  } = useUserMetadata(user.name);\n  const {\n    traceLink,\n    partyTracks,\n    dataSaverMode,\n    pinnedTileIds,\n    setPinnedTileIds,\n    showDebugInfo,\n    userMedia,\n    room: {\n      identity\n    }\n  } = useRoomContext();\n  const peerConnection = useObservableAsValue(partyTracks.peerConnection$);\n  const id = user.id;\n  const isSelf = identity && id.startsWith(identity.id);\n  const isScreenShare = id.endsWith(screenshareSuffix);\n  const isAi = user.id === 'ai';\n  const aiAudioTrack = usePulledAudioTrack(isAi ? user.tracks.audio : undefined);\n  const isSpeaking = useIsSpeaking(user.id === 'ai' ? aiAudioTrack : undefined) || user.speaking;\n  const pulledAudioTrack = usePulledAudioTrack(isScreenShare ? undefined : user.tracks.audio);\n  const pulledVideoTrack = usePulledVideoTrack(isScreenShare || !isSelf && !dataSaverMode ? user.tracks.video : undefined);\n  const audioTrack = isSelf ? userMedia.audioStreamTrack : pulledAudioTrack;\n  const videoTrack = isSelf && !isScreenShare ? userMedia.videoStreamTrack : pulledVideoTrack;\n  useDeadPulledTrackMonitor(user.tracks.video, user.transceiverSessionId, !!user.tracks.video, videoTrack, user.name);\n  useDeadPulledTrackMonitor(user.tracks.audio, user.transceiverSessionId, !!user.tracks.audio, audioTrack, user.name);\n  const pinned = pinnedTileIds.includes(id);\n  useEffect(() => {\n    if (isScreenShare) {\n      setPinnedTileIds(ids => [...ids, id]);\n    }\n  }, [id, isScreenShare, setPinnedTileIds]);\n  const packetLoss$ = useMemo(() => getPacketLoss$(partyTracks.peerConnection$, of([audioTrack, videoTrack].filter(isNonNullable))).pipe(ewma(5000)), [audioTrack, partyTracks.peerConnection$, videoTrack]);\n  const packetLoss = useObservableAsValue(packetLoss$, 0);\n  const audioMid = useMid(audioTrack);\n  const videoMid = useMid(videoTrack);\n  return <div className=\"grow shrink text-base basis-[calc(var(--flex-container-width)_-_var(--gap)_*_3)]\" ref={ref}>\n\t\t\t<Flipped flipId={id + pinned}>\n\t\t\t\t<div className={cn('h-full mx-auto overflow-hidden text-white opacity-0 animate-fadeIn', 'relative max-w-[--participant-max-width] rounded-xl')}>\n\t\t\t\t\t{!isScreenShare && <div className={cn('absolute inset-0 h-full w-full grid place-items-center')}>\n\t\t\t\t\t\t\t<div className=\"h-[2em] w-[2em] grid place-items-center text-4xl md:text-6xl 2xl:text-8xl relative\">\n\t\t\t\t\t\t\t\t{data?.photob64 ? <div>\n\t\t\t\t\t\t\t\t\t\t<AudioGlow className=\"absolute inset-0 w-full h-full rounded-full\" audioTrack={audioTrack} type=\"box\"></AudioGlow>\n\t\t\t\t\t\t\t\t\t\t<img className=\"rounded-full\" src={`data:image/png;base64,${data.photob64}`} alt={data.displayName} />\n\t\t\t\t\t\t\t\t\t</div> : <span className=\"relative grid w-full h-full uppercase rounded-full place-items-center bg-zinc-500\">\n\t\t\t\t\t\t\t\t\t\t{isSpeaking && <AudioGlow type=\"text\" className=\"absolute uppercase\" audioTrack={audioTrack}>\n\t\t\t\t\t\t\t\t\t\t\t\t{user.name.charAt(0)}\n\t\t\t\t\t\t\t\t\t\t\t</AudioGlow>}\n\t\t\t\t\t\t\t\t\t\t{user.name.charAt(0)}\n\t\t\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t<VideoSrcObject className={cn('absolute inset-0 h-full w-full object-contain opacity-0 transition-opacity', isSelf && !isScreenShare && '-scale-x-100', {\n          'opacity-100': isScreenShare ? user.tracks.screenShareEnabled : user.tracks.videoEnabled && (!dataSaverMode || isSelf)\n        }, isSelf && isScreenShare && 'opacity-75')} videoTrack={videoTrack} />\n\t\t\t\t\t{!isScreenShare && <HoverFade className=\"absolute inset-0 grid w-full h-full place-items-center\">\n\t\t\t\t\t\t\t<div className=\"flex gap-2 p-2 rounded bg-zinc-900/30\">\n\t\t\t\t\t\t\t\t{/* <Tooltip content={pinned ? 'Restore' : 'Maximize'}> */}\n\t\t\t\t\t\t\t\t{/* \t<Button */}\n\t\t\t\t\t\t\t\t{/* \t\tonClick={() => */}\n\t\t\t\t\t\t\t\t{/* \t\t\tsetPinnedTileIds((ids) => */}\n\t\t\t\t\t\t\t\t{/* \t\t\t\tpinned ? ids.filter((i) => i !== id) : [...ids, id] */}\n\t\t\t\t\t\t\t\t{/* \t\t\t) */}\n\t\t\t\t\t\t\t\t{/* \t\t} */}\n\t\t\t\t\t\t\t\t{/* \t\tdisplayType=\"ghost\" */}\n\t\t\t\t\t\t\t\t{/* \t> */}\n\t\t\t\t\t\t\t\t{/* \t\t<Icon type={pinned ? 'arrowsIn' : 'arrowsOut'} /> */}\n\t\t\t\t\t\t\t\t{/* \t</Button> */}\n\t\t\t\t\t\t\t\t{/* </Tooltip> */}\n\t\t\t\t\t\t\t\t{!isScreenShare && <MuteUserButton displayType=\"ghost\" mutedDisplayType=\"ghost\" user={user} />}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</HoverFade>}\n\t\t\t\t\t{audioTrack && !isScreenShare && <div className=\"absolute left-4 top-4\">\n\t\t\t\t\t\t\t{user.tracks.audioEnabled && user.tracks.videoEnabled && isSpeaking && <AudioIndicator audioTrack={audioTrack} />}\n\n\t\t\t\t\t\t\t{!user.tracks.audioEnabled && !user.tracks.audioUnavailable && <Tooltip content=\"Mic is turned off\">\n\t\t\t\t\t\t\t\t\t<div className=\"indication-shadow\">\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"micOff\" />\n\t\t\t\t\t\t\t\t\t\t<VisuallyHidden>Mic is muted</VisuallyHidden>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Tooltip>}\n\t\t\t\t\t\t\t{user.tracks.audioUnavailable && <Tooltip content=\"Mic is unavailable. User cannot unmute.\">\n\t\t\t\t\t\t\t\t\t<div className=\"indication-shadow\">\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"micOff\" className=\"text-red-400\" />\n\t\t\t\t\t\t\t\t\t\t<VisuallyHidden>Mic is muted</VisuallyHidden>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Tooltip>}\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t{data?.displayName && user.transceiverSessionId && <div className=\"flex items-center gap-2 absolute m-2 text-shadow left-1 bottom-1\">\n\t\t\t\t\t\t\t<ConnectionIndicator quality={getConnectionQuality(packetLoss)} />\n\t\t\t\t\t\t\t<OptionalLink className=\"leading-none\" href={populateTraceLink(user.transceiverSessionId, traceLink)} target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\t\t\t\t{data.displayName}\n\t\t\t\t\t\t\t\t{showDebugInfo && peerConnection && <span className=\"opacity-50\">\n\t\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t\t{[audioMid && `audio mid: ${audioMid}`, videoMid && `video mid: ${videoMid}`].filter(Boolean).join(' ')}\n\t\t\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t\t</OptionalLink>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t<div className=\"absolute top-0 right-0 flex gap-4 p-4\">\n\t\t\t\t\t\t{user.raisedHand && !isScreenShare && <Tooltip content=\"Hand is raised\">\n\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t\t<Icon className=\"indication-shadow\" type=\"handRaised\" />\n\t\t\t\t\t\t\t\t\t\t<Icon className=\"absolute top-0 left-0 text-orange-300 animate-ping\" type=\"handRaised\" />\n\t\t\t\t\t\t\t\t\t\t<VisuallyHidden>Hand is raised</VisuallyHidden>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tooltip>}\n\t\t\t\t\t</div>\n\t\t\t\t\t{(isSpeaking || user.raisedHand) && !isScreenShare && <div className={cn('pointer-events-none absolute inset-0 h-full w-full border-4 border-orange-400', !pinned && 'rounded-xl')}></div>}\n\t\t\t\t</div>\n\t\t\t</Flipped>\n\t\t</div>;\n}, \"GBqz/3yza3Y9Igw30s+aCreKbEg=\", false, function () {\n  return [useUserMetadata, useRoomContext, useObservableAsValue, usePulledAudioTrack, useIsSpeaking, usePulledAudioTrack, usePulledVideoTrack, useDeadPulledTrackMonitor, useDeadPulledTrackMonitor, useObservableAsValue, useMid, useMid];\n})), \"GBqz/3yza3Y9Igw30s+aCreKbEg=\", false, function () {\n  return [useUserMetadata, useRoomContext, useObservableAsValue, usePulledAudioTrack, useIsSpeaking, usePulledAudioTrack, usePulledVideoTrack, useDeadPulledTrackMonitor, useDeadPulledTrackMonitor, useObservableAsValue, useMid, useMid];\n});\n_c2 = Participant;\nParticipant.displayName = 'Participant';\nvar _c, _c2;\n$RefreshReg$(_c, \"Participant$forwardRef\");\n$RefreshReg$(_c2, \"Participant\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/hooks/useDeadPulledTrackMonitor.tsx\"\n);\nimport.meta.hot.lastModified = \"1738073419116.3677\";\n}\n// REMIX HMR END\n\nimport { useObservableAsValue } from 'partytracks/react'\nimport { useEffect, useRef, useState } from 'react'\nimport type { DeadTrackInfo } from '~/routes/api.deadTrack'\nimport populateTraceLink from '~/utils/populateTraceLink'\nimport { useRoomContext } from './useRoomContext'\n\nexport function useDeadPulledTrackMonitor(\n\ttrackInfo?: string,\n\tsessionId?: string,\n\tenabled?: boolean,\n\ttrack?: MediaStreamTrack,\n\tname?: string\n) {\n\tconst [deadTrack, setDeadTrack] = useState(false)\n\tconst { partyTracks, traceLink, room, feedbackEnabled } = useRoomContext()\n\tconst peerConnection = useObservableAsValue(partyTracks.peerConnection$)\n\tconst timeoutRef = useRef(-1)\n\n\tuseEffect(() => {\n\t\tif (!peerConnection || !track || !enabled || deadTrack || !feedbackEnabled)\n\t\t\treturn\n\t\ttimeoutRef.current = window.setTimeout(() => {\n\t\t\tpeerConnection.getStats(track).then((report) => {\n\t\t\t\t// this means component has unmounted\n\t\t\t\tif (timeoutRef.current === -1) return\n\t\t\t\tconst stat = [...report.values()].find(\n\t\t\t\t\t(s) => s.trackIdentifier === track.id\n\t\t\t\t)\n\t\t\t\tif (stat?.bytesReceived === 0) {\n\t\t\t\t\tsetDeadTrack(true)\n\t\t\t\t}\n\t\t\t})\n\t\t}, 10000)\n\n\t\treturn () => {\n\t\t\tclearTimeout(timeoutRef.current)\n\t\t\t// reset this to -1 for the check above\n\t\t\ttimeoutRef.current = -1\n\t\t}\n\t}, [deadTrack, enabled, feedbackEnabled, partyTracks, peerConnection, track])\n\n\tuseEffect(() => {\n\t\tif (!sessionId || !deadTrack || !feedbackEnabled) return\n\t\tconst pullSessionTrace = populateTraceLink(sessionId, traceLink)\n\t\tconst [pushedSessionId, trackId] = trackInfo?.split('/') ?? []\n\t\tconst pushedSessionTrace = populateTraceLink(pushedSessionId, traceLink)\n\n\t\tif (pushedSessionTrace && pullSessionTrace) {\n\t\t\tconst info: DeadTrackInfo = {\n\t\t\t\tpullSessionTrace,\n\t\t\t\tpushedSessionTrace,\n\t\t\t\ttrackId,\n\t\t\t\tpullingUser: room.identity?.name,\n\t\t\t\tpushingUser: name,\n\t\t\t}\n\t\t\tfetch('/api/deadTrack', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: JSON.stringify(info),\n\t\t\t})\n\t\t}\n\t}, [\n\t\tdeadTrack,\n\t\tpeerConnection,\n\t\tfeedbackEnabled,\n\t\tname,\n\t\tsessionId,\n\t\troom.identity?.name,\n\t\ttraceLink,\n\t\ttrackInfo,\n\t])\n}\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/hooks/useStageManager.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419117.7947\";\n}\n// REMIX HMR END\n\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport type { User } from '~/types/Messages'\n\n/**\n * Returns an updated list with as few\n * changes as possible to the stable list.\n *\n * Items that are not in the new roster will\n * be dropped with their positions being filled\n * by new items.\n *\n */\nexport const resolveRoster = <T extends { id: string }>(\n\tcurrentRoster: T[],\n\tnewRoster: T[]\n) => {\n\tconst newRosterMap = new Map(newRoster.map((item) => [item.id, item]))\n\tconst currentRosterMap = new Map(currentRoster.map((item) => [item.id, item]))\n\tconst remainingNewItems = newRoster.filter(\n\t\t({ id }) => !currentRosterMap.has(id)\n\t)\n\treturn currentRoster\n\t\t.reduce((acc: T[], currentRosterItem) => {\n\t\t\tconst item = newRosterMap.get(currentRosterItem.id)\n\t\t\tif (item === undefined) {\n\t\t\t\tconst firstNewItem = remainingNewItems[0]\n\t\t\t\tif (!firstNewItem) return acc\n\t\t\t\tacc.push(firstNewItem)\n\t\t\t\tremainingNewItems.splice(0, 1)\n\t\t\t} else {\n\t\t\t\tacc.push(item)\n\t\t\t}\n\t\t\treturn acc\n\t\t}, [])\n\t\t.concat(remainingNewItems)\n}\n\nexport const screenshareSuffix = '_screenshare'\n\nexport default function useStageManager(\n\tusers: User[],\n\tlimit: number,\n\tself?: User\n) {\n\tconst usersAndScreenshares = useMemo(\n\t\t() =>\n\t\t\tusers.concat(self ? [self] : []).flatMap((u) =>\n\t\t\t\tu.tracks.screenshare\n\t\t\t\t\t? [\n\t\t\t\t\t\t\tu,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...u,\n\t\t\t\t\t\t\t\tid: u.id + screenshareSuffix,\n\t\t\t\t\t\t\t\ttracks: {\n\t\t\t\t\t\t\t\t\t...u.tracks,\n\t\t\t\t\t\t\t\t\tvideo: u.tracks.screenshare,\n\t\t\t\t\t\t\t\t\tvideoEnabled: u.tracks.screenShareEnabled,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]\n\t\t\t\t\t: [u]\n\t\t\t),\n\t\t[self, users]\n\t)\n\n\tconst [actorsOnStage, setActorsOnStage] = useState<User[]>(\n\t\tusersAndScreenshares.slice(0, limit)\n\t)\n\tconst [activityRecord, setActivityRecord] = useState<Record<string, number>>(\n\t\t{}\n\t)\n\n\tconst recordActivity = useCallback((actor: User) => {\n\t\tsetActivityRecord((ah) => ({ ...ah, [actor.id]: Date.now() }))\n\t}, [])\n\n\tconst actorsThatShouldBeOnStage = useMemo(\n\t\t() =>\n\t\t\t[...usersAndScreenshares]\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t// prioritize self\n\t\t\t\t\tif (a.id === self?.id) return -1\n\t\t\t\t\tif (b.id === self?.id) return 1\n\n\t\t\t\t\t// prioritize screenshares\n\t\t\t\t\tif (\n\t\t\t\t\t\ta.id.includes(screenshareSuffix) &&\n\t\t\t\t\t\t!b.id.includes(screenshareSuffix)\n\t\t\t\t\t)\n\t\t\t\t\t\treturn -1\n\t\t\t\t\tif (\n\t\t\t\t\t\t!a.id.includes(screenshareSuffix) &&\n\t\t\t\t\t\tb.id.includes(screenshareSuffix)\n\t\t\t\t\t)\n\t\t\t\t\t\treturn 1\n\n\t\t\t\t\t// sort by activity\n\t\t\t\t\treturn (activityRecord[b.id] ?? 0) - (activityRecord[a.id] ?? 0)\n\t\t\t\t})\n\t\t\t\t.slice(0, limit),\n\t\t[activityRecord, limit, self?.id, usersAndScreenshares]\n\t)\n\n\tconst newUsers = useMemo(\n\t\t() =>\n\t\t\tusersAndScreenshares.filter((a) => activityRecord[a.id] === undefined),\n\t\t[activityRecord, usersAndScreenshares]\n\t)\n\n\tuseEffect(() => {\n\t\tnewUsers.forEach(recordActivity)\n\t}, [newUsers, recordActivity])\n\n\tuseEffect(() => {\n\t\tsetActorsOnStage((actorsAlreadyOnStage) =>\n\t\t\tresolveRoster(actorsAlreadyOnStage, actorsThatShouldBeOnStage)\n\t\t)\n\t}, [actorsThatShouldBeOnStage, limit])\n\n\treturn { actorsOnStage, recordActivity }\n}\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/utils/isNonNullable.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419122.8958\";\n}\n// REMIX HMR END\n\nexport default function isNonNullable<T>(\n\tvalue: T | null | undefined\n): value is NonNullable<T> {\n\treturn value !== null && value !== undefined\n}\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/utils/rxjs/ewma.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419125.9277\";\n}\n// REMIX HMR END\n\nimport { Observable } from 'rxjs'\nimport Ewma from '../ewma'\n\nexport const ewma =\n\t(halflifeTime: number, defaultValue = 0) =>\n\t(observable: Observable<number>) =>\n\t\tnew Observable<number>((subscribe) => {\n\t\t\tconst ewma = new Ewma(halflifeTime, defaultValue)\n\t\t\tobservable.subscribe({\n\t\t\t\t...subscribe,\n\t\t\t\tnext: (value) => {\n\t\t\t\t\tewma.insert(value)\n\t\t\t\t\tsubscribe.next(ewma.value())\n\t\t\t\t},\n\t\t\t})\n\t\t})\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/utils/rxjs/getPacketLoss$.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419126.1663\";\n}\n// REMIX HMR END\n\nimport type { Observable } from 'rxjs'\nimport { combineLatest, interval, map, pairwise, switchMap } from 'rxjs'\n\nexport interface PacketLossStats {\n\tinboundPacketLossPercentage: number\n\toutboundPacketLossPercentage: number\n}\n\nfunction statsReports$(\n\tpeerConnection$: Observable<RTCPeerConnection>,\n\tstatReportInterval = 3000\n) {\n\treturn combineLatest([peerConnection$, interval(statReportInterval)]).pipe(\n\t\tswitchMap(([peerConnection]) => peerConnection.getStats()),\n\t\tpairwise()\n\t)\n}\n\nexport function getPacketLoss$(\n\tpeerConnection$: Observable<RTCPeerConnection>,\n\ttracks$: Observable<MediaStreamTrack[]>\n) {\n\treturn combineLatest([\n\t\ttracks$,\n\t\tpeerConnection$,\n\t\tstatsReports$(peerConnection$),\n\t]).pipe(\n\t\tmap(([tracks, peerConnection, [previousStatsReport, newStatsReport]]) => {\n\t\t\tconst trackToMidMap = peerConnection\n\t\t\t\t.getTransceivers()\n\t\t\t\t.reduce((map, t) => {\n\t\t\t\t\tconst track = t.sender.track ?? t.receiver.track\n\t\t\t\t\tif (track !== null && t.mid !== null) {\n\t\t\t\t\t\tmap.set(track, t.mid)\n\t\t\t\t\t}\n\t\t\t\t\treturn map\n\t\t\t\t}, new Map<MediaStreamTrack, string>())\n\t\t\tconst relevantMids = new Set<string>()\n\t\t\tfor (const track of tracks) {\n\t\t\t\tconst mid = trackToMidMap.get(track)\n\t\t\t\tif (mid) {\n\t\t\t\t\trelevantMids.add(mid)\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet inboundPacketsReceived = 0\n\t\t\tlet inboundPacketsLost = 0\n\t\t\tlet outboundPacketsSent = 0\n\t\t\tlet outboundPacketsLost = 0\n\n\t\t\tnewStatsReport.forEach((report) => {\n\t\t\t\tif (!relevantMids.has(report.mid)) return\n\t\t\t\tconst previous = previousStatsReport.get(report.id)\n\t\t\t\tif (!previous) return\n\n\t\t\t\tif (report.type === 'inbound-rtp') {\n\t\t\t\t\tinboundPacketsLost += report.packetsLost - previous.packetsLost\n\t\t\t\t\tinboundPacketsReceived +=\n\t\t\t\t\t\treport.packetsReceived - previous.packetsReceived\n\t\t\t\t} else if (report.type === 'outbound-rtp') {\n\t\t\t\t\tconst packetsSent = report.packetsSent - previous.packetsSent\n\t\t\t\t\t// Find the corresponding remote-inbound-rtp report\n\t\t\t\t\tconst remoteInboundReport = Array.from(newStatsReport.values()).find(\n\t\t\t\t\t\t(r) => r.type === 'remote-inbound-rtp' && r.ssrc === report.ssrc\n\t\t\t\t\t)\n\t\t\t\t\tconst previousRemoteInboundReport = Array.from(\n\t\t\t\t\t\tpreviousStatsReport.values()\n\t\t\t\t\t).find(\n\t\t\t\t\t\t(r) => r.type === 'remote-inbound-rtp' && r.ssrc === previous.ssrc\n\t\t\t\t\t)\n\t\t\t\t\tif (\n\t\t\t\t\t\tremoteInboundReport &&\n\t\t\t\t\t\tpreviousRemoteInboundReport &&\n\t\t\t\t\t\tpacketsSent > 0\n\t\t\t\t\t) {\n\t\t\t\t\t\toutboundPacketsSent += report.packetsSent - previous.packetsSent\n\t\t\t\t\t\toutboundPacketsLost +=\n\t\t\t\t\t\t\tremoteInboundReport.packetsLost -\n\t\t\t\t\t\t\tpreviousRemoteInboundReport.packetsLost\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tlet packetsLost = inboundPacketsLost + outboundPacketsLost\n\t\t\tlet packetsSent =\n\t\t\t\tinboundPacketsReceived + outboundPacketsSent + packetsLost\n\t\t\tlet packetLossPercentage = 0\n\n\t\t\tif (packetsSent > 0) {\n\t\t\t\tpacketLossPercentage = Math.max(0, packetsLost / packetsSent)\n\t\t\t}\n\n\t\t\treturn packetLossPercentage\n\t\t})\n\t)\n}\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/hooks/usePulledVideoTrack.tsx\"\n);\nimport.meta.hot.lastModified = \"1738073419116.95\";\n}\n// REMIX HMR END\n\nimport { useObservableAsValue, useValueAsObservable } from 'partytracks/react'\nimport { useMemo } from 'react'\nimport { of, switchMap } from 'rxjs'\nimport { useRoomContext } from '~/hooks/useRoomContext'\nimport type { TrackObject } from '~/utils/callsTypes'\n\nexport function usePulledVideoTrack(video: string | undefined) {\n\tconst { partyTracks } = useRoomContext()\n\n\tconst [sessionId, trackName] = video?.split('/') ?? []\n\tconst trackObject = useMemo(\n\t\t() =>\n\t\t\tsessionId && trackName\n\t\t\t\t? ({\n\t\t\t\t\t\ttrackName,\n\t\t\t\t\t\tsessionId,\n\t\t\t\t\t\tlocation: 'remote',\n\t\t\t\t\t} satisfies TrackObject)\n\t\t\t\t: undefined,\n\t\t[sessionId, trackName]\n\t)\n\n\tconst trackObject$ = useValueAsObservable(trackObject)\n\tconst pulledTrack$ = useMemo(\n\t\t() =>\n\t\t\ttrackObject$.pipe(\n\t\t\t\tswitchMap((track) =>\n\t\t\t\t\ttrack ? partyTracks.pull(of(track)) : of(undefined)\n\t\t\t\t)\n\t\t\t),\n\t\t[partyTracks, trackObject$]\n\t)\n\treturn useObservableAsValue(pulledTrack$)\n}\n", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/AudioGlow.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/AudioGlow.tsx\");\n  import.meta.hot.lastModified = \"1738073419110.4277\";\n}\n// REMIX HMR END\n\nimport useAudioLevel from '~/hooks/useAudioLevel';\nimport { cn } from '~/utils/style';\nexport const AudioGlow = ({\n  audioTrack,\n  children,\n  className,\n  type\n}) => {\n  _s();\n  const audioLevel = useAudioLevel(audioTrack);\n  return <span className={cn(type === 'text' ? 'orange-glow-text' : 'orange-glow-box', 'opacity-[--opacity] transition-opacity', className)} style={{\n    '--opacity': Math.min(1, audioLevel * 4)\n  }} aria-hidden>\n\t\t\t{children}\n\t\t</span>;\n};\n_s(AudioGlow, \"eP3P6R8HO7u6c8gBbP7H3MTn6kE=\", false, function () {\n  return [useAudioLevel];\n});\n_c = AudioGlow;\nvar _c;\n$RefreshReg$(_c, \"AudioGlow\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/ConnectionIndicator.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/ConnectionIndicator.tsx\");\n  import.meta.hot.lastModified = \"1738073419111.0886\";\n}\n// REMIX HMR END\n\nimport { useState } from 'react';\nimport { cn } from '~/utils/style';\nimport { Icon } from './Icon/Icon';\nimport { Tooltip } from './Tooltip';\nexport function getConnectionQuality(packetLoss) {\n  if (packetLoss > 0.05) return 'bad';\n  if (packetLoss > 0.03) return 'unhealthy';\n  if (packetLoss > 0.01) return 'tolerable';\n  return 'healthy';\n}\nexport function ConnectionIndicator(props) {\n  _s();\n  const [open, setOpen] = useState(false);\n  return <Tooltip open={open} onOpenChange={setOpen} content={`Connection is ${props.quality}`}>\n\t\t\t<button onClick={() => setOpen(!open)}>\n\t\t\t\t<Icon className={cn(props.quality === 'healthy' && 'text-green-400', props.quality === 'tolerable' && 'text-green-400', props.quality === 'unhealthy' && 'text-yellow-400', props.quality === 'bad' && 'text-red-400')} type={props.quality === 'bad' || props.quality === 'unhealthy' ? 'SignalSlashIcon' : 'SignalIcon'} />\n\t\t\t</button>\n\t\t</Tooltip>;\n}\n_s(ConnectionIndicator, \"xG1TONbKtDWtdOTrXaTAsNhPg/Q=\");\n_c = ConnectionIndicator;\nvar _c;\n$RefreshReg$(_c, \"ConnectionIndicator\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/HoverFade.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/HoverFade.tsx\");\n  import.meta.hot.lastModified = \"1738073419111.6807\";\n}\n// REMIX HMR END\n\nimport { useEffect, useState } from 'react';\nimport { cn } from '~/utils/style';\nexport const HoverFade = ({\n  timeout = 2000,\n  children,\n  className\n}) => {\n  _s();\n  const [activity, setActivity] = useState(0);\n  const [visible, setVisible] = useState(false);\n  useEffect(() => {\n    let mounted = true;\n    if (visible) {\n      const t = setTimeout(() => {\n        if (mounted) setVisible(false);\n      }, timeout);\n      return () => {\n        clearTimeout(t);\n      };\n    }\n    // include activity to reset timeout when new activity is recorded\n  }, [timeout, visible, activity]);\n  return <div className={cn('hover-fade', !visible && 'inactive', className)}\n  // visible={visible}\n  onPointerLeave={() => {\n    setVisible(false);\n  }} onPointerMove={() => {\n    setVisible(true);\n    setActivity(Date.now());\n  }}>\n\t\t\t{children}\n\t\t</div>;\n};\n_s(HoverFade, \"hc+syEWKR/jT501urlU6YRxufBI=\");\n_c = HoverFade;\nvar _c;\n$RefreshReg$(_c, \"HoverFade\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/RaiseHandButton.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/RaiseHandButton.tsx\");\n  import.meta.hot.lastModified = \"1738073419113.543\";\n}\n// REMIX HMR END\n\nimport { playSound } from '~/utils/playSound';\nimport { Button } from './Button';\nimport { Icon } from './Icon/Icon';\nimport { Tooltip } from './Tooltip';\nexport const RaiseHandButton = ({\n  raisedHand,\n  onClick\n}) => <Tooltip content={raisedHand ? 'Lower hand' : 'Raise Hand'}>\n\t\t<Button displayType={raisedHand ? 'primary' : 'secondary'} onClick={_e => {\n    onClick && onClick();\n    if (!raisedHand) playSound('raiseHand');\n  }}>\n\t\t\t<Icon type=\"handRaised\" />\n\t\t</Button>\n\t</Tooltip>;\n_c = RaiseHandButton;\nvar _c;\n$RefreshReg$(_c, \"RaiseHandButton\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/components/ScreenshareButton.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/components/ScreenshareButton.tsx\");\n  import.meta.hot.lastModified = \"1738073419114.6582\";\n}\n// REMIX HMR END\n\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\nimport { useEffect, useState } from 'react';\nimport { useRoomContext } from '~/hooks/useRoomContext';\nimport { Button } from './Button';\nimport { Icon } from './Icon/Icon';\nimport { Tooltip } from './Tooltip';\nexport const ScreenshareButton = () => {\n  _s();\n  const {\n    userMedia: {\n      screenShareVideoTrack,\n      startScreenShare,\n      endScreenShare\n    },\n    room: {\n      otherUsers\n    }\n  } = useRoomContext();\n  const otherUserIsSharing = otherUsers.some(u => u.tracks.screenshare);\n  const sharing = screenShareVideoTrack !== undefined;\n  const [canShareScreen, setCanShareScreen] = useState(true);\n\n  // setting this in a useEffect because we need to do this feature\n  // detection to remove it for iOS, but the feature detection also\n  // doesn't work on the server, so it causes a mismatch between\n  // the server/client that React doesn't like\n  useEffect(() => {\n    setCanShareScreen(typeof navigator.mediaDevices !== 'undefined' && navigator.mediaDevices.getDisplayMedia !== undefined);\n  }, []);\n  if (!canShareScreen) return null;\n  return <Tooltip content={otherUserIsSharing ? 'Someone else is sharing' : sharing ? 'Stop sharing' : 'Share screen'}>\n\t\t\t<Button displayType={sharing ? 'danger' : 'secondary'} disabled={otherUserIsSharing} onClick={sharing ? endScreenShare : startScreenShare}>\n\t\t\t\t<VisuallyHidden>Share screen</VisuallyHidden>\n\t\t\t\t<Icon type=\"screenshare\" />\n\t\t\t</Button>\n\t\t</Tooltip>;\n};\n_s(ScreenshareButton, \"IiN+g5X68IERIk+K7jxKiPHb++E=\", false, function () {\n  return [useRoomContext];\n});\n_c = ScreenshareButton;\nvar _c;\n$RefreshReg$(_c, \"ScreenshareButton\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/hooks/useBroadcastStatus.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419116.157\";\n}\n// REMIX HMR END\n\nimport { useEffect } from 'react'\nimport { useUnmount } from 'react-use'\nimport type { ClientMessage, User } from '~/types/Messages'\n\nimport type PartySocket from 'partysocket'\nimport type { PartyTracks } from 'partytracks/client'\nimport { useObservableAsValue } from 'partytracks/react'\nimport type { RoomContextType } from './useRoomContext'\nimport type { UserMedia } from './useUserMedia'\n\ninterface Config {\n\tuserMedia: UserMedia\n\tpartyTracks: PartyTracks\n\tidentity?: User\n\twebsocket: PartySocket\n\tpushedTracks: RoomContextType['pushedTracks']\n\traisedHand: boolean\n\tspeaking: boolean\n}\n\nexport default function useBroadcastStatus({\n\tuserMedia,\n\tidentity,\n\twebsocket,\n\tpartyTracks,\n\tpushedTracks,\n\traisedHand,\n\tspeaking,\n}: Config) {\n\tconst {\n\t\taudioEnabled,\n\t\tvideoEnabled,\n\t\tscreenShareEnabled,\n\t\taudioUnavailableReason,\n\t} = userMedia\n\tconst { audio, video, screenshare } = pushedTracks\n\tconst { sessionId } = useObservableAsValue(partyTracks.session$) ?? {}\n\tconst audioUnavailable = audioUnavailableReason !== undefined\n\n\tconst id = identity?.id\n\tconst name = identity?.name\n\tuseEffect(() => {\n\t\tif (id && name) {\n\t\t\tconst user: User = {\n\t\t\t\tid,\n\t\t\t\tname,\n\t\t\t\tjoined: true,\n\t\t\t\traisedHand,\n\t\t\t\tspeaking,\n\t\t\t\ttransceiverSessionId: sessionId,\n\t\t\t\ttracks: {\n\t\t\t\t\taudioEnabled,\n\t\t\t\t\taudioUnavailable,\n\t\t\t\t\tvideoEnabled,\n\t\t\t\t\tscreenShareEnabled,\n\t\t\t\t\tvideo,\n\t\t\t\t\taudio,\n\t\t\t\t\tscreenshare,\n\t\t\t\t},\n\t\t\t}\n\n\t\t\tfunction sendUserUpdate() {\n\t\t\t\twebsocket.send(\n\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\ttype: 'userUpdate',\n\t\t\t\t\t\tuser,\n\t\t\t\t\t} satisfies ClientMessage)\n\t\t\t\t)\n\t\t\t}\n\n\t\t\t// let's send our userUpdate right away\n\t\t\tsendUserUpdate()\n\n\t\t\t// anytime we reconnect, we need to resend our userUpdate\n\t\t\twebsocket.addEventListener('open', sendUserUpdate)\n\n\t\t\treturn () => websocket.removeEventListener('open', sendUserUpdate)\n\t\t}\n\t}, [\n\t\tid,\n\t\tname,\n\t\twebsocket,\n\t\tsessionId,\n\t\taudio,\n\t\tvideo,\n\t\tscreenshare,\n\t\taudioEnabled,\n\t\tvideoEnabled,\n\t\tscreenShareEnabled,\n\t\traisedHand,\n\t\tspeaking,\n\t\taudioUnavailableReason,\n\t\taudioUnavailable,\n\t])\n\n\tuseUnmount(() => {\n\t\tif (id && name) {\n\t\t\twebsocket.send(\n\t\t\t\tJSON.stringify({\n\t\t\t\t\ttype: 'userUpdate',\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tjoined: false,\n\t\t\t\t\t\traisedHand,\n\t\t\t\t\t\tspeaking,\n\t\t\t\t\t\ttransceiverSessionId: sessionId,\n\t\t\t\t\t\ttracks: {\n\t\t\t\t\t\t\taudioUnavailable,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t} satisfies ClientMessage)\n\t\t\t)\n\t\t}\n\t})\n}\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/hooks/useShowDebugInfoShortcut.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419117.4788\";\n}\n// REMIX HMR END\n\nimport { useEffect } from 'react'\nimport { useRoomContext } from './useRoomContext'\n\nexport function useShowDebugInfoShortcut() {\n\tconst { showDebugInfo, setShowDebugInfo } = useRoomContext()\n\n\tuseEffect(() => {\n\t\tconst handler = (e: KeyboardEvent) => {\n\t\t\tif (e.key.toLowerCase() === 'd' && e.ctrlKey) {\n\t\t\t\te.preventDefault()\n\t\t\t\tsetShowDebugInfo(!showDebugInfo)\n\t\t\t}\n\t\t}\n\t\tdocument.addEventListener('keypress', handler)\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keypress', handler)\n\t\t}\n\t}, [setShowDebugInfo, showDebugInfo])\n}\n", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app/hooks/useSounds.ts\"\n);\nimport.meta.hot.lastModified = \"1738073419117.5522\";\n}\n// REMIX HMR END\n\nimport { useEffect } from 'react'\nimport { useMount, usePrevious, useUnmount } from 'react-use'\nimport type { User } from '~/types/Messages'\nimport { playSound } from '~/utils/playSound'\n\nexport default function useSounds(users: User[]) {\n\tconst previousUserCount = usePrevious(users.length)\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tusers.length > 5 ||\n\t\t\tpreviousUserCount === undefined ||\n\t\t\tpreviousUserCount === users.length\n\t\t)\n\t\t\treturn\n\t\tif (users.length > previousUserCount) {\n\t\t\tplaySound('join')\n\t\t} else {\n\t\t\tplaySound('leave')\n\t\t}\n\t}, [previousUserCount, users.length])\n\n\tconst raisedHandCound = users.filter((u) => u.raisedHand).length\n\tconst previousHandRaisedCount = usePrevious(raisedHandCound)\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tpreviousHandRaisedCount === undefined ||\n\t\t\traisedHandCound === previousHandRaisedCount\n\t\t) {\n\t\t\treturn\n\t\t}\n\t\tif (raisedHandCound > previousHandRaisedCount) {\n\t\t\tplaySound('raiseHand')\n\t\t}\n\t}, [raisedHandCound, previousHandRaisedCount])\n\n\tuseMount(() => {\n\t\tplaySound('join')\n\t})\n\n\tuseUnmount(() => {\n\t\tplaySound('leave')\n\t})\n}\n", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/hooks/useUserJoinLeaveToasts.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/hooks/useUserJoinLeaveToasts.tsx\");\n  import.meta.hot.lastModified = \"1738073419117.8704\";\n}\n// REMIX HMR END\n\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\nimport { useEffect, useState } from 'react';\nimport { OptionalLink } from '~/components/OptionalLink';\nimport Toast, { useDispatchToast } from '~/components/Toast';\nimport populateTraceLink from '~/utils/populateTraceLink';\nimport { useRoomContext } from './useRoomContext';\nimport { useUserMetadata } from './useUserMetadata';\nfunction UserJoinedOrLeftToast(props) {\n  _s();\n  const {\n    traceLink\n  } = useRoomContext();\n  const {\n    data\n  } = useUserMetadata(props.user.name);\n  return <div className=\"flex items-center justify-center gap-2 text-sm\">\n\t\t\t<Toast.Title>\n\t\t\t\t<OptionalLink href={props.user.transceiverSessionId ? populateTraceLink(props.user.transceiverSessionId, traceLink) : undefined} target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\t{data?.displayName}\n\t\t\t\t</OptionalLink>{' '}\n\t\t\t\t{props.type}\n\t\t\t</Toast.Title>\n\t\t\t<Toast.Close className=\"flex items-center justify-center w-5 h-5 px-1 rounded hover:bg-zinc-200 dark:hover:bg-zinc-600\">\n\t\t\t\t<span aria-hidden>\u00D7</span>\n\t\t\t\t<VisuallyHidden>Dismiss</VisuallyHidden>\n\t\t\t</Toast.Close>\n\t\t</div>;\n}\n_s(UserJoinedOrLeftToast, \"9Q/NPvAI5LaMd8Nz/PsChtpCCmc=\", false, function () {\n  return [useRoomContext, useUserMetadata];\n});\n_c = UserJoinedOrLeftToast;\nexport function useUserJoinLeaveToasts(users) {\n  _s2();\n  const [trackedUsers, setTrackedUsers] = useState(users);\n  const dispatchToast = useDispatchToast();\n  useEffect(() => {\n    const newUsers = users.filter(u => !trackedUsers.some(tu => tu.id === u.id));\n    const usersLeft = trackedUsers.filter(u => !users.some(tu => tu.id === u.id));\n    newUsers.forEach(u => dispatchToast(<UserJoinedOrLeftToast user={u} type=\"joined\" />));\n    usersLeft.forEach(u => dispatchToast(<UserJoinedOrLeftToast user={u} type=\"left\" />));\n  }, [dispatchToast, trackedUsers, users]);\n  useEffect(() => {\n    setTrackedUsers(users);\n  }, [users]);\n}\n_s2(useUserJoinLeaveToasts, \"rC6VxHiuplQqrYYNF/bE3WoSunQ=\", false, function () {\n  return [useDispatchToast];\n});\nvar _c;\n$RefreshReg$(_c, \"UserJoinedOrLeftToast\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AACA,WAAO,eAAe,SAAS,cAAc,EAAE,OAAO,KAAK,CAAC;AAC5D,YAAQ,cAAc,QAAQ,YAAY,QAAQ,MAAM,QAAQ,KAAK,QAAQ,OAAO;AACpF,QAAI,OAAO,WAAY;AAAA,IAAE;AACzB,YAAQ,OAAO;AACf,aAAS,GAAG,KAAK;AACb,UAAI,OAAO,CAAC;AACZ,eAAS,KAAK,GAAG,KAAK,UAAU,QAAQ,MAAM;AAC1C,aAAK,KAAK,CAAC,IAAI,UAAU,EAAE;AAAA,MAC/B;AACA,UAAI,OAAO,IAAI,kBAAkB;AAC7B,YAAI,iBAAiB,MAAM,KAAK,IAAI;AAAA,MACxC;AAAA,IACJ;AACA,YAAQ,KAAK;AACb,aAAS,IAAI,KAAK;AACd,UAAI,OAAO,CAAC;AACZ,eAAS,KAAK,GAAG,KAAK,UAAU,QAAQ,MAAM;AAC1C,aAAK,KAAK,CAAC,IAAI,UAAU,EAAE;AAAA,MAC/B;AACA,UAAI,OAAO,IAAI,qBAAqB;AAChC,YAAI,oBAAoB,MAAM,KAAK,IAAI;AAAA,MAC3C;AAAA,IACJ;AACA,YAAQ,MAAM;AACd,YAAQ,YAAY,OAAO,WAAW;AACtC,YAAQ,cAAc,OAAO,cAAc;AAAA;AAAA;;;AC1B3C;AAAA;AAAA;AACA,WAAO,eAAe,SAAS,cAAc,EAAE,OAAO,KAAK,CAAC;AAC5D,QAAI,UAAU;AACd,QAAI,SAAS;AACb,QAAI,4BAA4B,OAAO,YAAY,QAAQ,kBAAkB,QAAQ;AACrF,YAAQ,UAAU;AAAA;AAAA;;;ACLlB;AAAA;AAAA;AACA,WAAO,eAAe,SAAS,cAAc,EAAE,OAAO,KAAK,CAAC;AAC5D,QAAI,UAAU;AACd,QAAI,UAAU;AACd,QAAI,8BAA8B,QAAQ,gBAAgB,mCAAsC;AAChG,QAAI,SAAS;AACb,QAAI,eAAe;AAAA,MACf,GAAG;AAAA,MACH,GAAG;AAAA,MACH,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,KAAK;AAAA,MACL,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,OAAO;AAAA,IACX;AACA,aAASA,cAAa;AAClB,UAAI,KAAK,QAAQ,SAAS,IAAI,GAAG,UAAU,GAAG,CAAC,GAAG,MAAM,GAAG,CAAC;AAC5D,UAAI,KAAK,QAAQ,SAAS,YAAY,GAAG,OAAO,GAAG,CAAC,GAAG,UAAU,GAAG,CAAC;AACrE,UAAI,WAAW,QAAQ,QAAQ,WAAY;AACvC,eAAO,IAAI,OAAO,eAAe,SAAU,SAAS;AAChD,cAAI,QAAQ,CAAC,GAAG;AACZ,gBAAIC,MAAK,QAAQ,CAAC,EAAE,aAAaC,KAAID,IAAG,GAAGE,KAAIF,IAAG,GAAG,QAAQA,IAAG,OAAO,SAASA,IAAG,QAAQ,QAAQA,IAAG,KAAK,OAAOA,IAAG,MAAM,SAASA,IAAG,QAAQ,QAAQA,IAAG;AAC1J,oBAAQ,EAAE,GAAGC,IAAG,GAAGC,IAAG,OAAc,QAAgB,KAAK,OAAO,MAAY,QAAgB,MAAa,CAAC;AAAA,UAC9G;AAAA,QACJ,CAAC;AAAA,MACL,GAAG,CAAC,CAAC;AACL,kCAA4B,QAAQ,WAAY;AAC5C,YAAI,CAAC;AACD;AACJ,iBAAS,QAAQ,OAAO;AACxB,eAAO,WAAY;AACf,mBAAS,WAAW;AAAA,QACxB;AAAA,MACJ,GAAG,CAAC,OAAO,CAAC;AACZ,aAAO,CAAC,KAAK,IAAI;AAAA,IACrB;AACA,YAAQ,UAAU,OAAO,aAAa,OAAO,OAAO,mBAAmB,cACjEH,cACC,WAAY;AAAE,aAAO,CAAC,OAAO,MAAM,YAAY;AAAA,IAAG;AAAA;AAAA;;;ACjBzD,wBAAqB;AAErB,IAAAI,iBAAoC;;;ACDpC,IAAAC,gBAAqD;;;;;;;;;;;;;;;ACrBrD,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AASA,IAAM,YAAY,UAAU,SAAmC;AAC9D;AAAA,IACC,CAAC,KAAK,KAAK,CAACC,OAAMA,cAAa,OAAO;AAAA,IACtC;AAAA,EACD;AACA,QAAM,QAAQ,oBAAI,IAAsB;AACxC,QAAM,MAAM,KAAK,UAAU,IAAI;AAC/B,MAAI,SAAS,MAAM,IAAI,GAAG;AAC1B,MAAI,QAAQ;AACX,WAAO,OAAO,MAAM;AAAA,EACrB,OAAO;AACN,aAAS,MAAM,MAAM,GAAG,IAAI;AAC5B,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,OAAO,MAAM;AAAA,EACrB;AACD;AAEA,IAAM,SAAS;AAAA,EACd;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD;AAEA,IAAM,YAAY;AAAA,EACjB,MAAM;AAAA,EACN,OAAO;AAAA,EACP,WAAW;AAAA,EACX,SAAS;AACV;AAEA,eAAsB,UAAU,OAA4B;AAC3D,QAAM,cAAc,MAAM,UAAU,OAAO,KAAK,CAAC,EAAE;AAAA,IAAK,CAAC,QACxD,IAAI,YAAY;AAAA,EACjB;AACA,QAAM,UAAU,IAAI,aAAa;AACjC,QAAM,cAAc,MAAM,QAAQ,gBAAgB,WAAW;AAC7D,QAAM,SAAS,QAAQ,mBAAmB;AAC1C,QAAM,WAAW,QAAQ,WAAW;AACpC,SAAO,SAAS;AAChB,SAAO,QAAQ,QAAQ;AACvB,WAAS,QAAQ,QAAQ,WAAW;AACpC,WAAS,KAAK,eAAe,UAAU,KAAK,GAAG,QAAQ,WAAW;AAClE,SAAO,MAAM;AACd;;;AC3DA,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;;;ACNA,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAKO,IAAM,uBAAuB,IAAI;AAAA,EACvC,CAAC,eAAe;AACf,UAAM,eAAe,IAAI,OAAO,aAAa;AAE7C,UAAM,aAAa,aAAa,iBAAiB;AACjD,eAAW,OAAO;AAClB,eAAW,UAAU,eAAe,IAAI,aAAa,WAAW;AAEhE,UAAM,WAAW,aAAa,WAAW;AACzC,aAAS,KAAK,eAAe,MAAM,aAAa,WAAW;AAE3D,eAAW,QAAQ,QAAQ;AAE3B,UAAM,cAAc,aAAa,6BAA6B;AAC9D,aAAS,QAAQ,WAAW;AAE5B,eAAW,MAAM;AAEjB,UAAM,QAAQ,YAAY,OAAO,eAAe,EAAE,CAAC;AAEnD,eAAW,KAAK,KAAK;AACrB,WAAO,MAAM;AACZ,YAAM,KAAK;AACX,mBAAa,MAAM;AAAA,IACpB;AAAA,EACD;AACD;;;AHqFS;AA3HT,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,4CAA8C,EAAE;AAAA,EACzF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAI,KAAK,aAAa;AAAtB,IACE,MAAM,aAAa;AAErB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAuC;AACvC,cAAY,IAAI,eAAe;AACjC;AAUA,SAAS,oBAAoB;AAAA,EAC3B;AAAA,EACA;AACF,GAAG;AACD,KAAG;AACH,QAAM,CAAC,eAAe,gBAAgB,QAAI,wBAAS,KAAK;AACxD,QAAM,gBAAY,sBAAO,IAAI;AAC7B,+BAAU,MAAM;AACd,UAAM,SAAS,UAAU;AACzB,QAAI,UAAU;AACd,UAAM,UAAU,MAAM;AACpB,UAAI,CAAC,UAAU;AACb,yBAAiB,IAAI;AACrB,qBAAa,OAAO;AAAA,MACtB;AAAA,IACF;AACA,UAAM,WAAW,MAAM;AACrB,gBAAU,OAAO,WAAW,MAAM;AAChC,yBAAiB,KAAK;AAAA,MACxB,GAAG,GAAG;AAAA,IACR;AACA,UAAM,YAAY,CAAAC,OAAK;AACrB,UAAIA,GAAE,IAAI,YAAY,MAAM,IAAI,YAAY,GAAG;AAC7C,gBAAQ;AAAA,MACV;AAAA,IACF;AACA,UAAM,UAAU,CAAAA,OAAK;AACnB,UAAIA,GAAE,IAAI,YAAY,MAAM,IAAI,YAAY,GAAG;AAC7C,iBAAS;AAAA,MACX;AAAA,IACF;AACA,aAAS,iBAAiB,WAAW,SAAS;AAC9C,aAAS,iBAAiB,SAAS,OAAO;AAC1C,aAAS,iBAAiB,QAAQ,QAAQ;AAC1C,YAAQ,iBAAiB,eAAe,OAAO;AAC/C,YAAQ,iBAAiB,aAAa,QAAQ;AAC9C,WAAO,MAAM;AACX,mBAAa,OAAO;AACpB,eAAS,oBAAoB,WAAW,SAAS;AACjD,eAAS,oBAAoB,SAAS,OAAO;AAC7C,eAAS,oBAAoB,QAAQ,QAAQ;AAC7C,cAAQ,oBAAoB,eAAe,OAAO;AAClD,cAAQ,oBAAoB,aAAa,QAAQ;AAAA,IACnD;AAAA,EACF,GAAG,CAAC,UAAU,GAAG,CAAC;AAClB,SAAO,CAAC,eAAe,SAAS;AAClC;AACA,GAAG,qBAAqB,8BAA8B;AAC/C,SAAS,sBAAsB;AACpC,MAAI;AACJ,QAAM;AAAA,IACJ;AAAA,IACA,MAAM;AAAA,MACJ;AAAA,MACA,WAAW;AAAA,QACT,IAAI;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IACA,WAAW;AAAA,MACT;AAAA,MACA;AAAA,IACF;AAAA,EACF,IAAI,eAAe;AACnB,QAAM,aAAa,oBAAoB,UAAU;AACjD,QAAM,WAAW,CAAC,cAAc,oBAAoB;AACpD,QAAM,CAAC,mBAAmB,aAAa,IAAI,oBAAoB;AAAA,IAC7D,KAAK;AAAA,IACL;AAAA,EACF,CAAC;AACD,QAAM,qBAAqB,qBAAqB,iBAAiB;AACjE,QAAM,kBAAc,uBAAQ,MAAM,mBAAmB,KAAK,UAAU,aAAW,UAAU,oBAAoB,oBAAoB,CAAC,GAAG,CAAC,oBAAoB,iBAAiB,CAAC;AAC5K,QAAM,0BAAsB,uBAAQ,MAAM,YAAY,KAAK,WAAW,GAAG,CAAC,aAAa,WAAW,CAAC;AACnG,QAAM,qBAAqB,qBAAqB,mBAAmB;AACnE,+BAAU,MAAM;AACd,QAAI,qBAAqB,oBAAoB;AAC3C,gBAAU;AACV,cAAQ,IAAI,iCAA0B;AACtC,gBAAU,KAAK,KAAK,UAAU;AAAA,QAC5B,MAAM;AAAA,QACN,OAAO;AAAA,MACT,CAAC,CAAC;AAAA,IACJ,OAAO;AACL,cAAQ,IAAI,qCAA8B;AAC1C,gBAAU,KAAK,KAAK,UAAU;AAAA,QAC5B,MAAM;AAAA,MACR,CAAC,CAAC;AAAA,IACJ;AAAA,EACF,GAAG,CAAC,mBAAmB,oBAAoB,WAAW,SAAS,CAAC;AAChE,+BAAU,MAAM;AACd,QAAI,oBAAoB,QAAW;AACjC,gBAAU,SAAS;AAAA,IACrB;AAAA,EACF,GAAG,CAAC,eAAe,CAAC;AACpB,SAAO,mDAAC,UAAO,WAAU,uBAAsB,UAAoB,KAAK,eACtE,uBAAa,sBAAsB,wBAD9B;AAAA;AAAA;AAAA;AAAA,SAEP;AACF;AACA,IAAI,qBAAqB,gCAAgC,OAAO,WAAY;AAC1E,SAAO,CAAC,gBAAgB,qBAAqB,sBAAsB,oBAAoB;AACzF,CAAC;AACD,KAAK;AACL,IAAI;AACJ,aAAa,IAAI,qBAAqB;AAEtC,OAAO,eAAe;AACtB,OAAO,eAAe;;;AIlHtB,IAAAC,gBAAyB;AAmBrB,IAAAC,0BAAA;AAxCJ,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,wCAA0C,EAAE;AAAA,EACrF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,MAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAmC;AACnC,cAAY,IAAI,eAAe;AACjC;AAQA,IAAM,WAAW,CAAC,SAAS,OAAO,UAAU,SAAS,QAAQ,QAAQ,WAAW,OAAO;AAChF,SAAS,eAAe,OAAO;AACpC,EAAAA,IAAG;AACH,QAAM,CAAC,MAAM,OAAO,QAAI,wBAAS,KAAK;AACtC,QAAM;AAAA,IACJ,MAAM;AAAA,MACJ;AAAA,IACF;AAAA,EACF,IAAI,eAAe;AACnB,QAAM,CAAC,MAAM,IAAI,gBAAgB;AACjC,QAAM,eAAe,OAAO,IAAI,cAAc;AAC9C,QAAM,QAAQ,OAAO,IAAI,OAAO;AAChC,SAAO,oDAAC,UAAO,MAAY,cAAc,SACvC;AAAA,UAAM;AAAA,IACP,oDAACC,SAAA,EACA;AAAA,0DAAC,mBAAD;AAAA;AAAA;AAAA;AAAA,aAAe;AAAA,MACf,oDAAC,iBACA,8DAAC,UAAK,WAAU,4BAA2B,UAAU,CAAAC,OAAK;AACrD,QAAAA,GAAE,eAAe;AACjB,kBAAU,KAAK,KAAK,UAAU;AAAA,UAC5B,MAAM;AAAA,UACN,GAAG,OAAO,YAAY,IAAI,SAASA,GAAE,aAAa,CAAC;AAAA,QACrD,CAAC,CAAC;AACF,gBAAQ,KAAK;AAAA,MACf,GACF;AAAA,4DAAC,SAAI,WAAU,uBACd;AAAA,8DAAC,SACA,8DAAC,WAAM,WAAU,eAAc,SAAQ,gBAAe,4BAAtD;AAAA;AAAA;AAAA;AAAA,iBAEA,KAHD;AAAA;AAAA;AAAA;AAAA,iBAIA;AAAA,UAEA,oDAAC,SACA,8DAAC,cAAS,WAAU,uCAAsC,IAAG,gBAAe,MAAK,gBAAe,MAAM,IAAI,cAAc,gBAAgB,gGAAxI;AAAA;AAAA;AAAA;AAAA,iBAAsO,KADvO;AAAA;AAAA;AAAA;AAAA,iBAEA;AAAA,aATD;AAAA;AAAA;AAAA;AAAA,eAUA;AAAA,QACA,oDAAC,SAAI,WAAU,uBACd;AAAA,8DAAC,SACA,8DAAC,WAAM,WAAU,eAAc,SAAQ,SAAQ,qBAA/C;AAAA;AAAA;AAAA;AAAA,iBAEA,KAHD;AAAA;AAAA;AAAA;AAAA,iBAIA;AAAA,UAEA,oDAAC,SACA,8DAAC,YAAO,WAAU,uCAAsC,IAAG,SAAQ,MAAK,SAAQ,cAAc,SAAS,OACrG,mBAAS,IAAI,CAAAC,WAAS,oDAAC,YAAmB,OAAOA,OAAM,YAAY,GACjE,UAAAA,UADiCA,QAAb;AAAA;AAAA;AAAA;AAAA,iBAEtB,CAAS,KAHX;AAAA;AAAA;AAAA;AAAA,iBAIA,KALD;AAAA;AAAA;AAAA;AAAA,iBAMA;AAAA,aAbD;AAAA;AAAA;AAAA;AAAA,eAcA;AAAA,QAEA,oDAAC,UAAO,MAAK,UAAS,WAAU,oBAAmB,yBAAnD;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,WArCD;AAAA;AAAA;AAAA;AAAA,aAsCA,KAvCD;AAAA;AAAA;AAAA;AAAA,aAwCA;AAAA,SA1CD;AAAA;AAAA;AAAA;AAAA,WA2CA;AAAA,OA7CM;AAAA;AAAA;AAAA;AAAA,SA8CP;AACF;AACAH,IAAG,gBAAgB,gCAAgC,OAAO,WAAY;AACpE,SAAO,CAAC,gBAAgB,eAAe;AACzC,CAAC;AACDI,MAAK;AACL,IAAIA;AACJ,aAAaA,KAAI,gBAAgB;AAEjC,OAAO,eAAe;AACtB,OAAO,eAAe;;;ACzEtB,IAAAC,gBAA0B;;;ACE1B,IAAAC,gBAAoD;;;ACApD,IAAAC,gBAA2C;AA6BlC,IAAAC,0BAAA;AAnDT,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,qCAAuC,EAAE;AAAA,EAClF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,MAAK,aAAa;AAAtB,IACEC,OAAM,aAAa;AAErB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAgC;AAChC,cAAY,IAAI,eAAe;AACjC;AAOO,IAAM,cAAc,CAAC;AAAA,EAC1B;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,EAAAD,IAAG;AACH,QAAM,qBAAiB,sBAAO,IAAI,YAAY,CAAC;AAC/C,QAAM,UAAM,sBAAO,IAAI;AACvB,+BAAU,MAAM;AACd,UAAM,QAAQ,IAAI;AAClB,QAAI,CAAC,MAAO;AACZ,UAAM,cAAc,eAAe;AACnC,UAAM,YAAY;AAAA,EACpB,GAAG,CAAC,CAAC;AACL,QAAM,iBAAiB,MAAM;AAC3B,UAAM,QAAQ,IAAI;AAClB,UAAM,cAAc,eAAe;AACnC,QAAI,CAAC,SAAS,CAAC,YAAa;AAI5B,UAAM,iBAAiB,WAAW,MAAM,MAAM,KAAK,GAAG;AAAA,MACpD,MAAM;AAAA,IACR,CAAC;AACD,UAAM,YAAY;AAAA,EACpB;AACA,SAAO,wFACN;AAAA,wDAAC,WAAM,KAAU,UAAQ,QAAzB;AAAA;AAAA;AAAA;AAAA,KAA0B;AAAA,IACzB,aAAa,IAAI,WAAS,oDAAC,cAAuB,OAAc,aAAa,eAAe,SAAS,cAAc,CAAC,UAAUE,WAAU;AACtI,mBAAa,UAAUA,MAAK;AAC5B,qBAAe;AAAA,IACjB,GAAG,gBAAgB,CAAC,UAAUA,WAAU;AACtC,qBAAe,UAAUA,MAAK;AAC9B,qBAAe;AAAA,IACjB,KAN2C,OAAjB;AAAA;AAAA;AAAA;AAAA,KAMvB,CAAE;AAAA,OARA;AAAA;AAAA;AAAA;AAAA,GASP;AACF;AACAF,IAAG,aAAa,8BAA8B;AAC9CG,MAAK;AACL,SAAS,WAAW;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAAG;AACD,EAAAF,KAAI;AACJ,QAAM,sBAAkB,sBAAO,YAAY;AAC3C,kBAAgB,UAAU;AAC1B,QAAM,wBAAoB,sBAAO,cAAc;AAC/C,oBAAkB,UAAU;AAC5B,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,eAAe;AACnB,QAAM,kBAAc,uBAAQ,MAAM;AAChC,UAAM,CAAC,WAAW,SAAS,IAAI,MAAM,MAAM,GAAG;AAC9C,WAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA,UAAU;AAAA,IACZ;AAAA,EACF,GAAG,CAAC,KAAK,CAAC;AACV,QAAM,mBAAe,uBAAQ,MAAM;AACjC,WAAO,YAAY,KAAK,GAAG,WAAW,CAAC;AAAA,EACzC,GAAG,CAAC,aAAa,WAAW,CAAC;AAC7B,QAAM,aAAa,qBAAqB,YAAY;AACpD,+BAAU,MAAM;AACd,QAAI,CAAC,WAAY;AACjB,gBAAY,SAAS,UAAU;AAC/B,oBAAgB,QAAQ,OAAO,UAAU;AACzC,WAAO,MAAM;AACX,kBAAY,YAAY,UAAU;AAClC,wBAAkB,QAAQ,OAAO,UAAU;AAAA,IAC7C;AAAA,EACF,GAAG,CAAC,YAAY,aAAa,KAAK,CAAC;AACnC,SAAO;AACT;AACAA,KAAI,YAAY,gCAAgC,OAAO,WAAY;AACjE,SAAO,CAAC,gBAAgB,oBAAoB;AAC9C,CAAC;AACDG,OAAM;AACN,IAAID;AAAJ,IAAQC;AACR,aAAaD,KAAI,aAAa;AAC9B,aAAaC,MAAK,YAAY;AAE9B,OAAO,eAAe;AACtB,OAAO,eAAe;;;AD9EnB,IAAAC,0BAAA;AAhCH,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,yCAA2C,EAAE;AAAA,EACtF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,MAAK,aAAa;AAAtB,IACEC,OAAM,aAAa;AADrB,IAEEC,OAAM,aAAa;AAErB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAoC;AACpC,cAAY,IAAI,eAAe;AACjC;AAKA,IAAM,wBAAoB,6BAAc,CAAC,CAAC;AACnC,IAAM,kBAAkB,CAAC;AAAA,EAC9B;AAAA,EACA;AACF,MAAM;AACJ,EAAAF,IAAG;AACH,QAAM,CAAC,eAAe,gBAAgB,QAAI,wBAAS,CAAC,CAAC;AACrD,SAAO,oDAAC,kBAAkB,UAAlB,EAA2B,OAAO,eACzC;AAAA,wDAAC,eAAY,cAAc,aAAa,cAAc,CAAC,IAAI,UAAU,iBAAiB,eAAa;AAAA,MAChG,GAAG;AAAA,MACH,CAAC,EAAE,GAAG;AAAA,IACR,EAAE,GAAG,gBAAgB,QAAM;AACzB,uBAAiB,cAAY;AAC3B,cAAM,SAAS;AAAA,UACb,GAAG;AAAA,QACL;AACA,eAAO,OAAO,EAAE;AAChB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,KAXD;AAAA;AAAA;AAAA;AAAA,KAWI;AAAA,IACH;AAAA,OAbK;AAAA;AAAA;AAAA;AAAA,GAcP;AACF;AACAA,IAAG,iBAAiB,8BAA8B;AAClDG,MAAK;AACE,SAAS,uBAAuB;AACrC,EAAAF,KAAI;AACJ,aAAO,0BAAW,iBAAiB;AACrC;AACAA,KAAI,sBAAsB,8BAA8B;AACjD,SAAS,oBAAoB,OAAO;AACzC,EAAAC,KAAI;AACJ,QAAM,SAAS,qBAAqB;AACpC,SAAO,QAAQ,OAAO,KAAK,IAAI;AACjC;AACAA,KAAI,qBAAqB,gCAAgC,OAAO,WAAY;AAC1E,SAAO,CAAC,oBAAoB;AAC9B,CAAC;AACD,IAAIC;AACJ,aAAaA,KAAI,iBAAiB;AAElC,OAAO,eAAe;AACtB,OAAO,eAAe;;;ADlEtB,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,+CAAiD,EAAE;AAAA,EAC5F;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,MAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAA0C;AAC1C,cAAY,IAAI,eAAe;AACjC;AAMO,SAAS,sBAAsB,OAAO;AAC3C,EAAAA,IAAG;AACH,QAAM,aAAa,oBAAoB,MAAM,KAAK,OAAO,KAAK;AAC9D,QAAM,aAAa,cAAc,UAAU;AAC3C,+BAAU,MAAM;AACd,QAAI,YAAY;AACd,YAAM,eAAe,MAAM,IAAI;AAAA,IACjC;AAAA,EACF,GAAG,CAAC,YAAY,KAAK,CAAC;AACtB,SAAO;AACT;AACAA,IAAG,uBAAuB,gCAAgC,OAAO,WAAY;AAC3E,SAAO,CAAC,qBAAqB,aAAa;AAC5C,CAAC;AACDC,MAAK;AACL,IAAIA;AACJ,aAAaA,KAAI,uBAAuB;AAExC,OAAO,eAAe;AACtB,OAAO,eAAe;;;AGRb,IAAAC,0BAAA;AAlCT,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,kCAAoC,EAAE;AAAA,EAC/E;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,MAAK,aAAa;AAAtB,IACEC,OAAM,aAAa;AAErB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAA6B;AAC7B,cAAY,IAAI,eAAe;AACjC;AASA,SAAS,iBAAiB;AACxB,EAAAD,IAAG;AACH,QAAM;AAAA,IACJ,MAAM;AAAA,MACJ;AAAA,IACF;AAAA,EACF,IAAI,eAAe;AACnB,SAAO,oDAAC,UAAO,SAAS,MAAM,UAAU,KAAK,KAAK,UAAU;AAAA,IAC1D,MAAM;AAAA,EACR,CAAC,CAAC,GAAG,WAAU,WAAU,aAAY,aAAY,yBAF1C;AAAA;AAAA;AAAA;AAAA,SAIP;AACF;AACAA,IAAG,gBAAgB,gCAAgC,OAAO,WAAY;AACpE,SAAO,CAAC,cAAc;AACxB,CAAC;AACDE,MAAK;AACE,SAAS,SAAS,OAAO;AAC9B,EAAAD,KAAI;AACJ,QAAM;AAAA,IACJ,MAAM;AAAA,MACJ,WAAW;AAAA,QACT,IAAI;AAAA,UACF;AAAA,UACA;AAAA,QACF;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAAA,EACF,IAAI,eAAe;AACnB,QAAM,SAAS,MAAM,KAAK,CAAAE,OAAKA,GAAE,OAAO,IAAI;AAC5C,SAAO,wFACL;AAAA,aAAS,oDAAC,UAAK,WAAU,kCAAkC,mBAAlD;AAAA;AAAA;AAAA;AAAA,WAAwD;AAAA,IACjE,SAAS,wFACR;AAAA,0DAAC,oBAAD;AAAA;AAAA;AAAA;AAAA,aAAgB;AAAA,MAChB,oDAAC,yBAAD;AAAA;AAAA;AAAA;AAAA,aAAqB;AAAA,MACrB,oDAAC,yBAAsB,MAAM,QAAQ,gBAAgB,MAAM,kBAA3D;AAAA;AAAA;AAAA;AAAA,aAA2E;AAAA,SAHnE;AAAA;AAAA;AAAA;AAAA,WAIT,IAAM,oDAAC,kBACN,8DAACC,UAAA,EAAQ,SAAO,MACf,8DAAC,UAAO,WAAU,mCAAkC,UAAU,mBAC7D,8DAAC,UAAK,yBAAN;AAAA;AAAA;AAAA;AAAA,WAAe,KADhB;AAAA;AAAA;AAAA;AAAA,WAEA,KAHD;AAAA;AAAA;AAAA;AAAA,WAIA,KALK;AAAA;AAAA;AAAA;AAAA,WAMN;AAAA,OAZK;AAAA;AAAA;AAAA;AAAA,SAaP;AACF;AACAH,KAAI,UAAU,gCAAgC,OAAO,WAAY;AAC/D,SAAO,CAAC,cAAc;AACxB,CAAC;AACDI,OAAM;AACN,IAAIH;AAAJ,IAAQG;AACR,aAAaH,KAAI,gBAAgB;AACjC,aAAaG,MAAK,UAAU;AAE5B,OAAO,eAAe;AACtB,OAAO,eAAe;;;AC5DtB,IAAAC,iBAAwB;;;ACZxB,IAAAC,gBAAoC;AATpC,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAKO,SAAS,uBAAuB,WAAoB,MAAc;AACxE,QAAM,CAAC,OAAO,QAAQ,QAAI,wBAAS,SAAS;AAE5C,+BAAU,MAAM;AACf,QAAI,UAAU,OAAO,WAAW,MAAM;AACrC,eAAS,SAAS;AAAA,IACnB,GAAG,IAAI;AACP,WAAO,MAAM;AACZ,mBAAa,OAAO;AAAA,IACrB;AAAA,EACD,GAAG,CAAC,WAAW,IAAI,CAAC;AAEpB,SAAO;AACR;;;ACxBA,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AA2BA,IAAqB,OAArB,MAA0B;AAAA;AAAA;AAAA;AAAA,EASzB,YACC,YACA,cACA,OACC;AACD,cAAU,OAAO,eAAe,UAAU,4BAA4B;AACtE,cAAU,CAAC,MAAM,UAAU,GAAG,2BAA2B;AACzD,cAAU,OAAO,iBAAiB,UAAU,8BAA8B;AAC1E,cAAU,CAAC,MAAM,YAAY,GAAG,6BAA6B;AAE7D,QAAI,UAAU,QAAW;AACxB,gBAAU,OAAO,MAAM,QAAQ,YAAY,6BAA6B;AAAA,IACzE;AAEA,SAAK,SAAS;AACd,SAAK,QAAQ,gBAAgB;AAC7B,SAAK,SAAS,SAAS;AACvB,SAAK,SAAS,OAAO,iBAAiB,WAAW,KAAK,OAAO,IAAI,IAAI;AAAA,EACtE;AAAA,EAEA,OAAOC,IAAW;AACjB,cAAU,OAAOA,OAAM,UAAU,mBAAmB;AACpD,cAAU,CAAC,MAAMA,EAAC,GAAG,kBAAkB;AAEvC,QAAI,MAAM,KAAK,OAAO,IAAI;AAC1B,QAAI,UAAU,MAAM,KAAK;AACzB,SAAK,SAAS;AAYd,QAAIC,KAAI,KAAK,IAAI,GAAG,CAAC,UAAU,KAAK,MAAM;AAC1C,SAAK,QAAQA,KAAI,KAAK,SAAS,IAAMA,MAAKD;AAAA,EAC3C;AAAA,EAEA,MAAMA,IAAW;AAChB,cAAU,OAAOA,OAAM,UAAU,mBAAmB;AACpD,cAAU,CAAC,MAAMA,EAAC,GAAG,kBAAkB;AAEvC,SAAK,SAAS,KAAK,OAAO,IAAI;AAC9B,SAAK,QAAQA;AAAA,EACd;AAAA,EAEA,QAAQ;AACP,WAAO,KAAK;AAAA,EACb;AACD;;;AC/FA,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAKA,IAAM,QAAQ,CAAC,cAAc,eAAe,MAAM;AAQlD,IAAM,WAAW;AAEjB,IAAM,YAAY,MAAM,KAAK,CAACE,OAAMA,OAAM,QAAQ;AAClD,UAAU,SAAS;AAEZ,IAAM,OAAO;;;ACxBpB,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAaO,SAAS,oBACf,iBACC;AACD,QAAM,kCAAkC,IAAI,KAAK,KAAM,CAAC;AACxD,QAAM,mCAAmC,IAAI,KAAK,KAAM,CAAC;AACzD,MAAI,gBAAgB;AACpB,SAAO,cAAc,CAAC,iBAAiB,SAAS,GAAI,CAAC,CAAC,EAAE;AAAA,IACvD,UAAU,CAAC,CAAC,cAAc,MAAM,eAAe,SAAS,CAAC;AAAA,IACzD,SAAS;AAAA,IACT,IAAI,CAAC,CAAC,qBAAqB,cAAc,MAAM;AAC9C,UAAI,yBAAyB;AAC7B,UAAI,qBAAqB;AACzB,UAAI,sBAAsB;AAC1B,UAAI,sBAAsB;AAC1B,UAAI,kBAAsC;AAC1C,UAAI,oBAAwC;AAC5C,UAAI,gBAAoC;AAExC,qBAAe,QAAQ,CAAC,WAAW;AAClC,cAAM,WAAW,oBAAoB,IAAI,OAAO,EAAE;AAClD,YAAI,CAAC,SAAU;AAEf,YAAI,OAAO,SAAS,aAAa;AAChC,4BAAkB,OAAO;AAAA,QAC1B;AACA,YAAI,iBAAiB;AACpB,8BACC,eAAe,IAAI,eAAe,GAAG;AAAA,QACvC;AACA,YAAI,mBAAmB;AACtB,0BAAgB,eAAe,IAAI,iBAAiB,EAAE;AAAA,QACvD;AACA,YAAI,kBAAkB,UAAa,kBAAkB,gBAAgB;AACpE,kBAAQ;AAAA,YACP;AAAA,UACD;AACA,cAAI,SAAS,gBAAgB,CAAC,eAAe;AAC5C,kBAAM,6CAA6C;AACnD,4BAAgB;AAAA,UACjB;AAAA,QACD;AAEA,YAAI,OAAO,SAAS,eAAe;AAClC,gCAAsB,OAAO,cAAc,SAAS;AACpD,oCACC,OAAO,kBAAkB,SAAS;AAAA,QACpC,WAAW,OAAO,SAAS,gBAAgB;AAC1C,gBAAM,cAAc,OAAO,cAAc,SAAS;AAElD,gBAAM,sBAAsB,MAAM,KAAK,eAAe,OAAO,CAAC,EAAE;AAAA,YAC/D,CAACC,OAAMA,GAAE,SAAS,wBAAwBA,GAAE,SAAS,OAAO;AAAA,UAC7D;AACA,gBAAM,8BAA8B,MAAM;AAAA,YACzC,oBAAoB,OAAO;AAAA,UAC5B,EAAE;AAAA,YACD,CAACA,OAAMA,GAAE,SAAS,wBAAwBA,GAAE,SAAS,SAAS;AAAA,UAC/D;AACA,cACC,uBACA,+BACA,cAAc,GACb;AACD,mCAAuB,OAAO,cAAc,SAAS;AACrD,mCACC,oBAAoB,cACpB,4BAA4B;AAAA,UAC9B;AAAA,QACD;AAAA,MACD,CAAC;AAED,UAAI,yBAAyB,GAAG;AAC/B,cAAM,uBACL,sBAAsB,yBAAyB;AAChD,wCAAgC;AAAA,UAC/B,KAAK,IAAI,GAAG,oBAAoB;AAAA,QACjC;AAAA,MACD;AAEA,UAAI,sBAAsB,GAAG;AAC5B,cAAM,uBACL,uBAAuB,sBAAsB;AAC9C,yCAAiC;AAAA,UAChC,KAAK,IAAI,GAAG,oBAAoB;AAAA,QACjC;AAAA,MACD;AAEA,aAAO;AAAA,QACN,8BAA8B,iCAAiC,MAAM;AAAA,QACrE,6BAA6B,gCAAgC,MAAM;AAAA,MACpE;AAAA,IACD,CAAC;AAAA,EACF;AACD;;;AJpDM,IAAAC,0BAAA;AA5DN,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,qDAAuD,EAAE;AAAA,EAClG;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,MAAK,aAAa;AAAtB,IACEC,OAAM,aAAa;AAErB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAgD;AAChD,cAAY,IAAI,eAAe;AACjC;AAUA,SAAS,WAAW;AAClB,EAAAD,IAAG;AACH,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,eAAe;AACnB,QAAM,aAAS,wBAAQ,MAAM,oBAAoB,YAAY,eAAe,GAAG,CAAC,YAAY,eAAe,CAAC;AAC5G,QAAM,QAAQ,qBAAqB,QAAQ;AAAA,IACzC,6BAA6B;AAAA,IAC7B,8BAA8B;AAAA,EAChC,CAAC;AACD,SAAO;AACT;AACAA,IAAG,UAAU,gCAAgC,OAAO,WAAY;AAC9D,SAAO,CAAC,gBAAgB,oBAAoB;AAC9C,CAAC;AACM,SAAS,8BAA8B;AAC5C,EAAAC,KAAI;AACJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,EACF,IAAI,SAAS;AACb,QAAM,YAAY,uBAAuB,gCAAgC,UAAa,iCAAiC,WAAc,8BAA8B,QAAQ,+BAA+B,OAAO,GAAI;AACrN,MAAI,gCAAgC,UAAa,iCAAiC,QAAW;AAC3F,WAAO;AAAA,EACT;AACA,MAAI,CAAC,WAAW;AACd,WAAO;AAAA,EACT;AACA,SAAO,oDAAC,QAAK,UAAU,UACtB,8DAAC,SAAI,WAAU,qBACd;AAAA,wDAAC,SAAI,WAAU,aACd,8DAAC,cAAM,OAAN,EAAY,WAAU,2BACtB;AAAA,0DAAC,QAAK,MAAK,qBAAX;AAAA;AAAA;AAAA;AAAA,aAA6B;AAAA,MAAE;AAAA,SADhC;AAAA;AAAA;AAAA;AAAA,WAGA,KAJD;AAAA;AAAA;AAAA;AAAA,WAKA;AAAA,IACA,oDAAC,cAAM,aAAN,EAAkB,6CAAnB;AAAA;AAAA;AAAA;AAAA,WAAgD;AAAA,OAPjD;AAAA;AAAA;AAAA;AAAA,SAQA,KATM;AAAA;AAAA;AAAA;AAAA,SAUP;AACF;AACAA,KAAI,6BAA6B,gCAAgC,OAAO,WAAY;AAClF,SAAO,CAAC,UAAU,sBAAsB;AAC1C,CAAC;AACDC,MAAK;AACL,IAAIA;AACJ,aAAaA,KAAI,6BAA6B;AAE9C,OAAO,eAAe;AACtB,OAAO,eAAe;;;AKvChB,IAAAC,0BAAA;AArCN,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,8CAAgD,EAAE;AAAA,EAC3F;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,MAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAyC;AACzC,cAAY,IAAI,eAAe;AACjC;AAOO,SAAS,uBAAuB;AACrC,EAAAA,IAAG;AACH,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,eAAe;AACnB,QAAM,mCAAmC,uBAAuB,uBAAuB,gBAAgB,GAAI;AAC3G,MAAI,CAAC,kCAAkC;AACrC,WAAO;AAAA,EACT;AACA,SAAO,oDAAC,QAAK,UAAU,UACtB,8DAAC,SAAI,WAAU,qBACd,8DAAC,SAAI,WAAU,aACd,8DAAC,cAAM,OAAN,EAAY,WAAU,2BACtB;AAAA,wDAAC,QAAK,MAAK,cAAX;AAAA;AAAA;AAAA;AAAA,WAAsB;AAAA,IAAE;AAAA,OADzB;AAAA;AAAA;AAAA;AAAA,SAGA,KAJD;AAAA;AAAA;AAAA;AAAA,SAKA,KAND;AAAA;AAAA;AAAA;AAAA,SAOA,KARM;AAAA;AAAA;AAAA;AAAA,SASP;AACF;AACAA,IAAG,sBAAsB,gCAAgC,OAAO,WAAY;AAC1E,SAAO,CAAC,gBAAgB,sBAAsB;AAChD,CAAC;AACDC,MAAK;AACL,IAAIA;AACJ,aAAaA,KAAI,sBAAsB;AAEvC,OAAO,eAAe;AACtB,OAAO,eAAe;;;ACflB,IAAAC,0BAAA;AArCJ,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,yCAA2C,EAAE;AAAA,EACtF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAoC;AACpC,cAAY,IAAI,eAAe;AACjC;AAQO,IAAM,kBAAkB,CAAC;AAAA,EAC9B;AAAA,EACA;AACF,MAAM;AACJ,EAAAA,KAAG;AACH,QAAM,WAAW,YAAY;AAC7B,SAAO,oDAAC,WAAQ,SAAQ,SACvB,8DAAC,UAAO,aAAY,UAAS,SAAS,MAAM;AACzC,UAAM,SAAS,IAAI,gBAAgB;AACnC,QAAI,UAAW,QAAO,IAAI,aAAa,SAAS;AAChD,aAAS,yBAAyB,0BAA0B,MAAM,KAAK,GAAG;AAAA,EAC5E,GACA;AAAA,wDAAC,kBAAe,qBAAhB;AAAA;AAAA;AAAA;AAAA,KAAqB;AAAA,IACrB,oDAAC,QAAK,MAAK,gBAAX;AAAA;AAAA;AAAA;AAAA,KAAwB;AAAA,OANzB;AAAA;AAAA;AAAA;AAAA,GAOA,KARM;AAAA;AAAA;AAAA;AAAA,GASP;AACF;AACAA,KAAG,iBAAiB,gCAAgC,OAAO,WAAY;AACrE,SAAO,CAAC,WAAW;AACrB,CAAC;AACDC,MAAK;AACL,IAAIA;AACJ,aAAaA,KAAI,iBAAiB;AAElC,OAAO,eAAe;AACtB,OAAO,eAAe;;;AC7BtB,IAAAC,iBAAyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBzB,IAAAC,SAAuB;;;ACAvB,IAAAC,SAAuB;;;ACAvB,YAAuB;AAyEb,yBAAA;AA5DV,IAAM,cAAc;AACpB,IAAM,gBAAgB,EAAE,SAAS,OAAO,YAAY,KAAK;AAMzD,IAAM,aAAa;AAGnB,IAAM,CAAC,YAAY,eAAe,qBAAqB,IAAI,iBAGzD,UAAU;AAGZ,IAAM,CAAC,+BAA+B,2BAA2B,IAAI;EACnE;EACA,CAAC,qBAAqB;AACxB;AA8BA,IAAM,CAAC,qBAAqB,qBAAqB,IAC/C,8BAAkD,UAAU;AAK9D,IAAM,mBAAyB;EAC7B,CAAC,OAA2C,iBAAiB;AAC3D,WACE,4CAAC,WAAW,UAAX,EAAoB,OAAO,MAAM,yBAChC,UAAA,4CAAC,WAAW,MAAX,EAAgB,OAAO,MAAM,yBAC5B,UAAA,4CAAC,sBAAA,EAAsB,GAAG,OAAO,KAAK,aAAA,CAAc,EAAA,CACtD,EAAA,CACF;EAEJ;AACF;AAEA,iBAAiB,cAAc;AAgB/B,IAAM,uBAA6B,iBAGjC,CAAC,OAA+C,iBAAiB;AACjE,QAAM;IACJ;IACA;IACA,OAAO;IACP;IACA,kBAAkB;IAClB;IACA;IACA;IACA,4BAA4B;IAC5B,GAAG;EACL,IAAI;AACJ,QAAM,MAAY,aAAoC,IAAI;AAC1D,QAAM,eAAe,gBAAgB,cAAc,GAAG;AACtD,QAAM,YAAY,aAAa,GAAG;AAClC,QAAM,CAAC,mBAAmB,MAAM,mBAAmB,IAAI,qBAAqB;IAC1E,MAAM;IACN,aAAa;IACb,UAAU;EACZ,CAAC;AACD,QAAM,CAAC,kBAAkB,mBAAmB,IAAU,eAAS,KAAK;AACpE,QAAM,mBAAmB,eAAe,YAAY;AACpD,QAAM,WAAW,cAAc,uBAAuB;AACtD,QAAM,kBAAwB,aAAO,KAAK;AAC1C,QAAM,CAAC,qBAAqB,sBAAsB,IAAU,eAAS,CAAC;AAEhE,EAAA,gBAAU,MAAM;AACpB,UAAM,OAAO,IAAI;AACjB,QAAI,MAAM;AACR,WAAK,iBAAiB,aAAa,gBAAgB;AACnD,aAAO,MAAM,KAAK,oBAAoB,aAAa,gBAAgB;IACrE;EACF,GAAG,CAAC,gBAAgB,CAAC;AAErB,SACE;IAAC;IAAA;MACC,OAAO;MACP;MACA,KAAK;MACL;MACA;MACA,aAAmB;QACjB,CAAC,cAAc,oBAAoB,SAAS;QAC5C,CAAC,mBAAmB;MACtB;MACA,gBAAsB,kBAAY,MAAM,oBAAoB,IAAI,GAAG,CAAC,CAAC;MACrE,oBAA0B;QACxB,MAAM,uBAAuB,CAAC,cAAc,YAAY,CAAC;QACzD,CAAC;MACH;MACA,uBAA6B;QAC3B,MAAM,uBAAuB,CAAC,cAAc,YAAY,CAAC;QACzD,CAAC;MACH;MAEA,UAAA;QAAC,UAAU;QAAV;UACC,UAAU,oBAAoB,wBAAwB,IAAI,KAAK;UAC/D,oBAAkB;UACjB,GAAG;UACJ,KAAK;UACL,OAAO,EAAE,SAAS,QAAQ,GAAG,MAAM,MAAM;UACzC,aAAa,qBAAqB,MAAM,aAAa,MAAM;AACzD,4BAAgB,UAAU;UAC5B,CAAC;UACD,SAAS,qBAAqB,MAAM,SAAS,CAAC,UAAU;AAKtD,kBAAM,kBAAkB,CAAC,gBAAgB;AAEzC,gBAAI,MAAM,WAAW,MAAM,iBAAiB,mBAAmB,CAAC,kBAAkB;AAChF,oBAAM,kBAAkB,IAAI,YAAY,aAAa,aAAa;AAClE,oBAAM,cAAc,cAAc,eAAe;AAEjD,kBAAI,CAAC,gBAAgB,kBAAkB;AACrC,sBAAM,QAAQ,SAAS,EAAE,OAAO,CAAC,SAAS,KAAK,SAAS;AACxD,sBAAM,aAAa,MAAM,KAAK,CAAC,SAAS,KAAK,MAAM;AACnD,sBAAM,cAAc,MAAM,KAAK,CAAC,SAAS,KAAK,OAAO,gBAAgB;AACrE,sBAAM,iBAAiB,CAAC,YAAY,aAAa,GAAG,KAAK,EAAE;kBACzD;gBACF;AACA,sBAAM,iBAAiB,eAAe,IAAI,CAAC,SAAS,KAAK,IAAI,OAAQ;AACrE,2BAAW,gBAAgB,yBAAyB;cACtD;YACF;AAEA,4BAAgB,UAAU;UAC5B,CAAC;UACD,QAAQ,qBAAqB,MAAM,QAAQ,MAAM,oBAAoB,KAAK,CAAC;QAAA;MAC7E;IAAA;EACF;AAEJ,CAAC;AAMD,IAAM,YAAY;AAUlB,IAAM,uBAA6B;EACjC,CAAC,OAA0C,iBAAiB;AAC1D,UAAM;MACJ;MACA,YAAY;MACZ,SAAS;MACT;MACA,GAAG;IACL,IAAI;AACJ,UAAM,SAAS,MAAM;AACrB,UAAM,KAAK,aAAa;AACxB,UAAM,UAAU,sBAAsB,WAAW,uBAAuB;AACxE,UAAM,mBAAmB,QAAQ,qBAAqB;AACtD,UAAM,WAAW,cAAc,uBAAuB;AAEtD,UAAM,EAAE,oBAAoB,sBAAsB,IAAI;AAEhD,IAAA,gBAAU,MAAM;AACpB,UAAI,WAAW;AACb,2BAAmB;AACnB,eAAO,MAAM,sBAAsB;MACrC;IACF,GAAG,CAAC,WAAW,oBAAoB,qBAAqB,CAAC;AAEzD,WACE;MAAC,WAAW;MAAX;QACC,OAAO;QACP;QACA;QACA;QAEA,UAAA;UAAC,UAAU;UAAV;YACC,UAAU,mBAAmB,IAAI;YACjC,oBAAkB,QAAQ;YACzB,GAAG;YACJ,KAAK;YACL,aAAa,qBAAqB,MAAM,aAAa,CAAC,UAAU;AAG9D,kBAAI,CAAC,UAAW,OAAM,eAAe;kBAEhC,SAAQ,YAAY,EAAE;YAC7B,CAAC;YACD,SAAS,qBAAqB,MAAM,SAAS,MAAM,QAAQ,YAAY,EAAE,CAAC;YAC1E,WAAW,qBAAqB,MAAM,WAAW,CAAC,UAAU;AAC1D,kBAAI,MAAM,QAAQ,SAAS,MAAM,UAAU;AACzC,wBAAQ,eAAe;AACvB;cACF;AAEA,kBAAI,MAAM,WAAW,MAAM,cAAe;AAE1C,oBAAM,cAAc,eAAe,OAAO,QAAQ,aAAa,QAAQ,GAAG;AAE1E,kBAAI,gBAAgB,QAAW;AAC7B,oBAAI,MAAM,WAAW,MAAM,WAAW,MAAM,UAAU,MAAM,SAAU;AACtE,sBAAM,eAAe;AACrB,sBAAM,QAAQ,SAAS,EAAE,OAAO,CAAC,SAAS,KAAK,SAAS;AACxD,oBAAI,iBAAiB,MAAM,IAAI,CAAC,SAAS,KAAK,IAAI,OAAQ;AAE1D,oBAAI,gBAAgB,OAAQ,gBAAe,QAAQ;yBAC1C,gBAAgB,UAAU,gBAAgB,QAAQ;AACzD,sBAAI,gBAAgB,OAAQ,gBAAe,QAAQ;AACnD,wBAAM,eAAe,eAAe,QAAQ,MAAM,aAAa;AAC/D,mCAAiB,QAAQ,OACrB,UAAU,gBAAgB,eAAe,CAAC,IAC1C,eAAe,MAAM,eAAe,CAAC;gBAC3C;AAMA,2BAAW,MAAM,WAAW,cAAc,CAAC;cAC7C;YACF,CAAC;UAAA;QACH;MAAA;IACF;EAEJ;AACF;AAEA,qBAAqB,cAAc;AAKnC,IAAM,0BAAuD;EAC3D,WAAW;EAAQ,SAAS;EAC5B,YAAY;EAAQ,WAAW;EAC/B,QAAQ;EAAS,MAAM;EACvB,UAAU;EAAQ,KAAK;AACzB;AAEA,SAAS,qBAAqB,KAAa,KAAiB;AAC1D,MAAI,QAAQ,MAAO,QAAO;AAC1B,SAAO,QAAQ,cAAc,eAAe,QAAQ,eAAe,cAAc;AACnF;AAIA,SAAS,eAAe,OAA4B,aAA2B,KAAiB;AAC9F,QAAM,MAAM,qBAAqB,MAAM,KAAK,GAAG;AAC/C,MAAI,gBAAgB,cAAc,CAAC,aAAa,YAAY,EAAE,SAAS,GAAG,EAAG,QAAO;AACpF,MAAI,gBAAgB,gBAAgB,CAAC,WAAW,WAAW,EAAE,SAAS,GAAG,EAAG,QAAO;AACnF,SAAO,wBAAwB,GAAG;AACpC;AAEA,SAAS,WAAW,YAA2B,gBAAgB,OAAO;AACpE,QAAM,6BAA6B,SAAS;AAC5C,aAAW,aAAa,YAAY;AAElC,QAAI,cAAc,2BAA4B;AAC9C,cAAU,MAAM,EAAE,cAAc,CAAC;AACjC,QAAI,SAAS,kBAAkB,2BAA4B;EAC7D;AACF;AAMA,SAAS,UAAa,OAAY,YAAoB;AACpD,SAAO,MAAM,IAAI,CAACC,IAAG,UAAU,OAAO,aAAa,SAAS,MAAM,MAAM,CAAC;AAC3E;AAEA,IAAMC,QAAO;AACb,IAAM,OAAO;;;ADxNL,IAAAC,sBAAA;AA9FR,IAAM,iBAAiB,CAAC,SAAS,GAAG;AACpC,IAAM,aAAa,CAAC,aAAa,UAAU,MAAM;AACjD,IAAM,YAAY,CAAC,WAAW,YAAY,KAAK;AAC/C,IAAM,kBAAkB,CAAC,GAAG,YAAY,GAAG,SAAS;AACpD,IAAM,gBAA6C;EACjD,KAAK,CAAC,GAAG,gBAAgB,YAAY;EACrC,KAAK,CAAC,GAAG,gBAAgB,WAAW;AACtC;AACA,IAAM,iBAA8C;EAClD,KAAK,CAAC,WAAW;EACjB,KAAK,CAAC,YAAY;AACpB;AAMA,IAAM,YAAY;AAGlB,IAAM,CAACC,aAAYC,gBAAeC,sBAAqB,IAAI,iBAGzD,SAAS;AAGX,IAAM,CAAC,mBAAmB,eAAe,IAAI,mBAAmB,WAAW;EACzEA;EACA;EACA;AACF,CAAC;AACD,IAAM,iBAAiB,kBAAkB;AACzC,IAAM,2BAA2B,4BAA4B;AAS7D,IAAM,CAAC,cAAc,cAAc,IAAI,kBAAoC,SAAS;AASpF,IAAM,CAAC,kBAAkB,kBAAkB,IAAI,kBAAwC,SAAS;AAUhG,IAAM,OAA4B,CAAC,UAAkC;AACnE,QAAM,EAAE,aAAa,OAAO,OAAO,UAAU,KAAK,cAAc,QAAQ,KAAK,IAAI;AACjF,QAAM,cAAc,eAAe,WAAW;AAC9C,QAAM,CAAC,SAAS,UAAU,IAAU,gBAAoC,IAAI;AAC5E,QAAM,qBAA2B,cAAO,KAAK;AAC7C,QAAM,mBAAmB,eAAe,YAAY;AACpD,QAAM,YAAY,aAAa,GAAG;AAE5B,EAAA,iBAAU,MAAM;AAGpB,UAAM,gBAAgB,MAAM;AAC1B,yBAAmB,UAAU;AAC7B,eAAS,iBAAiB,eAAe,eAAe,EAAE,SAAS,MAAM,MAAM,KAAK,CAAC;AACrF,eAAS,iBAAiB,eAAe,eAAe,EAAE,SAAS,MAAM,MAAM,KAAK,CAAC;IACvF;AACA,UAAM,gBAAgB,MAAO,mBAAmB,UAAU;AAC1D,aAAS,iBAAiB,WAAW,eAAe,EAAE,SAAS,KAAK,CAAC;AACrE,WAAO,MAAM;AACX,eAAS,oBAAoB,WAAW,eAAe,EAAE,SAAS,KAAK,CAAC;AACxE,eAAS,oBAAoB,eAAe,eAAe,EAAE,SAAS,KAAK,CAAC;AAC5E,eAAS,oBAAoB,eAAe,eAAe,EAAE,SAAS,KAAK,CAAC;IAC9E;EACF,GAAG,CAAC,CAAC;AAEL,SACE,6CAAiB,OAAhB,EAAsB,GAAG,aACxB,UAAA;IAAC;IAAA;MACC,OAAO;MACP;MACA,cAAc;MACd;MACA,iBAAiB;MAEjB,UAAA;QAAC;QAAA;UACC,OAAO;UACP,SAAe,mBAAY,MAAM,iBAAiB,KAAK,GAAG,CAAC,gBAAgB,CAAC;UAC5E;UACA,KAAK;UACL;UAEC;QAAA;MACH;IAAA;EACF,EAAA,CACF;AAEJ;AAEA,KAAK,cAAc;AAMnB,IAAM,cAAc;AAMpB,IAAM,aAAmB;EACvB,CAAC,OAAqC,iBAAiB;AACrD,UAAM,EAAE,aAAa,GAAG,YAAY,IAAI;AACxC,UAAM,cAAc,eAAe,WAAW;AAC9C,WAAO,6CAAiB,QAAhB,EAAwB,GAAG,aAAc,GAAG,aAAa,KAAK,aAAA,CAAc;EACtF;AACF;AAEA,WAAW,cAAc;AAMzB,IAAM,cAAc;AAGpB,IAAM,CAAC,gBAAgB,gBAAgB,IAAI,kBAAsC,aAAa;EAC5F,YAAY;AACd,CAAC;AAgBD,IAAM,aAAwC,CAAC,UAAwC;AACrF,QAAM,EAAE,aAAa,YAAY,UAAU,UAAU,IAAI;AACzD,QAAM,UAAU,eAAe,aAAa,WAAW;AACvD,SACE,6CAAC,gBAAA,EAAe,OAAO,aAAa,YAClC,UAAA,6CAAC,UAAA,EAAS,SAAS,cAAc,QAAQ,MACvC,UAAA,6CAAC,QAAA,EAAgB,SAAO,MAAC,WACtB,SAAA,CACH,EAAA,CACF,EAAA,CACF;AAEJ;AAEA,WAAW,cAAc;AAMzB,IAAM,eAAe;AAUrB,IAAM,CAAC,qBAAqB,qBAAqB,IAC/C,kBAA2C,YAAY;AAgBzD,IAAM,cAAoB;EACxB,CAAC,OAAsC,iBAAiB;AACtD,UAAM,gBAAgB,iBAAiB,cAAc,MAAM,WAAW;AACtE,UAAM,EAAE,aAAa,cAAc,YAAY,GAAG,aAAa,IAAI;AACnE,UAAM,UAAU,eAAe,cAAc,MAAM,WAAW;AAC9D,UAAM,cAAc,mBAAmB,cAAc,MAAM,WAAW;AAEtE,WACE,6CAACF,YAAW,UAAX,EAAoB,OAAO,MAAM,aAChC,UAAA,6CAAC,UAAA,EAAS,SAAS,cAAc,QAAQ,MACvC,UAAA,6CAACA,YAAW,MAAX,EAAgB,OAAO,MAAM,aAC3B,UAAA,YAAY,QACX,6CAAC,sBAAA,EAAsB,GAAG,cAAc,KAAK,aAAA,CAAc,IAE3D,6CAAC,yBAAA,EAAyB,GAAG,cAAc,KAAK,aAAA,CAAc,EAAA,CAElE,EAAA,CACF,EAAA,CACF;EAEJ;AACF;AAQA,IAAM,uBAA6B;EACjC,CAAC,OAA8C,iBAAiB;AAC9D,UAAM,UAAU,eAAe,cAAc,MAAM,WAAW;AAC9D,UAAM,MAAY,cAAmC,IAAI;AACzD,UAAM,eAAe,gBAAgB,cAAc,GAAG;AAGhD,IAAA,iBAAU,MAAM;AACpB,YAAM,UAAU,IAAI;AACpB,UAAI,QAAS,QAAO,WAAW,OAAO;IACxC,GAAG,CAAC,CAAC;AAEL,WACE;MAAC;MAAA;QACE,GAAG;QACJ,KAAK;QAGL,WAAW,QAAQ;QAGnB,6BAA6B,QAAQ;QACrC,sBAAoB;QAGpB,gBAAgB;UACd,MAAM;UACN,CAAC,UAAU,MAAM,eAAe;UAChC,EAAE,0BAA0B,MAAM;QACpC;QACA,WAAW,MAAM,QAAQ,aAAa,KAAK;MAAA;IAC7C;EAEJ;AACF;AAEA,IAAM,0BAAgC,kBAGpC,CAAC,OAA8C,iBAAiB;AAChE,QAAM,UAAU,eAAe,cAAc,MAAM,WAAW;AAC9D,SACE;IAAC;IAAA;MACE,GAAG;MACJ,KAAK;MACL,WAAW;MACX,6BAA6B;MAC7B,sBAAsB;MACtB,WAAW,MAAM,QAAQ,aAAa,KAAK;IAAA;EAC7C;AAEJ,CAAC;AAgDD,IAAM,kBAAwB;EAC5B,CAAC,OAA0C,iBAAiB;AAC1D,UAAM;MACJ;MACA,OAAO;MACP;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,GAAG;IACL,IAAI;AACJ,UAAM,UAAU,eAAe,cAAc,WAAW;AACxD,UAAM,cAAc,mBAAmB,cAAc,WAAW;AAChE,UAAM,cAAc,eAAe,WAAW;AAC9C,UAAM,wBAAwB,yBAAyB,WAAW;AAClE,UAAM,WAAWC,eAAc,WAAW;AAC1C,UAAM,CAAC,eAAe,gBAAgB,IAAU,gBAAwB,IAAI;AAC5E,UAAM,aAAmB,cAAuB,IAAI;AACpD,UAAM,eAAe,gBAAgB,cAAc,YAAY,QAAQ,eAAe;AACtF,UAAM,WAAiB,cAAO,CAAC;AAC/B,UAAM,YAAkB,cAAO,EAAE;AACjC,UAAM,uBAA6B,cAAO,CAAC;AAC3C,UAAM,wBAA8B,cAA2B,IAAI;AACnE,UAAM,gBAAsB,cAAa,OAAO;AAChD,UAAM,kBAAwB,cAAO,CAAC;AAEtC,UAAM,oBAAoB,uBAAuB,sBAAqB;AACtE,UAAM,yBAAyB,uBAC3B,EAAE,IAAI,MAAM,gBAAgB,KAAK,IACjC;AAEJ,UAAM,wBAAwB,CAAC,QAAgB;AAC7C,YAAM,SAAS,UAAU,UAAU;AACnC,YAAM,QAAQ,SAAS,EAAE,OAAO,CAAC,SAAS,CAAC,KAAK,QAAQ;AACxD,YAAM,cAAc,SAAS;AAC7B,YAAM,eAAe,MAAM,KAAK,CAAC,SAAS,KAAK,IAAI,YAAY,WAAW,GAAG;AAC7E,YAAM,SAAS,MAAM,IAAI,CAAC,SAAS,KAAK,SAAS;AACjD,YAAM,YAAY,aAAa,QAAQ,QAAQ,YAAY;AAC3D,YAAM,UAAU,MAAM,KAAK,CAAC,SAAS,KAAK,cAAc,SAAS,GAAG,IAAI;AAGxE,OAAC,SAAS,aAAa,OAAe;AACpC,kBAAU,UAAU;AACpB,eAAO,aAAa,SAAS,OAAO;AACpC,YAAI,UAAU,GAAI,UAAS,UAAU,OAAO,WAAW,MAAM,aAAa,EAAE,GAAG,GAAI;MACrF,GAAG,MAAM;AAET,UAAI,SAAS;AAKX,mBAAW,MAAO,QAAwB,MAAM,CAAC;MACnD;IACF;AAEM,IAAA,iBAAU,MAAM;AACpB,aAAO,MAAM,OAAO,aAAa,SAAS,OAAO;IACnD,GAAG,CAAC,CAAC;AAIL,mBAAe;AAEf,UAAM,2BAAiC,mBAAY,CAAC,UAA8B;AAChF,YAAM,kBAAkB,cAAc,YAAY,sBAAsB,SAAS;AACjF,aAAO,mBAAmB,qBAAqB,OAAO,sBAAsB,SAAS,IAAI;IAC3F,GAAG,CAAC,CAAC;AAEL,WACE;MAAC;MAAA;QACC,OAAO;QACP;QACA,aAAmB;UACjB,CAAC,UAAU;AACT,gBAAI,yBAAyB,KAAK,EAAG,OAAM,eAAe;UAC5D;UACA,CAAC,wBAAwB;QAC3B;QACA,aAAmB;UACjB,CAAC,UAAU;AACT,gBAAI,yBAAyB,KAAK,EAAG;AACrC,uBAAW,SAAS,MAAM;AAC1B,6BAAiB,IAAI;UACvB;UACA,CAAC,wBAAwB;QAC3B;QACA,gBAAsB;UACpB,CAAC,UAAU;AACT,gBAAI,yBAAyB,KAAK,EAAG,OAAM,eAAe;UAC5D;UACA,CAAC,wBAAwB;QAC3B;QACA;QACA,4BAAkC,mBAAY,CAAC,WAAW;AACxD,gCAAsB,UAAU;QAClC,GAAG,CAAC,CAAC;QAEL,UAAA,6CAAC,mBAAA,EAAmB,GAAG,wBACrB,UAAA;UAAC;UAAA;YACC,SAAO;YACP,SAAS;YACT,kBAAkB,qBAAqB,iBAAiB,CAAC,UAAU;AAGjE,oBAAM,eAAe;AACrB,yBAAW,SAAS,MAAM,EAAE,eAAe,KAAK,CAAC;YACnD,CAAC;YACD,oBAAoB;YAEpB,UAAA;cAAC;cAAA;gBACC,SAAO;gBACP;gBACA;gBACA;gBACA;gBACA;gBACA;gBAEA,UAAA;kBAAkBE;kBAAjB;oBACC,SAAO;oBACN,GAAG;oBACJ,KAAK,YAAY;oBACjB,aAAY;oBACZ;oBACA,kBAAkB;oBAClB,0BAA0B;oBAC1B,cAAc,qBAAqB,cAAc,CAAC,UAAU;AAE1D,0BAAI,CAAC,YAAY,mBAAmB,QAAS,OAAM,eAAe;oBACpE,CAAC;oBACD,2BAAyB;oBAEzB,UAAA;sBAAiB;sBAAhB;wBACC,MAAK;wBACL,oBAAiB;wBACjB,cAAY,aAAa,QAAQ,IAAI;wBACrC,2BAAwB;wBACxB,KAAK,YAAY;wBAChB,GAAG;wBACH,GAAG;wBACJ,KAAK;wBACL,OAAO,EAAE,SAAS,QAAQ,GAAG,aAAa,MAAM;wBAChD,WAAW,qBAAqB,aAAa,WAAW,CAAC,UAAU;AAEjE,gCAAM,SAAS,MAAM;AACrB,gCAAM,kBACJ,OAAO,QAAQ,2BAA2B,MAAM,MAAM;AACxD,gCAAM,gBAAgB,MAAM,WAAW,MAAM,UAAU,MAAM;AAC7D,gCAAM,iBAAiB,MAAM,IAAI,WAAW;AAC5C,8BAAI,iBAAiB;AAEnB,gCAAI,MAAM,QAAQ,MAAO,OAAM,eAAe;AAC9C,gCAAI,CAAC,iBAAiB,eAAgB,uBAAsB,MAAM,GAAG;0BACvE;AAEA,gCAAM,UAAU,WAAW;AAC3B,8BAAI,MAAM,WAAW,QAAS;AAC9B,8BAAI,CAAC,gBAAgB,SAAS,MAAM,GAAG,EAAG;AAC1C,gCAAM,eAAe;AACrB,gCAAM,QAAQ,SAAS,EAAE,OAAO,CAAC,SAAS,CAAC,KAAK,QAAQ;AACxD,gCAAM,iBAAiB,MAAM,IAAI,CAAC,SAAS,KAAK,IAAI,OAAQ;AAC5D,8BAAI,UAAU,SAAS,MAAM,GAAG,EAAG,gBAAe,QAAQ;AAC1D,0BAAAC,YAAW,cAAc;wBAC3B,CAAC;wBACD,QAAQ,qBAAqB,MAAM,QAAQ,CAAC,UAAU;AAEpD,8BAAI,CAAC,MAAM,cAAc,SAAS,MAAM,MAAM,GAAG;AAC/C,mCAAO,aAAa,SAAS,OAAO;AACpC,sCAAU,UAAU;0BACtB;wBACF,CAAC;wBACD,eAAe;0BACb,MAAM;0BACN,UAAU,CAAC,UAAU;AACnB,kCAAM,SAAS,MAAM;AACrB,kCAAM,qBAAqB,gBAAgB,YAAY,MAAM;AAI7D,gCAAI,MAAM,cAAc,SAAS,MAAM,KAAK,oBAAoB;AAC9D,oCAAM,SAAS,MAAM,UAAU,gBAAgB,UAAU,UAAU;AACnE,4CAAc,UAAU;AACxB,8CAAgB,UAAU,MAAM;4BAClC;0BACF,CAAC;wBACH;sBAAA;oBACF;kBAAA;gBACF;cAAA;YACF;UAAA;QACF,EAAA,CACF;MAAA;IACF;EAEJ;AACF;AAEA,YAAY,cAAc;AAM1B,IAAMC,cAAa;AAMnB,IAAM,YAAkB;EACtB,CAAC,OAAoC,iBAAiB;AACpD,UAAM,EAAE,aAAa,GAAG,WAAW,IAAI;AACvC,WAAO,6CAAC,UAAU,KAAV,EAAc,MAAK,SAAS,GAAG,YAAY,KAAK,aAAA,CAAc;EACxE;AACF;AAEA,UAAU,cAAcA;AAMxB,IAAM,aAAa;AAKnB,IAAM,YAAkB;EACtB,CAAC,OAAoC,iBAAiB;AACpD,UAAM,EAAE,aAAa,GAAG,WAAW,IAAI;AACvC,WAAO,6CAAC,UAAU,KAAV,EAAe,GAAG,YAAY,KAAK,aAAA,CAAc;EAC3D;AACF;AAEA,UAAU,cAAc;AAMxB,IAAMC,aAAY;AAClB,IAAM,cAAc;AAOpB,IAAM,WAAiB;EACrB,CAAC,OAAmC,iBAAiB;AACnD,UAAM,EAAE,WAAW,OAAO,UAAU,GAAG,UAAU,IAAI;AACrD,UAAM,MAAY,cAAuB,IAAI;AAC7C,UAAM,cAAc,mBAAmBA,YAAW,MAAM,WAAW;AACnE,UAAM,iBAAiB,sBAAsBA,YAAW,MAAM,WAAW;AACzE,UAAM,eAAe,gBAAgB,cAAc,GAAG;AACtD,UAAM,mBAAyB,cAAO,KAAK;AAE3C,UAAM,eAAe,MAAM;AACzB,YAAM,WAAW,IAAI;AACrB,UAAI,CAAC,YAAY,UAAU;AACzB,cAAM,kBAAkB,IAAI,YAAY,aAAa,EAAE,SAAS,MAAM,YAAY,KAAK,CAAC;AACxF,iBAAS,iBAAiB,aAAa,CAAC,UAAU,WAAW,KAAK,GAAG,EAAE,MAAM,KAAK,CAAC;AACnF,oCAA4B,UAAU,eAAe;AACrD,YAAI,gBAAgB,kBAAkB;AACpC,2BAAiB,UAAU;QAC7B,OAAO;AACL,sBAAY,QAAQ;QACtB;MACF;IACF;AAEA,WACE;MAAC;MAAA;QACE,GAAG;QACJ,KAAK;QACL;QACA,SAAS,qBAAqB,MAAM,SAAS,YAAY;QACzD,eAAe,CAAC,UAAU;AACxB,gBAAM,gBAAgB,KAAK;AAC3B,2BAAiB,UAAU;QAC7B;QACA,aAAa,qBAAqB,MAAM,aAAa,CAAC,UAAU;AAI9D,cAAI,CAAC,iBAAiB,QAAS,OAAM,eAAe,MAAM;QAC5D,CAAC;QACD,WAAW,qBAAqB,MAAM,WAAW,CAAC,UAAU;AAC1D,gBAAM,gBAAgB,eAAe,UAAU,YAAY;AAC3D,cAAI,YAAa,iBAAiB,MAAM,QAAQ,IAAM;AACtD,cAAI,eAAe,SAAS,MAAM,GAAG,GAAG;AACtC,kBAAM,cAAc,MAAM;AAO1B,kBAAM,eAAe;UACvB;QACF,CAAC;MAAA;IACH;EAEJ;AACF;AAEA,SAAS,cAAcA;AAUvB,IAAM,eAAqB;EACzB,CAAC,OAAuC,iBAAiB;AACvD,UAAM,EAAE,aAAa,WAAW,OAAO,WAAW,GAAG,UAAU,IAAI;AACnE,UAAM,iBAAiB,sBAAsBA,YAAW,WAAW;AACnE,UAAM,wBAAwB,yBAAyB,WAAW;AAClE,UAAM,MAAY,cAAuB,IAAI;AAC7C,UAAM,eAAe,gBAAgB,cAAc,GAAG;AACtD,UAAM,CAAC,WAAW,YAAY,IAAU,gBAAS,KAAK;AAGtD,UAAM,CAAC,aAAa,cAAc,IAAU,gBAAS,EAAE;AACjD,IAAA,iBAAU,MAAM;AACpB,YAAM,WAAW,IAAI;AACrB,UAAI,UAAU;AACZ,wBAAgB,SAAS,eAAe,IAAI,KAAK,CAAC;MACpD;IACF,GAAG,CAAC,UAAU,QAAQ,CAAC;AAEvB,WACE;MAACN,YAAW;MAAX;QACC,OAAO;QACP;QACA,WAAW,aAAa;QAExB,UAAA,6CAAkB,MAAjB,EAAsB,SAAO,MAAE,GAAG,uBAAuB,WAAW,CAAC,UACpE,UAAA;UAAC,UAAU;UAAV;YACC,MAAK;YACL,oBAAkB,YAAY,KAAK;YACnC,iBAAe,YAAY;YAC3B,iBAAe,WAAW,KAAK;YAC9B,GAAG;YACJ,KAAK;YAYL,eAAe;cACb,MAAM;cACN,UAAU,CAAC,UAAU;AACnB,oBAAI,UAAU;AACZ,iCAAe,YAAY,KAAK;gBAClC,OAAO;AACL,iCAAe,YAAY,KAAK;AAChC,sBAAI,CAAC,MAAM,kBAAkB;AAC3B,0BAAM,OAAO,MAAM;AACnB,yBAAK,MAAM,EAAE,eAAe,KAAK,CAAC;kBACpC;gBACF;cACF,CAAC;YACH;YACA,gBAAgB;cACd,MAAM;cACN,UAAU,CAAC,UAAU,eAAe,YAAY,KAAK,CAAC;YACxD;YACA,SAAS,qBAAqB,MAAM,SAAS,MAAM,aAAa,IAAI,CAAC;YACrE,QAAQ,qBAAqB,MAAM,QAAQ,MAAM,aAAa,KAAK,CAAC;UAAA;QACtE,EAAA,CACF;MAAA;IACF;EAEJ;AACF;AAMA,IAAM,qBAAqB;AAY3B,IAAM,mBAAyB;EAC7B,CAAC,OAA2C,iBAAiB;AAC3D,UAAM,EAAE,UAAU,OAAO,iBAAiB,GAAG,kBAAkB,IAAI;AACnE,WACE,6CAAC,uBAAA,EAAsB,OAAO,MAAM,aAAa,SAC/C,UAAA;MAAC;MAAA;QACC,MAAK;QACL,gBAAc,gBAAgB,OAAO,IAAI,UAAU;QAClD,GAAG;QACJ,KAAK;QACL,cAAY,gBAAgB,OAAO;QACnC,UAAU;UACR,kBAAkB;UAClB,MAAM,kBAAkB,gBAAgB,OAAO,IAAI,OAAO,CAAC,OAAO;UAClE,EAAE,0BAA0B,MAAM;QACpC;MAAA;IACF,EAAA,CACF;EAEJ;AACF;AAEA,iBAAiB,cAAc;AAM/B,IAAM,mBAAmB;AAEzB,IAAM,CAAC,oBAAoB,oBAAoB,IAAI;EACjD;EACA,EAAE,OAAO,QAAW,eAAe,MAAM;EAAC,EAAE;AAC9C;AAQA,IAAM,iBAAuB;EAC3B,CAAC,OAAyC,iBAAiB;AACzD,UAAM,EAAE,OAAO,eAAe,GAAG,WAAW,IAAI;AAChD,UAAM,oBAAoB,eAAe,aAAa;AACtD,WACE,6CAAC,oBAAA,EAAmB,OAAO,MAAM,aAAa,OAAc,eAAe,mBACzE,UAAA,6CAAC,WAAA,EAAW,GAAG,YAAY,KAAK,aAAA,CAAc,EAAA,CAChD;EAEJ;AACF;AAEA,eAAe,cAAc;AAM7B,IAAM,kBAAkB;AAOxB,IAAM,gBAAsB;EAC1B,CAAC,OAAwC,iBAAiB;AACxD,UAAM,EAAE,OAAO,GAAG,eAAe,IAAI;AACrC,UAAM,UAAU,qBAAqB,iBAAiB,MAAM,WAAW;AACvE,UAAM,UAAU,UAAU,QAAQ;AAClC,WACE,6CAAC,uBAAA,EAAsB,OAAO,MAAM,aAAa,SAC/C,UAAA;MAAC;MAAA;QACC,MAAK;QACL,gBAAc;QACb,GAAG;QACJ,KAAK;QACL,cAAY,gBAAgB,OAAO;QACnC,UAAU;UACR,eAAe;UACf,MAAM,QAAQ,gBAAgB,KAAK;UACnC,EAAE,0BAA0B,MAAM;QACpC;MAAA;IACF,EAAA,CACF;EAEJ;AACF;AAEA,cAAc,cAAc;AAM5B,IAAM,sBAAsB;AAI5B,IAAM,CAAC,uBAAuB,uBAAuB,IAAI;EACvD;EACA,EAAE,SAAS,MAAM;AACnB;AAYA,IAAM,oBAA0B;EAC9B,CAAC,OAA4C,iBAAiB;AAC5D,UAAM,EAAE,aAAa,YAAY,GAAG,mBAAmB,IAAI;AAC3D,UAAM,mBAAmB,wBAAwB,qBAAqB,WAAW;AACjF,WACE;MAAC;MAAA;QACC,SACE,cACA,gBAAgB,iBAAiB,OAAO,KACxC,iBAAiB,YAAY;QAG/B,UAAA;UAAC,UAAU;UAAV;YACE,GAAG;YACJ,KAAK;YACL,cAAY,gBAAgB,iBAAiB,OAAO;UAAA;QACtD;MAAA;IACF;EAEJ;AACF;AAEA,kBAAkB,cAAc;AAMhC,IAAM,iBAAiB;AAKvB,IAAM,gBAAsB;EAC1B,CAAC,OAAwC,iBAAiB;AACxD,UAAM,EAAE,aAAa,GAAG,eAAe,IAAI;AAC3C,WACE;MAAC,UAAU;MAAV;QACC,MAAK;QACL,oBAAiB;QAChB,GAAG;QACJ,KAAK;MAAA;IACP;EAEJ;AACF;AAEA,cAAc,cAAc;AAM5B,IAAM,aAAa;AAMnB,IAAM,YAAkB;EACtB,CAAC,OAAoC,iBAAiB;AACpD,UAAM,EAAE,aAAa,GAAG,WAAW,IAAI;AACvC,UAAM,cAAc,eAAe,WAAW;AAC9C,WAAO,6CAAiB,OAAhB,EAAuB,GAAG,aAAc,GAAG,YAAY,KAAK,aAAA,CAAc;EACpF;AACF;AAEA,UAAU,cAAc;AAMxB,IAAM,WAAW;AASjB,IAAM,CAAC,iBAAiB,iBAAiB,IAAI,kBAAuC,QAAQ;AAQ5F,IAAM,UAAkC,CAAC,UAAqC;AAC5E,QAAM,EAAE,aAAa,UAAU,OAAO,OAAO,aAAa,IAAI;AAC9D,QAAM,oBAAoB,eAAe,UAAU,WAAW;AAC9D,QAAM,cAAc,eAAe,WAAW;AAC9C,QAAM,CAAC,SAAS,UAAU,IAAU,gBAAuC,IAAI;AAC/E,QAAM,CAAC,SAAS,UAAU,IAAU,gBAAoC,IAAI;AAC5E,QAAM,mBAAmB,eAAe,YAAY;AAG9C,EAAA,iBAAU,MAAM;AACpB,QAAI,kBAAkB,SAAS,MAAO,kBAAiB,KAAK;AAC5D,WAAO,MAAM,iBAAiB,KAAK;EACrC,GAAG,CAAC,kBAAkB,MAAM,gBAAgB,CAAC;AAE7C,SACE,6CAAiB,OAAhB,EAAsB,GAAG,aACxB,UAAA;IAAC;IAAA;MACC,OAAO;MACP;MACA,cAAc;MACd;MACA,iBAAiB;MAEjB,UAAA;QAAC;QAAA;UACC,OAAO;UACP,WAAW,MAAM;UACjB,WAAW,MAAM;UACjB;UACA,iBAAiB;UAEhB;QAAA;MACH;IAAA;EACF,EAAA,CACF;AAEJ;AAEA,QAAQ,cAAc;AAMtB,IAAM,mBAAmB;AAKzB,IAAM,iBAAuB;EAC3B,CAAC,OAAyC,iBAAiB;AACzD,UAAM,UAAU,eAAe,kBAAkB,MAAM,WAAW;AAClE,UAAM,cAAc,mBAAmB,kBAAkB,MAAM,WAAW;AAC1E,UAAM,aAAa,kBAAkB,kBAAkB,MAAM,WAAW;AACxE,UAAM,iBAAiB,sBAAsB,kBAAkB,MAAM,WAAW;AAChF,UAAM,eAAqB,cAAsB,IAAI;AACrD,UAAM,EAAE,sBAAsB,2BAA2B,IAAI;AAC7D,UAAM,QAAQ,EAAE,aAAa,MAAM,YAAY;AAE/C,UAAM,iBAAuB,mBAAY,MAAM;AAC7C,UAAI,aAAa,QAAS,QAAO,aAAa,aAAa,OAAO;AAClE,mBAAa,UAAU;IACzB,GAAG,CAAC,CAAC;AAEC,IAAA,iBAAU,MAAM,gBAAgB,CAAC,cAAc,CAAC;AAEhD,IAAA,iBAAU,MAAM;AACpB,YAAM,oBAAoB,qBAAqB;AAC/C,aAAO,MAAM;AACX,eAAO,aAAa,iBAAiB;AACrC,mCAA2B,IAAI;MACjC;IACF,GAAG,CAAC,sBAAsB,0BAA0B,CAAC;AAErD,WACE,6CAAC,YAAA,EAAW,SAAO,MAAE,GAAG,OACtB,UAAA;MAAC;MAAA;QACC,IAAI,WAAW;QACf,iBAAc;QACd,iBAAe,QAAQ;QACvB,iBAAe,WAAW;QAC1B,cAAY,aAAa,QAAQ,IAAI;QACpC,GAAG;QACJ,KAAK,YAAY,cAAc,WAAW,eAAe;QAGzD,SAAS,CAAC,UAAU;AAClB,gBAAM,UAAU,KAAK;AACrB,cAAI,MAAM,YAAY,MAAM,iBAAkB;AAM9C,gBAAM,cAAc,MAAM;AAC1B,cAAI,CAAC,QAAQ,KAAM,SAAQ,aAAa,IAAI;QAC9C;QACA,eAAe;UACb,MAAM;UACN,UAAU,CAAC,UAAU;AACnB,2BAAe,YAAY,KAAK;AAChC,gBAAI,MAAM,iBAAkB;AAC5B,gBAAI,CAAC,MAAM,YAAY,CAAC,QAAQ,QAAQ,CAAC,aAAa,SAAS;AAC7D,6BAAe,2BAA2B,IAAI;AAC9C,2BAAa,UAAU,OAAO,WAAW,MAAM;AAC7C,wBAAQ,aAAa,IAAI;AACzB,+BAAe;cACjB,GAAG,GAAG;YACR;UACF,CAAC;QACH;QACA,gBAAgB;UACd,MAAM;UACN,UAAU,CAAC,UAAU;AACnB,2BAAe;AAEf,kBAAM,cAAc,QAAQ,SAAS,sBAAsB;AAC3D,gBAAI,aAAa;AAEf,oBAAM,OAAO,QAAQ,SAAS,QAAQ;AACtC,oBAAM,YAAY,SAAS;AAC3B,oBAAM,QAAQ,YAAY,KAAK;AAC/B,oBAAM,kBAAkB,YAAY,YAAY,SAAS,OAAO;AAChE,oBAAM,iBAAiB,YAAY,YAAY,UAAU,MAAM;AAE/D,6BAAe,2BAA2B;gBACxC,MAAM;;;kBAGJ,EAAE,GAAG,MAAM,UAAU,OAAO,GAAG,MAAM,QAAQ;kBAC7C,EAAE,GAAG,iBAAiB,GAAG,YAAY,IAAI;kBACzC,EAAE,GAAG,gBAAgB,GAAG,YAAY,IAAI;kBACxC,EAAE,GAAG,gBAAgB,GAAG,YAAY,OAAO;kBAC3C,EAAE,GAAG,iBAAiB,GAAG,YAAY,OAAO;gBAC9C;gBACA;cACF,CAAC;AAED,qBAAO,aAAa,qBAAqB,OAAO;AAChD,mCAAqB,UAAU,OAAO;gBACpC,MAAM,eAAe,2BAA2B,IAAI;gBACpD;cACF;YACF,OAAO;AACL,6BAAe,eAAe,KAAK;AACnC,kBAAI,MAAM,iBAAkB;AAG5B,6BAAe,2BAA2B,IAAI;YAChD;UACF,CAAC;QACH;QACA,WAAW,qBAAqB,MAAM,WAAW,CAAC,UAAU;AAC1D,gBAAM,gBAAgB,eAAe,UAAU,YAAY;AAC3D,cAAI,MAAM,YAAa,iBAAiB,MAAM,QAAQ,IAAM;AAC5D,cAAI,cAAc,YAAY,GAAG,EAAE,SAAS,MAAM,GAAG,GAAG;AACtD,oBAAQ,aAAa,IAAI;AAGzB,oBAAQ,SAAS,MAAM;AAEvB,kBAAM,eAAe;UACvB;QACF,CAAC;MAAA;IACH,EAAA,CACF;EAEJ;AACF;AAEA,eAAe,cAAc;AAM7B,IAAM,mBAAmB;AAezB,IAAM,iBAAuB;EAC3B,CAAC,OAAyC,iBAAiB;AACzD,UAAM,gBAAgB,iBAAiB,cAAc,MAAM,WAAW;AACtE,UAAM,EAAE,aAAa,cAAc,YAAY,GAAG,gBAAgB,IAAI;AACtE,UAAM,UAAU,eAAe,cAAc,MAAM,WAAW;AAC9D,UAAM,cAAc,mBAAmB,cAAc,MAAM,WAAW;AACtE,UAAM,aAAa,kBAAkB,kBAAkB,MAAM,WAAW;AACxE,UAAM,MAAY,cAA8B,IAAI;AACpD,UAAM,eAAe,gBAAgB,cAAc,GAAG;AACtD,WACE,6CAACA,YAAW,UAAX,EAAoB,OAAO,MAAM,aAChC,UAAA,6CAAC,UAAA,EAAS,SAAS,cAAc,QAAQ,MACvC,UAAA,6CAACA,YAAW,MAAX,EAAgB,OAAO,MAAM,aAC5B,UAAA;MAAC;MAAA;QACC,IAAI,WAAW;QACf,mBAAiB,WAAW;QAC3B,GAAG;QACJ,KAAK;QACL,OAAM;QACN,MAAM,YAAY,QAAQ,QAAQ,SAAS;QAC3C,6BAA6B;QAC7B,sBAAsB;QACtB,WAAW;QACX,iBAAiB,CAAC,UAAU;AAE1B,cAAI,YAAY,mBAAmB,QAAS,KAAI,SAAS,MAAM;AAC/D,gBAAM,eAAe;QACvB;QAGA,kBAAkB,CAAC,UAAU,MAAM,eAAe;QAClD,gBAAgB,qBAAqB,MAAM,gBAAgB,CAAC,UAAU;AAGpE,cAAI,MAAM,WAAW,WAAW,QAAS,SAAQ,aAAa,KAAK;QACrE,CAAC;QACD,iBAAiB,qBAAqB,MAAM,iBAAiB,CAAC,UAAU;AACtE,sBAAY,QAAQ;AAEpB,gBAAM,eAAe;QACvB,CAAC;QACD,WAAW,qBAAqB,MAAM,WAAW,CAAC,UAAU;AAE1D,gBAAM,kBAAkB,MAAM,cAAc,SAAS,MAAM,MAAqB;AAChF,gBAAM,aAAa,eAAe,YAAY,GAAG,EAAE,SAAS,MAAM,GAAG;AACrE,cAAI,mBAAmB,YAAY;AACjC,oBAAQ,aAAa,KAAK;AAE1B,uBAAW,SAAS,MAAM;AAE1B,kBAAM,eAAe;UACvB;QACF,CAAC;MAAA;IACH,EAAA,CACF,EAAA,CACF,EAAA,CACF;EAEJ;AACF;AAEA,eAAe,cAAc;AAI7B,SAAS,aAAa,MAAe;AACnC,SAAO,OAAO,SAAS;AACzB;AAEA,SAAS,gBAAgB,SAAoD;AAC3E,SAAO,YAAY;AACrB;AAEA,SAAS,gBAAgB,SAAuB;AAC9C,SAAO,gBAAgB,OAAO,IAAI,kBAAkB,UAAU,YAAY;AAC5E;AAEA,SAASI,YAAW,YAA2B;AAC7C,QAAM,6BAA6B,SAAS;AAC5C,aAAW,aAAa,YAAY;AAElC,QAAI,cAAc,2BAA4B;AAC9C,cAAU,MAAM;AAChB,QAAI,SAAS,kBAAkB,2BAA4B;EAC7D;AACF;AAMA,SAASG,WAAa,OAAY,YAAoB;AACpD,SAAO,MAAM,IAAI,CAACC,IAAG,UAAU,OAAO,aAAa,SAAS,MAAM,MAAM,CAAC;AAC3E;AAmBA,SAAS,aAAa,QAAkB,QAAgB,cAAuB;AAC7E,QAAM,aAAa,OAAO,SAAS,KAAK,MAAM,KAAK,MAAM,EAAE,MAAM,CAAC,SAAS,SAAS,OAAO,CAAC,CAAC;AAC7F,QAAM,mBAAmB,aAAa,OAAO,CAAC,IAAI;AAClD,QAAM,oBAAoB,eAAe,OAAO,QAAQ,YAAY,IAAI;AACxE,MAAI,gBAAgBD,WAAU,QAAQ,KAAK,IAAI,mBAAmB,CAAC,CAAC;AACpE,QAAM,sBAAsB,iBAAiB,WAAW;AACxD,MAAI,oBAAqB,iBAAgB,cAAc,OAAO,CAACE,OAAMA,OAAM,YAAY;AACvF,QAAM,YAAY,cAAc;IAAK,CAAC,UACpC,MAAM,YAAY,EAAE,WAAW,iBAAiB,YAAY,CAAC;EAC/D;AACA,SAAO,cAAc,eAAe,YAAY;AAClD;AASA,SAAS,iBAAiB,OAAc,SAAkB;AACxD,QAAM,EAAE,GAAAC,IAAG,GAAAC,GAAE,IAAI;AACjB,MAAI,SAAS;AACb,WAASC,KAAI,GAAGC,KAAI,QAAQ,SAAS,GAAGD,KAAI,QAAQ,QAAQC,KAAID,MAAK;AACnE,UAAM,KAAK,QAAQA,EAAC,EAAE;AACtB,UAAM,KAAK,QAAQA,EAAC,EAAE;AACtB,UAAM,KAAK,QAAQC,EAAC,EAAE;AACtB,UAAM,KAAK,QAAQA,EAAC,EAAE;AAGtB,UAAM,YAAc,KAAKF,OAAQ,KAAKA,MAAQD,MAAK,KAAK,OAAOC,KAAI,OAAO,KAAK,MAAM;AACrF,QAAI,UAAW,UAAS,CAAC;EAC3B;AAEA,SAAO;AACT;AAEA,SAAS,qBAAqB,OAA2B,MAAgB;AACvE,MAAI,CAAC,KAAM,QAAO;AAClB,QAAM,YAAY,EAAE,GAAG,MAAM,SAAS,GAAG,MAAM,QAAQ;AACvD,SAAO,iBAAiB,WAAW,IAAI;AACzC;AAEA,SAAS,UAAa,SAAqE;AACzF,SAAO,CAAC,UAAW,MAAM,gBAAgB,UAAU,QAAQ,KAAK,IAAI;AACtE;AAEA,IAAMR,SAAO;AACb,IAAMW,UAAS;AACf,IAAMC,UAAS;AACf,IAAMC,YAAU;AAChB,IAAM,QAAQ;AACd,IAAMC,SAAQ;AACd,IAAMC,QAAO;AACb,IAAM,eAAe;AACrB,IAAM,aAAa;AACnB,IAAM,YAAY;AAClB,IAAM,gBAAgB;AACtB,IAAM,YAAY;AAClB,IAAMC,SAAQ;AACd,IAAM,MAAM;AACZ,IAAM,aAAa;AACnB,IAAM,aAAa;;;ADxuCb,IAAAC,sBAAA;AA5DN,IAAM,qBAAqB;AAG3B,IAAM,CAAC,2BAA2B,uBAAuB,IAAI;EAC3D;EACA,CAAC,eAAe;AAClB;AACA,IAAM,eAAe,gBAAgB;AAYrC,IAAM,CAAC,sBAAsB,sBAAsB,IACjD,0BAAoD,kBAAkB;AAWxE,IAAM,eAA4C,CAAC,UAA0C;AAC3F,QAAM;IACJ;IACA;IACA;IACA,MAAM;IACN;IACA;IACA,QAAQ;EACV,IAAI;AACJ,QAAM,YAAY,aAAa,mBAAmB;AAClD,QAAM,aAAmB,cAA0B,IAAI;AACvD,QAAM,CAAC,OAAO,OAAO,OAAO,IAAI,qBAAqB;IACnD,MAAM;IACN,aAAa;IACb,UAAU;EACZ,CAAC;AAED,SACE;IAAC;IAAA;MACC,OAAO;MACP,WAAW,MAAM;MACjB;MACA,WAAW,MAAM;MACjB;MACA,cAAc;MACd,cAAoB,mBAAY,MAAM,QAAQ,CAAC,aAAa,CAAC,QAAQ,GAAG,CAAC,OAAO,CAAC;MACjF;MAEA,UAAA,6CAAeC,QAAd,EAAoB,GAAG,WAAW,MAAY,cAAc,SAAS,KAAU,OAC7E,SAAA,CACH;IAAA;EACF;AAEJ;AAEA,aAAa,cAAc;AAM3B,IAAM,eAAe;AAMrB,IAAM,sBAA4B;EAChC,CAAC,OAA8C,iBAAiB;AAC9D,UAAM,EAAE,qBAAqB,WAAW,OAAO,GAAG,aAAa,IAAI;AACnE,UAAM,UAAU,uBAAuB,cAAc,mBAAmB;AACxE,UAAM,YAAY,aAAa,mBAAmB;AAClD,WACE,6CAAe,SAAd,EAAqB,SAAO,MAAE,GAAG,WAChC,UAAA;MAAC,UAAU;MAAV;QACC,MAAK;QACL,IAAI,QAAQ;QACZ,iBAAc;QACd,iBAAe,QAAQ;QACvB,iBAAe,QAAQ,OAAO,QAAQ,YAAY;QAClD,cAAY,QAAQ,OAAO,SAAS;QACpC,iBAAe,WAAW,KAAK;QAC/B;QACC,GAAG;QACJ,KAAK,YAAY,cAAc,QAAQ,UAAU;QACjD,eAAe,qBAAqB,MAAM,eAAe,CAAC,UAAU;AAGlE,cAAI,CAAC,YAAY,MAAM,WAAW,KAAK,MAAM,YAAY,OAAO;AAC9D,oBAAQ,aAAa;AAGrB,gBAAI,CAAC,QAAQ,KAAM,OAAM,eAAe;UAC1C;QACF,CAAC;QACD,WAAW,qBAAqB,MAAM,WAAW,CAAC,UAAU;AAC1D,cAAI,SAAU;AACd,cAAI,CAAC,SAAS,GAAG,EAAE,SAAS,MAAM,GAAG,EAAG,SAAQ,aAAa;AAC7D,cAAI,MAAM,QAAQ,YAAa,SAAQ,aAAa,IAAI;AAGxD,cAAI,CAAC,SAAS,KAAK,WAAW,EAAE,SAAS,MAAM,GAAG,EAAG,OAAM,eAAe;QAC5E,CAAC;MAAA;IACH,EAAA,CACF;EAEJ;AACF;AAEA,oBAAoB,cAAc;AAMlC,IAAMC,eAAc;AAKpB,IAAM,qBAAwD,CAC5D,UACG;AACH,QAAM,EAAE,qBAAqB,GAAG,YAAY,IAAI;AAChD,QAAM,YAAY,aAAa,mBAAmB;AAClD,SAAO,6CAAeC,SAAd,EAAsB,GAAG,WAAY,GAAG,YAAA,CAAa;AAC/D;AAEA,mBAAmB,cAAcD;AAMjC,IAAME,gBAAe;AAMrB,IAAM,sBAA4B;EAChC,CAAC,OAA8C,iBAAiB;AAC9D,UAAM,EAAE,qBAAqB,GAAG,aAAa,IAAI;AACjD,UAAM,UAAU,uBAAuBA,eAAc,mBAAmB;AACxE,UAAM,YAAY,aAAa,mBAAmB;AAClD,UAAM,0BAAgC,cAAO,KAAK;AAElD,WACE;MAAeC;MAAd;QACC,IAAI,QAAQ;QACZ,mBAAiB,QAAQ;QACxB,GAAG;QACH,GAAG;QACJ,KAAK;QACL,kBAAkB,qBAAqB,MAAM,kBAAkB,CAAC,UAAU;AACxE,cAAI,CAAC,wBAAwB,QAAS,SAAQ,WAAW,SAAS,MAAM;AACxE,kCAAwB,UAAU;AAElC,gBAAM,eAAe;QACvB,CAAC;QACD,mBAAmB,qBAAqB,MAAM,mBAAmB,CAAC,UAAU;AAC1E,gBAAM,gBAAgB,MAAM,OAAO;AACnC,gBAAM,gBAAgB,cAAc,WAAW,KAAK,cAAc,YAAY;AAC9E,gBAAM,eAAe,cAAc,WAAW,KAAK;AACnD,cAAI,CAAC,QAAQ,SAAS,aAAc,yBAAwB,UAAU;QACxE,CAAC;QACD,OAAO;UACL,GAAG,MAAM;;UAET,GAAG;YACD,kDACE;YACF,iDAAiD;YACjD,kDACE;YACF,uCAAuC;YACvC,wCAAwC;UAC1C;QACF;MAAA;IACF;EAEJ;AACF;AAEA,oBAAoB,cAAcD;AAMlC,IAAME,cAAa;AAMnB,IAAM,oBAA0B;EAC9B,CAAC,OAA4C,iBAAiB;AAC5D,UAAM,EAAE,qBAAqB,GAAG,WAAW,IAAI;AAC/C,UAAM,YAAY,aAAa,mBAAmB;AAClD,WAAO,6CAAe,OAAd,EAAqB,GAAG,WAAY,GAAG,YAAY,KAAK,aAAA,CAAc;EAChF;AACF;AAEA,kBAAkB,cAAcA;AAMhC,IAAMC,cAAa;AAMnB,IAAM,oBAA0B;EAC9B,CAAC,OAA4C,iBAAiB;AAC5D,UAAM,EAAE,qBAAqB,GAAG,WAAW,IAAI;AAC/C,UAAM,YAAY,aAAa,mBAAmB;AAClD,WAAO,6CAAeC,QAAd,EAAqB,GAAG,WAAY,GAAG,YAAY,KAAK,aAAA,CAAc;EAChF;AACF;AAEA,kBAAkB,cAAcD;AAMhC,IAAME,aAAY;AAMlB,IAAM,mBAAyB;EAC7B,CAAC,OAA2C,iBAAiB;AAC3D,UAAM,EAAE,qBAAqB,GAAG,UAAU,IAAI;AAC9C,UAAM,YAAY,aAAa,mBAAmB;AAClD,WAAO,6CAAe,OAAd,EAAoB,GAAG,WAAY,GAAG,WAAW,KAAK,aAAA,CAAc;EAC9E;AACF;AAEA,iBAAiB,cAAcA;AAM/B,IAAMC,sBAAqB;AAM3B,IAAM,2BAAiC,kBAGrC,CAAC,OAAmD,iBAAiB;AACrE,QAAM,EAAE,qBAAqB,GAAG,kBAAkB,IAAI;AACtD,QAAM,YAAY,aAAa,mBAAmB;AAClD,SAAO,6CAAe,cAAd,EAA4B,GAAG,WAAY,GAAG,mBAAmB,KAAK,aAAA,CAAc;AAC9F,CAAC;AAED,yBAAyB,cAAcA;AAMvC,IAAMC,oBAAmB;AAMzB,IAAM,yBAA+B,kBAGnC,CAAC,OAAiD,iBAAiB;AACnE,QAAM,EAAE,qBAAqB,GAAG,gBAAgB,IAAI;AACpD,QAAM,YAAY,aAAa,mBAAmB;AAClD,SAAO,6CAAe,YAAd,EAA0B,GAAG,WAAY,GAAG,iBAAiB,KAAK,aAAA,CAAc;AAC1F,CAAC;AAED,uBAAuB,cAAcA;AAMrC,IAAMC,mBAAkB;AAMxB,IAAM,wBAA8B,kBAGlC,CAAC,OAAgD,iBAAiB;AAClE,QAAM,EAAE,qBAAqB,GAAG,eAAe,IAAI;AACnD,QAAM,YAAY,aAAa,mBAAmB;AAClD,SAAO,6CAAe,WAAd,EAAyB,GAAG,WAAY,GAAG,gBAAgB,KAAK,aAAA,CAAc;AACxF,CAAC;AAED,sBAAsB,cAAcA;AAMpC,IAAM,iBAAiB;AAMvB,IAAM,4BAAkC,kBAGtC,CAAC,OAAoD,iBAAiB;AACtE,QAAM,EAAE,qBAAqB,GAAG,mBAAmB,IAAI;AACvD,QAAM,YAAY,aAAa,mBAAmB;AAClD,SAAO,6CAAe,eAAd,EAA6B,GAAG,WAAY,GAAG,oBAAoB,KAAK,aAAA,CAAc;AAChG,CAAC;AAED,0BAA0B,cAAc;AAMxC,IAAMC,kBAAiB;AAMvB,IAAM,wBAA8B,kBAGlC,CAAC,OAAgD,iBAAiB;AAClE,QAAM,EAAE,qBAAqB,GAAG,eAAe,IAAI;AACnD,QAAM,YAAY,aAAa,mBAAmB;AAClD,SAAO,6CAAe,WAAd,EAAyB,GAAG,WAAY,GAAG,gBAAgB,KAAK,aAAA,CAAc;AACxF,CAAC;AAED,sBAAsB,cAAcA;AAMpC,IAAMC,cAAa;AAMnB,IAAM,oBAA0B;EAC9B,CAAC,OAA4C,iBAAiB;AAC5D,UAAM,EAAE,qBAAqB,GAAG,WAAW,IAAI;AAC/C,UAAM,YAAY,aAAa,mBAAmB;AAClD,WAAO,6CAAe,QAAd,EAAqB,GAAG,WAAY,GAAG,YAAY,KAAK,aAAA,CAAc;EAChF;AACF;AAEA,kBAAkB,cAAcA;AAahC,IAAM,kBAAkD,CACtD,UACG;AACH,QAAM,EAAE,qBAAqB,UAAU,MAAM,UAAU,cAAc,YAAY,IAAI;AACrF,QAAM,YAAY,aAAa,mBAAmB;AAClD,QAAM,CAAC,OAAO,OAAO,OAAO,IAAI,qBAAqB;IACnD,MAAM;IACN,aAAa;IACb,UAAU;EACZ,CAAC;AAED,SACE,6CAAe,KAAd,EAAmB,GAAG,WAAW,MAAY,cAAc,SACzD,SAAA,CACH;AAEJ;AAMA,IAAMC,oBAAmB;AAMzB,IAAM,yBAA+B,kBAGnC,CAAC,OAAiD,iBAAiB;AACnE,QAAM,EAAE,qBAAqB,GAAG,gBAAgB,IAAI;AACpD,QAAM,YAAY,aAAa,mBAAmB;AAClD,SAAO,6CAAe,YAAd,EAA0B,GAAG,WAAY,GAAG,iBAAiB,KAAK,aAAA,CAAc;AAC1F,CAAC;AAED,uBAAuB,cAAcA;AAMrC,IAAMC,oBAAmB;AAMzB,IAAM,yBAA+B,kBAGnC,CAAC,OAAiD,iBAAiB;AACnE,QAAM,EAAE,qBAAqB,GAAG,gBAAgB,IAAI;AACpD,QAAM,YAAY,aAAa,mBAAmB;AAElD,SACE;IAAe;IAAd;MACE,GAAG;MACH,GAAG;MACJ,KAAK;MACL,OAAO;QACL,GAAG,MAAM;;QAET,GAAG;UACD,kDAAkD;UAClD,iDAAiD;UACjD,kDAAkD;UAClD,uCAAuC;UACvC,wCAAwC;QAC1C;MACF;IAAA;EACF;AAEJ,CAAC;AAED,uBAAuB,cAAcA;AAIrC,IAAMC,SAAO;AACb,IAAMC,WAAU;AAChB,IAAMf,WAAS;AACf,IAAMgB,YAAU;AAChB,IAAMC,SAAQ;AACd,IAAMZ,UAAQ;AACd,IAAMa,SAAO;AACb,IAAMC,gBAAe;AACrB,IAAMC,cAAa;AACnB,IAAMC,aAAY;AAClB,IAAMC,iBAAgB;AACtB,IAAMC,aAAY;AAClB,IAAMC,UAAQ;AACd,IAAMC,OAAM;AACZ,IAAMC,cAAa;AACnB,IAAMC,cAAa;;;AGtenB,IAAAC,iBAA2B;AAKhB,IAAAC,0BAAA;AAzBX,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,sCAAwC,EAAE;AAAA,EACnF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAON,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAiC;AACjC,cAAY,IAAI,eAAe;AACjC;AAMA,IAAMC,aAAQ,2BAAWC,OAAK,CAAC;AAAA,EAC7B;AAAA,EACA,GAAG;AACL,GAAG,QAAQ,oDAAcC,SAAb,EAAmB,KAAU,WAAW,GAAG,iCAAiC,SAAS,GAAI,GAAG,QAA7F;AAAA;AAAA;AAAA;AAAA,CAAmG,CAAE;AAChHC,OAAMH;AACNA,OAAM,cAAc;AACpB,IAAMI,eAAU,2BAAWC,OAAM,CAAC;AAAA,EAChC;AAAA,EACA,GAAG;AACL,GAAG,QAAQ,oDAAcC,WAAb,EAAqB,KAAU,WAAW,GAAG,YAAY,oBAAoB,cAAc,OAAO,aAAa,aAAa,oBAAoB,mCAAmC,4CAA4C,8CAA8C,6CAA6C,8CAA8C,SAAS,GAAI,GAAG,QAAzX;AAAA;AAAA;AAAA;AAAA,CAA+X,CAAE;AAC5YC,OAAMH;AACNA,SAAQ,cAAc;AACtB,IAAMI,YAAO,2BAAWC,OAAM,CAAC;AAAA,EAC7B;AAAA,EACA,GAAG;AACL,GAAG,QAAQ,oDAAcC,QAAb,EAAkB,KAAU,WAAW,GAAG,SAAS,aAAa,gBAAgB,iBAAiB,sBAAsB,WAAW,QAAQ,gBAAgB,OAAO,gBAAgB,YAAY,QAAQ,eAAe,gBAAgB,iCAAiC,sCAAsC,sCAAsC,oCAAoC,iCAAiC,SAAS,GAAI,GAAG,QAAva;AAAA;AAAA;AAAA;AAAA,CAA6a,CAAE;AAC1bC,OAAMH;AACNA,MAAK,cAAc;AACnB,IAAO,uBAAQ;AAAA,EACb,GAAGI;AAAA,EACH,OAAAZ;AAAA,EACA,SAAAI;AAAA,EACA,MAAAI;AACF;AACA,IAAIP;AAAJ,IAAQE;AAAR,IAAaE;AAAb,IAAkBE;AAAlB,IAAuBE;AAAvB,IAA4BE;AAC5B,aAAaV,MAAI,kBAAkB;AACnC,aAAaE,MAAK,OAAO;AACzB,aAAaE,MAAK,oBAAoB;AACtC,aAAaE,MAAK,SAAS;AAC3B,aAAaE,MAAK,iBAAiB;AACnC,aAAaE,MAAK,MAAM;AAExB,OAAO,eAAe;AACtB,OAAO,eAAe;;;ACtDtB,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAGe,SAAR,kBACN,WACA,WACC;AACD,MAAI,CAAC,UAAW,QAAO;AACvB,QAAM,MAAM,IAAI,IAAI,SAAS;AAE7B,QAAM,MAAM,CAAC,oBAAI,KAAK;AACtB,QAAM,QAAQ,MAAM;AACpB,MAAI,aAAa,IAAI,UAAU,QAAQ,KAAM,SAAS,CAAC;AACvD,MAAI,aAAa,IAAI,QAAQ,MAAM,KAAM,SAAS,CAAC;AACnD,MAAI,aAAa,IAAI,QAAQ,KAAK,UAAU,EAAE,kBAAkB,UAAU,CAAC,CAAC;AAE5E,SAAO,IAAI,SAAS;AACrB;;;;;;;;;;;;;;;;;;;;;;;;;ACzBA,IAAAE,SAAuB;AA4Bd,IAAAC,sBAAA;AAdT,IAAM,YAAY;AAGlB,IAAM,CAAC,0BAA0B,sBAAsB,IAAI,mBAAmB,WAAW;EACvF;AACF,CAAC;AACD,IAAM,iBAAiB,kBAAkB;AAKzC,IAAM,cAA0C,CAAC,UAAyC;AACxF,QAAM,EAAE,oBAAoB,GAAG,iBAAiB,IAAI;AACpD,QAAM,cAAc,eAAe,kBAAkB;AACrD,SAAO,6CAAiBC,OAAhB,EAAsB,GAAG,aAAc,GAAG,kBAAkB,OAAO,KAAA,CAAM;AACnF;AAEA,YAAY,cAAc;AAK1B,IAAMC,gBAAe;AAMrB,IAAM,qBAA2B;EAC/B,CAAC,OAA6C,iBAAiB;AAC7D,UAAM,EAAE,oBAAoB,GAAG,aAAa,IAAI;AAChD,UAAM,cAAc,eAAe,kBAAkB;AACrD,WAAO,6CAAiB,SAAhB,EAAyB,GAAG,aAAc,GAAG,cAAc,KAAK,aAAA,CAAc;EACxF;AACF;AAEA,mBAAmB,cAAcA;AAMjC,IAAMC,eAAc;AAKpB,IAAM,oBAAsD,CAC1D,UACG;AACH,QAAM,EAAE,oBAAoB,GAAG,YAAY,IAAI;AAC/C,QAAM,cAAc,eAAe,kBAAkB;AACrD,SAAO,6CAAiBC,SAAhB,EAAwB,GAAG,aAAc,GAAG,YAAA,CAAa;AACnE;AAEA,kBAAkB,cAAcD;AAMhC,IAAM,eAAe;AAMrB,IAAM,qBAA2B;EAC/B,CAAC,OAA6C,iBAAiB;AAC7D,UAAM,EAAE,oBAAoB,GAAG,aAAa,IAAI;AAChD,UAAM,cAAc,eAAe,kBAAkB;AACrD,WAAO,6CAAiB,SAAhB,EAAyB,GAAG,aAAc,GAAG,cAAc,KAAK,aAAA,CAAc;EACxF;AACF;AAEA,mBAAmB,cAAc;AAMjC,IAAME,gBAAe;AAMrB,IAAM,CAAC,4BAA4B,4BAA4B,IAC7D,yBAAyDA,aAAY;AAOvE,IAAM,qBAA2B;EAC/B,CAAC,OAA6C,iBAAiB;AAC7D,UAAM,EAAE,oBAAoB,UAAU,GAAG,aAAa,IAAI;AAC1D,UAAM,cAAc,eAAe,kBAAkB;AACrD,UAAM,aAAmB,cAAkC,IAAI;AAC/D,UAAM,eAAe,gBAAgB,cAAc,UAAU;AAC7D,UAAM,YAAkB,cAAwC,IAAI;AAEpE,WACE;MAAiB;MAAhB;QACC,aAAaA;QACb,WAAW;QACX,UAAS;QAET,UAAA,6CAAC,4BAAA,EAA2B,OAAO,oBAAoB,WACrD,UAAA;UAAiBC;UAAhB;YACC,MAAK;YACJ,GAAG;YACH,GAAG;YACJ,KAAK;YACL,iBAAiB,qBAAqB,aAAa,iBAAiB,CAAC,UAAU;AAC7E,oBAAM,eAAe;AACrB,wBAAU,SAAS,MAAM,EAAE,eAAe,KAAK,CAAC;YAClD,CAAC;YACD,sBAAsB,CAAC,UAAU,MAAM,eAAe;YACtD,mBAAmB,CAAC,UAAU,MAAM,eAAe;YAQnD,UAAA;cAAA,6CAAC,WAAA,EAAW,SAAA,CAAS;cAEnB,6CAAC,oBAAA,EAAmB,WAAA,CAAwB;YAAA;UAAA;QAEhD,EAAA,CACF;MAAA;IACF;EAEJ;AACF;AAEA,mBAAmB,cAAcD;AAMjC,IAAM,aAAa;AAMnB,IAAM,mBAAyB;EAC7B,CAAC,OAA2C,iBAAiB;AAC3D,UAAM,EAAE,oBAAoB,GAAG,WAAW,IAAI;AAC9C,UAAM,cAAc,eAAe,kBAAkB;AACrD,WAAO,6CAAiB,OAAhB,EAAuB,GAAG,aAAc,GAAG,YAAY,KAAK,aAAA,CAAc;EACpF;AACF;AAEA,iBAAiB,cAAc;AAM/B,IAAM,mBAAmB;AAMzB,IAAM,yBAA+B,kBAGnC,CAAC,OAAiD,iBAAiB;AACnE,QAAM,EAAE,oBAAoB,GAAG,iBAAiB,IAAI;AACpD,QAAM,cAAc,eAAe,kBAAkB;AACrD,SAAO,6CAAiB,aAAhB,EAA6B,GAAG,aAAc,GAAG,kBAAkB,KAAK,aAAA,CAAc;AAChG,CAAC;AAED,uBAAuB,cAAc;AAMrC,IAAM,cAAc;AAMpB,IAAM,oBAA0B;EAC9B,CAAC,OAA4C,iBAAiB;AAC5D,UAAM,EAAE,oBAAoB,GAAG,YAAY,IAAI;AAC/C,UAAM,cAAc,eAAe,kBAAkB;AACrD,WAAO,6CAAiB,OAAhB,EAAuB,GAAG,aAAc,GAAG,aAAa,KAAK,aAAA,CAAc;EACrF;AACF;AAEA,kBAAkB,cAAc;AAMhC,IAAM,cAAc;AAKpB,IAAM,oBAA0B;EAC9B,CAAC,OAA4C,iBAAiB;AAC5D,UAAM,EAAE,oBAAoB,GAAG,YAAY,IAAI;AAC/C,UAAM,EAAE,UAAU,IAAI,6BAA6B,aAAa,kBAAkB;AAClF,UAAM,cAAc,eAAe,kBAAkB;AACrD,UAAM,MAAM,gBAAgB,cAAc,SAAS;AACnD,WAAO,6CAAiB,OAAhB,EAAuB,GAAG,aAAc,GAAG,aAAa,IAAA,CAAU;EAC5E;AACF;AAEA,kBAAkB,cAAc;AAQhC,IAAM,qBAAwD,CAAC,EAAE,WAAW,MAAM;AAChF,QAAM,UAAU,KAAKA,aAAY;;qCAEEA,aAAY,qBAAqB,gBAAgB;;4JAEsEA,aAAY;;;AAIhK,EAAA,iBAAU,MAAM;AACpB,UAAM,iBAAiB,SAAS;MAC9B,WAAW,SAAS,aAAa,kBAAkB;IACrD;AACA,QAAI,CAAC,eAAgB,SAAQ,KAAK,OAAO;EAC3C,GAAG,CAAC,SAAS,UAAU,CAAC;AAExB,SAAO;AACT;AAEA,IAAMJ,SAAO;AACb,IAAMM,YAAU;AAChB,IAAMH,WAAS;AACf,IAAMI,WAAU;AAChB,IAAMF,YAAU;AAChB,IAAM,SAAS;AACf,IAAM,SAAS;AACf,IAAMG,SAAQ;AACd,IAAMC,gBAAc;;;ACzPpB,IAAAC,iBAA2B;AAKhB,IAAAC,2BAAA;AAzBX,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,qCAAuC,EAAE;AAAA,EAClF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAON,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAgC;AAChC,cAAY,IAAI,eAAe;AACjC;AAMO,IAAMC,eAAU,2BAAWC,OAAK,CAAC;AAAA,EACtC;AAAA,EACA,GAAG;AACL,GAAG,QAAQ,qDAAa,UAAZ,EAAoB,KAAU,WAAW,GAAG,qCAAqC,SAAS,GAAI,GAAG,QAAlG;AAAA;AAAA;AAAA;AAAA,CAAwG,CAAE;AACrHC,OAAMF;AACNA,SAAQ,cAAc;AACf,IAAMG,eAAU,2BAAWC,OAAM,CAAC;AAAA,EACvC,WAAW;AAAA,EACX;AAAA,EACA,GAAG;AACL,GAAG,QAAQ,qDAAaC,WAAZ,EAAoB,KAAU,WAAW,GAAG,SAAS,cAAc,WAAW,YAAY,oBAAoB,oBAAoB,2BAA2B,gBAAgB,gBAAgB,mBAAmB,OAAO,cAAc,aAAa,kBAAkB,GAAI,GAAG,MACpR,YADQ;AAAA;AAAA;AAAA;AAAA,CAEV,CAAsB;AACvBC,OAAMH;AACNA,SAAQ,cAAc;AACtB,IAAMI,aAAQ,2BAAWC,OAAM,CAAC;AAAA,EAC9B;AAAA,EACA,GAAG;AACL,GAAG,QAAQ,qDAAa,QAAZ,EAAkB,KAAU,WAAW,GAAG,8DAA8D,SAAS,GAAI,GAAG,QAAzH;AAAA;AAAA;AAAA;AAAA,CAA+H,CAAE;AAC5IC,OAAMF;AACNA,OAAM,cAAc;AACpB,IAAMG,mBAAc,2BAAWC,OAAM,CAAC;AAAA,EACpC;AAAA,EACA,GAAG;AACL,GAAG,QAAQ,qDAAaC,eAAZ,EAAwB,KAAU,WAAW,GAAG,qEAAqE,SAAS,GAAI,GAAG,QAAtI;AAAA;AAAA;AAAA;AAAA,CAA4I,CAAE;AACzJC,OAAMH;AACNA,aAAY,cAAc;AAC1B,IAAM,UAAU,CAAC;AAAA,EACf;AAAA,EACA;AACF,MAAM;AACJ,SAAO,qDAAC,SAAI,WAAW,GAAG,0BAA0B,SAAS,GAAI,YAA1D;AAAA;AAAA;AAAA;AAAA,GAAmE;AAC5E;AACAI,OAAM;AACN,IAAO,sBAAQ;AAAA,EACb,GAAGC;AAAA,EACH,SAAAf;AAAA,EACA,SAAAG;AAAA,EACA,OAAAI;AAAA,EACA,aAAAG;AAAA,EACA;AACF;AACA,IAAIT;AAAJ,IAAQC;AAAR,IAAaE;AAAb,IAAkBE;AAAlB,IAAuBE;AAAvB,IAA4BC;AAA5B,IAAiCE;AAAjC,IAAsCE;AAAtC,IAA2CC;AAC3C,aAAab,MAAI,oBAAoB;AACrC,aAAaC,MAAK,SAAS;AAC3B,aAAaE,MAAK,oBAAoB;AACtC,aAAaE,MAAK,SAAS;AAC3B,aAAaE,MAAK,kBAAkB;AACpC,aAAaC,MAAK,OAAO;AACzB,aAAaE,MAAK,wBAAwB;AAC1C,aAAaE,MAAK,aAAa;AAC/B,aAAaC,MAAK,SAAS;AAE3B,OAAO,eAAe;AACtB,OAAO,eAAe;;;AClCjB,IAAAE,2BAAA;AA1CL,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,wCAA0C,EAAE;AAAA,EACrF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAmC;AACnC,cAAY,IAAI,eAAe;AACjC;AAUO,IAAM,iBAAiB,CAAC;AAAA,EAC7B;AAAA,EACA,cAAc;AAAA,EACd,mBAAmB;AACrB,MAAM;AACJ,EAAAA,KAAG;AACH,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,eAAe;AACnB,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,gBAAgB,KAAK,IAAI;AAC7B,MAAI,KAAK,OAAO,kBAAkB;AAChC,WAAO,qDAAC,WAAQ,SAAQ,2CACxB,+DAAC,UAAO,UAAQ,MAAC,aAAY,aAC5B;AAAA,2DAAC,QAAK,MAAK,UAAS,WAAU,oCAA9B;AAAA;AAAA;AAAA;AAAA,OAA+D;AAAA,MAC/D,qDAAC,kBAAe,yDAAhB;AAAA;AAAA;AAAA;AAAA,OAEA;AAAA,SAJD;AAAA;AAAA;AAAA;AAAA,KAKA,KANO;AAAA;AAAA;AAAA;AAAA,KAOR;AAAA,EACD;AACA,SAAO,qDAAC,oBAAY,MAAZ,EACN;AAAA,SAAK,OAAO,eAAe,qDAAC,WAAQ,SAAS,QAAQ,MAAM,WAAW,IACrE,+DAAC,oBAAY,SAAZ,EAAoB,SAAO,MAC3B,+DAAC,UAAO,aAA0B,UAAU,CAAC,KAAK,OAAO,cACxD,+DAAC,QAAK,MAAK,WAAX;AAAA;AAAA;AAAA;AAAA,KAAmB,KADpB;AAAA;AAAA;AAAA;AAAA,KAEA,KAHD;AAAA;AAAA;AAAA;AAAA,KAIA,KAL0B;AAAA;AAAA;AAAA;AAAA,KAM3B,IAAa,qDAAC,WAAQ,SAAQ,iBAC7B,+DAAC,UAAO,aAAa,kBAAkB,UAAQ,MAC9C,+DAAC,QAAK,MAAK,YAAX;AAAA;AAAA;AAAA;AAAA,KAAoB,KADrB;AAAA;AAAA;AAAA;AAAA,KAEA,KAHY;AAAA;AAAA;AAAA;AAAA,KAIb;AAAA,IAED,qDAAC,oBAAY,QAAZ,EACA;AAAA,2DAAC,oBAAY,SAAZ,IAAD;AAAA;AAAA;AAAA;AAAA,OAAqB;AAAA,MACrB;AAAA,QAAC,oBAAY;AAAA,QAAZ;AAAA,UAGC,kBAAkB,CAAAC,OAAKA,GAAE,eAAe;AAAA,UACzC;AAAA,iEAAC,oBAAY,OAAZ,EAAkB;AAAA;AAAA,cAAM,MAAM;AAAA,iBAA/B;AAAA;AAAA;AAAA;AAAA,aAA2C;AAAA,YAC3C,qDAAC,oBAAY,aAAZ,EAAwB,sEAAzB;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,YACA,qDAAC,oBAAY,SAAZ,EACA;AAAA,mEAAC,oBAAY,QAAZ,EAAmB,SAAO,MAC1B,+DAAC,UAAO,WAAU,WAAU,aAAY,aAAY,sBAApD;AAAA;AAAA;AAAA;AAAA,eAEA,KAHD;AAAA;AAAA;AAAA;AAAA,eAIA;AAAA,cACA,qDAAC,oBAAY,QAAZ,EAAmB,SAAO,MAC1B,+DAAC,UAAO,SAAS,MAAM;AAChB,qBAAK,UAAU,KAAK,KAAK,UAAU;AAAA,kBACjC,MAAM;AAAA,kBACN,IAAI,KAAK;AAAA,gBACX,CAAC,CAAC;AAAA,cACJ,GAAG,WAAU,WAAU,aAAY,UAAS,oBALjD;AAAA;AAAA;AAAA;AAAA,eAOA,KARD;AAAA;AAAA;AAAA;AAAA,eASA;AAAA,iBAfD;AAAA;AAAA;AAAA;AAAA,aAgBA;AAAA;AAAA;AAAA,QAxBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAyBA;AAAA,SA3BD;AAAA;AAAA;AAAA;AAAA,KA4BA;AAAA,OAzCM;AAAA;AAAA;AAAA;AAAA,GA0CP;AACF;AACAD,KAAG,gBAAgB,gCAAgC,OAAO,WAAY;AACpE,SAAO,CAAC,gBAAgB,eAAe;AACzC,CAAC;AACDE,OAAK;AACL,IAAIA;AACJ,aAAaA,MAAI,gBAAgB;AAEjC,OAAO,eAAe;AACtB,OAAO,eAAe;;;AC1EX,IAAAC,2BAAA;AA3BX,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,sCAAwC,EAAE;AAAA,EACnF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAON,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAiC;AACjC,cAAY,IAAI,eAAe;AACjC;AAIO,SAAS,aAAa;AAAA,EAC3B;AAAA,EACA;AAAA,EACA;AAAA,EACA,GAAG;AACL,GAAG;AACD,MAAI,SAAS,QAAW;AACtB,WAAO,qDAAC,UAAK,WAAuB,YAA7B;AAAA;AAAA;AAAA;AAAA,WAAsC;AAAA,EAC/C;AACA,SAAO,qDAAC,OAAE,MAAY,WAAW,GAAG,gCAAgC,SAAS,GAAI,GAAG,MAClF,YADK;AAAA;AAAA;AAAA;AAAA,SAEP;AACF;AACAC,OAAK;AACL,IAAIA;AACJ,aAAaA,MAAI,cAAc;AAE/B,OAAO,eAAe;AACtB,OAAO,eAAe;;;ACUlB,IAAAC,2BAAA;AAhDJ,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,0CAA4C,EAAE;AAAA,EACvF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAAtB,IACEC,OAAM,aAAa;AADrB,IAEEC,OAAM,aAAa;AAFrB,IAGEC,OAAM,aAAa;AAErB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAqC;AACrC,cAAY,IAAI,eAAe;AACjC;AAeA,IAAM,eAAe,CAAC;AAAA,EACpB;AAAA,EACA;AACF,MAAM;AACJ,EAAAH,KAAG;AACH,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,eAAe;AACnB,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,gBAAgB,KAAK,IAAI;AAC7B,SAAO,qDAAC,QAAG,WAAU,yCACpB;AAAA,yDAAC,SAAI,WAAU,2DACd,+DAAC,gBAAa,MAAM,KAAK,uBAAuB,kBAAkB,KAAK,sBAAsB,SAAS,IAAI,QAAW,QAAO,UAAS,KAAI,uBACvI,gBAAM,eADR;AAAA;AAAA;AAAA;AAAA,KAEA,KAHD;AAAA;AAAA;AAAA;AAAA,KAIA;AAAA,IACC,cAAc,KAAK,OAAO,gBAAgB,qDAAC,SAAI,WAAU,QACxD,+DAAC,kBAAe,cAAhB;AAAA;AAAA;AAAA;AAAA,KAAwC,KADC;AAAA;AAAA;AAAA;AAAA,KAE1C;AAAA,IACD,qDAAC,kBAAe,QAAhB;AAAA;AAAA;AAAA;AAAA,KAA4B;AAAA,OATtB;AAAA;AAAA;AAAA;AAAA,GAUP;AACF;AACAA,KAAG,cAAc,gCAAgC,OAAO,WAAY;AAClE,SAAO,CAAC,gBAAgB,eAAe;AACzC,CAAC;AACDI,OAAK;AACL,IAAM,YAAY,CAAC;AAAA,EACjB;AACF,MAAM;AACJ,EAAAH,KAAI;AACJ,QAAM,aAAa,oBAAoB,KAAK,OAAO,KAAK;AACxD,SAAO,qDAAC,gBAAa,MAAY,cAA1B;AAAA;AAAA;AAAA;AAAA,GAAkD;AAC3D;AACAA,KAAI,WAAW,gCAAgC,OAAO,WAAY;AAChE,SAAO,CAAC,mBAAmB;AAC7B,CAAC;AACDI,OAAM;AACC,IAAM,mBAAmB,WAAS,GAAG,KAAK,eAAe,QAAQ,IAAI,MAAM,EAAE;AAC7E,IAAM,qBAAqB,CAAC;AAAA,EACjC;AAAA,EACA,GAAG;AACL,MAAM;AACJ,EAAAH,KAAI;AACJ,QAAM;AAAA,IACJ,MAAM;AAAA,MACJ;AAAA,IACF;AAAA,EACF,IAAI,eAAe;AACnB,SAAO,qDAAC,sBAAoB,GAAG,MAC9B,+DAAC,WAAQ,SAAS,iBAAiB,WAAW,SAAS,CAAC,GACvD,+DAACI,UAAA,EAAQ,SAAO,MACf,+DAAC,UAAO,WAAW,GAAG,YAAY,SAAS,GAAG,aAAY,aACzD,+DAAC,QAAK,MAAK,eAAX;AAAA;AAAA;AAAA;AAAA,GAAuB,KADxB;AAAA;AAAA;AAAA;AAAA,GAEA,KAHD;AAAA;AAAA;AAAA;AAAA,GAIA,KALD;AAAA;AAAA;AAAA;AAAA,GAMA,KAPM;AAAA;AAAA;AAAA;AAAA,GAQP;AACF;AACAJ,KAAI,oBAAoB,gCAAgC,OAAO,WAAY;AACzE,SAAO,CAAC,cAAc;AACxB,CAAC;AACDK,OAAM;AACC,IAAM,qBAAqB,CAAC;AAAA,EACjC;AAAA,EACA;AAAA,EACA,UAAAC;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,EAAAL,KAAI;AACJ,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,eAAe;AACnB,SAAO,qDAAC,UAAO,MAAY,cACzB;AAAA;AAAA,IAED,qDAACM,SAAA,EACA;AAAA,2DAAC,mBAAD;AAAA;AAAA;AAAA;AAAA,OAAe;AAAA,MACf,qDAAC,iBACA,+DAAC,SAAI,WAAU,aACd;AAAA,6DAAC,QAAG,WAAU,qBACZ,2BAAiB,WAAW,SAAS,CAAC,KADxC;AAAA;AAAA;AAAA;AAAA,SAEA;AAAA,QACA,qDAAC,QAAG,WAAU,aACZ;AAAA,UAAAD,aAAY,qDAAC,gBAAa,MAAMA,WAAU,YAAY,UAAU,kBAC9D,UAAAA,UAAS,QADC;AAAA;AAAA;AAAA;AAAA,WAEZ;AAAA,UACA,WAAW,IAAI,CAAAE,OAAK,qDAAC,aAAU,MAAMA,MAAQA,GAAE,IAA3B;AAAA;AAAA;AAAA;AAAA,WAA+B,CAAE;AAAA,aAJvD;AAAA;AAAA;AAAA;AAAA,SAKA;AAAA,WATD;AAAA;AAAA;AAAA;AAAA,OAUA,KAXD;AAAA;AAAA;AAAA;AAAA,OAYA;AAAA,SAdD;AAAA;AAAA;AAAA;AAAA,KAeA;AAAA,OAlBM;AAAA;AAAA;AAAA;AAAA,GAmBP;AACF;AACAP,KAAI,oBAAoB,gCAAgC,OAAO,WAAY;AACzE,SAAO,CAAC,cAAc;AACxB,CAAC;AACDQ,OAAM;AACN,IAAIP;AAAJ,IAAQC;AAAR,IAAaE;AAAb,IAAkBI;AAClB,aAAaP,MAAI,cAAc;AAC/B,aAAaC,MAAK,WAAW;AAC7B,aAAaE,MAAK,oBAAoB;AACtC,aAAaI,MAAK,oBAAoB;AAEtC,OAAO,eAAe;AACtB,OAAO,eAAe;;;ACnItB,IAAAC,iBAAyD;AATzD,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAKe,SAAR,mBAAoC,QAAQ,KAAM;AACxD,QAAM,CAAC,QAAQ,SAAS,QAAI,yBAAS,KAAK;AAC1C,QAAM,iBAAa,uBAAO,EAAE;AAE5B,QAAM,WAAO;AAAA,IACZ,CAAC,UAAkB;AAClB,gBAAU,UAAU,UAAU,KAAK;AACnC,gBAAU,IAAI;AACd,mBAAa,WAAW,OAAO;AAC/B,iBAAW,UAAU,OAAO,WAAW,MAAM;AAC5C,kBAAU,KAAK;AAAA,MAChB,GAAG,KAAK;AAAA,IACT;AAAA,IACA,CAAC,KAAK;AAAA,EACP;AAEA,gCAAU,MAAM;AACf,WAAO,MAAM;AACZ,mBAAa,WAAW,OAAO;AAAA,IAChC;AAAA,EACD,GAAG,CAAC,CAAC;AAEL,SAAO,CAAC,QAAQ,IAAI;AACrB;;;AChBA,IAAAC,iBAA2B;AAKhB,IAAAC,2BAAA;AAxBX,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,kCAAoC,EAAE;AAAA,EAC/E;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAON,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAA6B;AAC7B,cAAY,IAAI,eAAe;AACjC;AAKO,IAAM,eAAW,2BAAWC,OAAK,CAAC;AAAA,EACvC;AAAA,EACA,GAAG;AACL,GAAG,QAAQ,qDAAC,cAAS,KAAU,WAAW,GAAG,uGAAuG,SAAS,GAAI,GAAG,QAAzJ;AAAA;AAAA;AAAA;AAAA,CAA+J,CAAE;AAC5KC,OAAM;AACN,SAAS,cAAc;AACvB,IAAID;AAAJ,IAAQC;AACR,aAAaD,MAAI,qBAAqB;AACtC,aAAaC,MAAK,UAAU;AAE5B,OAAO,eAAe;AACtB,OAAO,eAAe;;;ACAlB,IAAAC,2BAAA;AAhCJ,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,yCAA2C,EAAE;AAAA,EACtF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAoC;AACpC,cAAY,IAAI,eAAe;AACjC;AAUO,IAAM,kBAAkB,CAAC;AAAA,EAC9B;AACF,MAAM;AACJ,SAAO,qDAAC,UAAO,MAAI,MAAC,cACnB,+DAACC,SAAA,EACA;AAAA,yDAAC,mBAAD;AAAA;AAAA;AAAA;AAAA,KAAe;AAAA,IACf,qDAAC,iBACA,+DAAC,mBAAD;AAAA;AAAA;AAAA;AAAA,KAAe,KADhB;AAAA;AAAA;AAAA;AAAA,KAEA;AAAA,OAJD;AAAA;AAAA;AAAA;AAAA,GAKA,KANM;AAAA;AAAA;AAAA;AAAA,GAOP;AACF;AACAC,OAAK;AACL,IAAM,gBAAgB,MAAM;AAC1B,EAAAF,KAAG;AACH,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,WAAW;AACf,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,EACF,IAAI,eAAe;AACnB,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,UAAU;AACd,QAAM;AAAA,IACJ,UAAAG;AAAA,EACF,IAAI;AACJ,QAAM,OAAO;AAAA,IACX;AAAA,IACA,UAAAA;AAAA,IACA;AAAA,IACA,KAAK,OAAO,aAAa,cAAc,SAAS,OAAO;AAAA,EACzD;AACA,QAAM,CAAC,QAAQ,IAAI,IAAI,mBAAmB;AAC1C,QAAM,aAAa,KAAK,UAAU,MAAM,MAAM,CAAC;AAC/C,SAAO,OAAO,qDAAC,SAAI,WAAU,aAC5B;AAAA,yDAAC,eAAY,0BAAb;AAAA;AAAA;AAAA;AAAA,KAAuB;AAAA,IACvB,qDAACC,cAAA,EAAY,+CAAb;AAAA;AAAA;AAAA;AAAA,KAA4C;AAAA,OAF/B;AAAA;AAAA;AAAA;AAAA,GAGd,IAAS,qDAAC,SAAI,WAAU,aACvB;AAAA,yDAAC,eAAY,4BAAb;AAAA;AAAA;AAAA;AAAA,KAAyB;AAAA,IACzB,qDAACA,cAAA,EAAY,qEAAb;AAAA;AAAA;AAAA;AAAA,KAEA;AAAA,IACA,qDAAC,aAAQ,WAAU,kBAClB;AAAA,2DAAC,aAAQ,WAAU,4CAA2C,mDAA9D;AAAA;AAAA;AAAA;AAAA,OAEA;AAAA,MACA,qDAAC,SAAI,WAAU,aAEd;AAAA,6DAAC,WAAD;AAAA;AAAA;AAAA;AAAA,SAAK;AAAA,QACL,qDAAC,UAAO,WAAU,WAAU,SAAS,MAAM;AACtC,eAAK,UAAU;AAAA,QACjB,GACD,mBAAS,YAAY,UAHvB;AAAA;AAAA;AAAA;AAAA,SAIA;AAAA,QACA,qDAAC,YAAS,MAAM,IAAI,UAAQ,MAAC,cAAc,cAA3C;AAAA;AAAA;AAAA;AAAA,SAAuD;AAAA,WARxD;AAAA;AAAA;AAAA;AAAA,OASA;AAAA,SAbD;AAAA;AAAA;AAAA;AAAA,KAcA;AAAA,IAEA,qDAAC,QAAK,QAAO,QAAO,QAAO,kBAC1B;AAAA,2DAAC,SAAI,WAAU,aACd;AAAA,6DAAC,SAAM,WAAU,aAAY,2BAA7B;AAAA;AAAA;AAAA;AAAA,SAAwC;AAAA,QACxC,qDAAC,YAAS,MAAK,eAAc,MAAM,KAAnC;AAAA;AAAA;AAAA;AAAA,SAAsC;AAAA,WAFvC;AAAA;AAAA;AAAA;AAAA,OAGA;AAAA,MACA,qDAAC,WAAM,MAAK,QAAO,MAAK,UAAS,OAAO,KAAK,UAAU,IAAI,KAA3D;AAAA;AAAA;AAAA;AAAA,OAA8D;AAAA,MAC9D,qDAAC,UAAO,WAAU,gBAAe,MAAK,UAAS,UAAU,UAAU,cACjE,oBAAU,eAAe,kBAAkB,YAD7C;AAAA;AAAA;AAAA;AAAA,OAEA;AAAA,SARD;AAAA;AAAA;AAAA;AAAA,KASA;AAAA,OA9BQ;AAAA;AAAA;AAAA;AAAA,GA+BT;AACF;AACAJ,KAAG,eAAe,gCAAgC,OAAO,WAAY;AACnE,SAAO,CAAC,YAAY,gBAAgB,WAAW,kBAAkB;AACnE,CAAC;AACDK,OAAM;AACN,IAAIH;AAAJ,IAAQG;AACR,aAAaH,MAAI,iBAAiB;AAClC,aAAaG,MAAK,eAAe;AAEjC,OAAO,eAAe;AACtB,OAAO,eAAe;;;AbhEb,IAAAC,2BAAA;AA9CT,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,sCAAwC,EAAE;AAAA,EACnF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAiC;AACjC,cAAY,IAAI,eAAe;AACjC;AAaO,IAAM,eAAe,CAAC;AAAA,EAC3B;AACF,MAAM;AACJ,EAAAA,KAAG;AACH,QAAM;AAAA,IACJ,MAAM;AAAA,MACJ;AAAA,MACA,UAAAC;AAAA,IACF;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI,eAAe;AACnB,QAAM,CAAC,kBAAkB,kBAAkB,QAAI,yBAAS,KAAK;AAC7D,QAAM,CAAC,mBAAmB,oBAAoB,QAAI,yBAAS,KAAK;AAChE,QAAM,CAAC,sBAAsB,uBAAuB,QAAI,yBAAS,KAAK;AACtE,QAAM,UAAU,WAAW;AAC3B,SAAO,0FACN;AAAA,yDAAC,qBAAa,MAAb,EACA;AAAA,2DAAC,qBAAa,SAAb,EAAqB,SAAO,MAC5B,+DAAC,UAAO,aAAY,aACnB;AAAA,6DAAC,kBAAe,4BAAhB;AAAA;AAAA;AAAA;AAAA,SAA4B;AAAA,QAC5B,qDAAC,QAAK,MAAK,0BAAX;AAAA;AAAA;AAAA;AAAA,SAAkC;AAAA,WAFnC;AAAA;AAAA;AAAA;AAAA,OAGA,KAJD;AAAA;AAAA;AAAA;AAAA,OAKA;AAAA,MACA,qDAAC,qBAAa,QAAb,EACA,+DAAC,qBAAa,SAAb,EAAqB,YAAY,GACjC;AAAA,6DAAC,qBAAa,MAAb,EAAkB,UAAU,MAAM,iBAAiB,CAAC,aAAa,GACjE;AAAA,+DAAC,QAAK,MAAK,YAAW,WAAU,UAAhC;AAAA;AAAA;AAAA;AAAA,WAAuC;AAAA,UACtC,gBAAgB,uBAAuB;AAAA,aAFzC;AAAA;AAAA;AAAA;AAAA,SAGA;AAAA,QACA,qDAAC,qBAAa,MAAb,EAAkB,UAAU,MAAM,UAAU,UAAU,UAAU,OAAO,GACvE;AAAA,+DAAC,QAAK,MAAK,yBAAwB,WAAU,UAA7C;AAAA;AAAA;AAAA;AAAA,WAAoD;AAAA,UAAE;AAAA,aADvD;AAAA;AAAA;AAAA;AAAA,SAGA;AAAA,QACA,qDAAC,qBAAa,MAAb,EAAkB,UAAU,MAAM;AAC7B,6BAAmB,IAAI;AAAA,QACzB,GACH;AAAA,+DAAC,QAAK,MAAK,OAAM,WAAU,UAA3B;AAAA;AAAA;AAAA;AAAA,WAAkC;AAAA,UAAE;AAAA,aAHrC;AAAA;AAAA;AAAA;AAAA,SAKA;AAAA,QACC,qBAAqB,qDAAC,qBAAa,MAAb,EAAkB,UAAU,MAAM;AACnD,+BAAqB,IAAI;AAAA,QAC3B,GACF;AAAA,+DAAC,QAAK,MAAK,OAAM,WAAU,UAA3B;AAAA;AAAA;AAAA;AAAA,WAAkC;AAAA,UAAE;AAAA,aAHhB;AAAA;AAAA;AAAA;AAAA,SAKrB;AAAA,QACD,qDAAC,qBAAa,MAAb,EAAkB,WAAU,aAAY,UAAU,MAAM;AACnD,kCAAwB,IAAI;AAAA,QAC9B,GACH;AAAA,+DAAC,QAAK,MAAK,aAAY,WAAU,UAAjC;AAAA;AAAA;AAAA;AAAA,WAAwC;AAAA,UACvC,iBAAiB,WAAW,SAAS,CAAC;AAAA,aAJxC;AAAA;AAAA;AAAA;AAAA,SAKA;AAAA,QACA,qDAAC,qBAAa,OAAb,IAAD;AAAA;AAAA;AAAA;AAAA,SAAoB;AAAA,WA3BrB;AAAA;AAAA;AAAA;AAAA,OA4BA,KA7BD;AAAA;AAAA;AAAA;AAAA,OA8BA;AAAA,SArCD;AAAA;AAAA;AAAA;AAAA,KAsCA;AAAA,IACC,oBAAoB,qDAAC,kBAAe,MAAI,MAAC,cAAc,sBAAnC;AAAA;AAAA;AAAA;AAAA,KAAuD;AAAA,IAC3E,qBAAqB,qBAAqB,qDAAC,mBAAgB,cAAc,wBAA/B;AAAA;AAAA;AAAA;AAAA,KAAqD;AAAA,IAC/F,wBAAwB,qDAAC,sBAAmB,YAAwB,UAAUA,WAAU,MAAI,MAAC,cAAc,2BAAnF;AAAA;AAAA;AAAA;AAAA,KAA4G;AAAA,OA1C/H;AAAA;AAAA;AAAA;AAAA,GA2CP;AACF;AACAD,KAAG,cAAc,gCAAgC,OAAO,WAAY;AAClE,SAAO,CAAC,gBAAgB,UAAU;AACpC,CAAC;AACDE,OAAK;AACL,IAAIA;AACJ,aAAaA,MAAI,cAAc;AAE/B,OAAO,eAAe;AACtB,OAAO,eAAe;;;Ac/EtB,IAAAC,iBAA+B;;;ACiB/B,SAAS,OAAO,QAAQ;AACvB,MAAI,OAAO,gBAAgB,OAAO;AACjC,UAAM,IAAI,UAAU,iBAAiB;AAAA,EACtC;AACA,MAAI,OAAO,WAAW,IAAI;AACzB,WAAO;AAAA,EACR;AACA,MAAI,OAAO,WAAW,GAAG;AACxB,QAAI,SAAS,SAAS;AACtB,WAAO,CAAC,IAAI,OAAO,CAAC;AACpB,WAAO,CAAC,IAAI,OAAO,CAAC;AACpB,WAAO,CAAC,IAAI,OAAO,CAAC;AACpB,WAAO,CAAC,IAAI,OAAO,CAAC;AACpB,WAAO,EAAE,IAAI,OAAO,CAAC;AACrB,WAAO,EAAE,IAAI,OAAO,CAAC;AACrB,WAAO;AAAA,EACR;AACA,QAAM,IAAI,WAAW,4CAA4C;AAClE;AAUA,SAAS,WAAW;AACnB,MAAI,SAAS,CAAC;AACd,WAASC,KAAI,GAAGA,KAAI,IAAIA,MAAK;AAC5B,IAAAA,KAAI,KAAK,IAAI,OAAO,KAAK,CAAC,IAAI,OAAO,KAAK,CAAC;AAAA,EAC5C;AACA,SAAO;AACR;AAuEA,SAAS,SAASC,IAAGC,IAAG;AACvB,MAAI,KAAK,OAAOD,EAAC;AACjB,MAAI,KAAK,OAAOC,EAAC;AACjB,MAAI,UAAU,CAAC;AAEf,WAASC,KAAI,GAAGA,KAAI,GAAGA,MAAK;AAC3B,QAAI,MAAM,CAAC,GAAGA,EAAC,GAAG,GAAGA,KAAI,CAAC,GAAG,GAAGA,KAAI,CAAC,GAAG,GAAGA,KAAI,EAAE,CAAC;AAClD,aAASC,KAAI,GAAGA,KAAI,GAAGA,MAAK;AAC3B,UAAIC,KAAID,KAAI;AACZ,UAAI,MAAM,CAAC,GAAGC,EAAC,GAAG,GAAGA,KAAI,CAAC,GAAG,GAAGA,KAAI,CAAC,GAAG,GAAGA,KAAI,CAAC,CAAC;AACjD,UAAI,SACH,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC;AAErE,cAAQF,KAAIE,EAAC,IAAI;AAAA,IAClB;AAAA,EACD;AAEA,SAAO;AACR;AAcA,SAAS,MAAM,QAAQ;AACtB,MAAI,OAAO,WAAW,UAAU;AAC/B,QAAI,QAAQ,OAAO,MAAM,wBAAwB;AACjD,QAAI,OAAO;AACV,UAAI,MAAM,MAAM,CAAC,EAAE,MAAM,IAAI,EAAE,IAAI,UAAU;AAC7C,aAAO,OAAO,GAAG;AAAA,IAClB;AAAA,EACD;AACA,SAAO,SAAS;AACjB;AAuFA,SAAS,OAAO,QAAQ;AACvB,MAAI,SAAS,SAAS;AACtB,SAAO,CAAC,IAAI;AACZ,SAAO;AACR;AAQA,SAAS,OAAO,QAAQ;AACvB,MAAI,SAAS,SAAS;AACtB,SAAO,CAAC,IAAI;AACZ,SAAO;AACR;AA6FA,SAAS,WAAW,UAAU;AAC7B,MAAI,SAAS,SAAS;AACtB,SAAO,EAAE,IAAI;AACb,SAAO;AACR;AAQA,SAAS,WAAW,UAAU;AAC7B,MAAI,SAAS,SAAS;AACtB,SAAO,EAAE,IAAI;AACb,SAAO;AACR;;;AC1Ya,IAAAC,IAAW,SAACC,GAAAA;AAAM,SAAkB,YAAA,OAANA;AAAc;AAA5C,IAEAC,IAAa,SAACD,GAAAA;AAAW,SAAa,cAAA,OAANA;AAAgB;AAFhD,IAIAE,IAAW,SAACF,GAAAA;AAAM,SACS,sBAAtCG,OAAOC,UAAUC,SAASC,KAAKN,CAAAA;AAAwB;AAL5C,IAOAO,IAAU,SAACC,GAAAA;AACtB,SAAAC,MAAML,UAAUM,MAAMC,MAAMH,CAAAA;AAAU;AAR3B,IAUAI,IAA4B,SAACC,GAAAA;AACxC,MACMC,KAAMD,EAAIE,OAAO,SAACC,IAAKC,IAAAA;AAE3B,WADAD,GAAIC,EAAAA,KAASD,GAAIC,EAAAA,KAAS,KAAK,GACxBD;EACT,GAJiC,CAAA,CAAA;AAKjC,SAAOb,OAAOe,KAAKJ,EAAAA,EAAKK,OAAO,SAAAC,IAAAA;AAAG,WAAIN,GAAIM,EAAAA,IAAO;EAAC,CAAA;AACpD;AAAA,SAGgBC,EAAOC,GAAAA;AAarB,SAZA,CAAA,EAAAZ,MAAAJ,KAAAiB,WAAKC,CAAAA,EAAAA,QAAQ,SAAAC,IAAAA;AACX,QAAKA,GAIL,UAAWC,MAAWD,GAEhBtB,QAAOC,UAAUuB,eAAerB,KAAKmB,IAAKC,EAAAA,MAC5CJ,EAAOI,EAAAA,IAAWD,GAAIC,EAAAA;EAG5B,CAAA,GACOJ;AACT;AAEO,IC3BHM;AD2BG,IAAMC,IAAY,SAACC,GAAeC,IAAaC,IAAAA;AACpD,SAAAF,KAASC,KAAMD,KAASE;AAAQ;AAD3B,IAC2B,IAAA,EAAA,WAAA,MAAA,UAAA,GAAA,YAAA,GAAA,UAAA,GAAA,SAAA,GAAA,2BAAA,GAAA,QAAA,GAAA,WAAA,EAAA;AAD3B,IEtCMC,IAAe;AFsCrB,IErCMC,IAAuB;AFqC7B,IElCMC,IAAkB;AFkCxB,IEjCMC,IAAsB;AFiC5B,IEjC4B,IAAA,EAAA,WAAA,MAAA,cAAA,GAAA,sBAAA,GAAA,wBAHG,0BAAA,kBACN,oBAAA,iBAAA,GAAA,qBAAA,EAAA;AFmCzB,IGjCMC,IAA+B,EAC1CC,UAAU,EAAEC,WAAW,KAAKC,SAAS,GAAA,GACrCC,QAAQ,EAAEF,WAAW,KAAKC,SAAS,GAAA,GACnCE,YAAY,EAAEH,WAAW,KAAKC,SAAS,GAAA,GACvCG,QAAQ,EAAEJ,WAAW,KAAKC,SAAS,GAAA,GACnCI,OAAO,EAAEL,WAAW,KAAKC,SAAS,GAAA,EAAA;AH4B7B,IGnBMK,IAAkB,SAC7BC,GAAAA;AAEA,SANO5C,EAMe4C,CAAAA,IACbA,IACE3C,OAAOe,KAAKmB,CAAAA,EAAeU,QAAQD,CAAAA,IAAAA,KACrCT,EAAcS,CAAAA,IAEd,CAAA;AAEX;AFjBsB,eAAA,OAAXE,WACTpB,IAAWoB,OAAOC;AASpB,IAAA,IANArB,IACEA,KACA,SAASsB,GAAAA;AACPF,SAAOG,WAAWD,GAAU,MAAO,EAAA;AACrC;AAEF,IGTMpB,IAAQsB,KAAKC,IAAAA;AHSnB,IGRaC,IACY,YAAA,OAAhBC,eAAuD,cAAA,OAApBA,YAAYF,MAClD,WAAA;AAAA,SAAME,YAAYF,IAAAA;AAAK,IACvB,WAAA;AAAA,SAAMD,KAAKC,IAAAA,IAAQvB;AAAK;AAGd,SAAA0B,EAAYC,GAAOC,IAAAA;AACjC,MAAMC,KAAMF,EAAMV,QAAQW,EAAAA;AAAAA,SAC1BC,MAAcF,EAAMG,OAAOD,IAAK,CAAA;AAClC;ACJA,IAAaE,IAAe,2BAAA;AAAA,WAAAA,IAAAA;EAAAC;AAKzB,SALyBD,EAAAzD,UAC1B2D,MAAA,WAAA;AAAM,QAAAC,KACJC;AAAAA,MAAQ,WAAA;AACND,MAAAA,GAAKE,aAAaC,KAAKb,EAAAA,CAAAA;IACzB,CAAA;EACF,GAACO;AAAA,EALyB;AAA5B,ICNMO,IACJ,WAAA;AACEC,OAAKrC,WAAW,GAChBqC,KAAKC,WAAW;AAClB;ADEF,ICCIC,IAAK;ADDT,ICGMC,IAAsB;ADH5B,ICoBMC,IACJ,2BAAA;AAAA,WAAAA,EAAYP,IAAAA;AACVG,SAAKK,MAAUH,MAAAA,KACfF,KAAKM,gBAAgBT,IAErBG,KAAKO,YAAY,CAAA,GACjBP,KAAKQ,cAAc,GAEnBR,KAAKS,gBAAgB,IAAIV,KACzBC,KAAKU,iCAAiC,MACtCV,KAAKW,YAAY,GACjBX,KAAKY,4BAAAA,OACLZ,KAAKa,iBAAiB,IAAId,KAC1BC,KAAKc,sBAAsB,MAE3Bd,KAAKe,aAAa,IAAIhB,KACtBC,KAAKgB,mBAAmB,GACxBhB,KAAKiB,aAAAA,MAGLjB,KAAKkB,sBAAsB,CAAA;EAC7B;AAAC,MAAAzB,KAAAW,EAAArE;AAAAA,SAAA0D,GAED0B,QAAA,WAAA;AACE,WAAOnB,KAAKK;EACd,GAACZ,GAMD2B,UAAA,WAAA;AACEpB,SAAKO,YAAY,CAAA,GACjBP,KAAKM,cAAce,iBAAiBrB,IAAAA;EACtC,GAACP,GAQD6B,kBAAA,SAAgBC,IAAAA;AAEd,WADAvB,KAAKwB,gBAAgBD,IACdvB;EACT,GAACP,GAKDgC,kBAAA,WAAA;AACE,WAAOzB,KAAKS,cAAc9C;EAC5B,GAAC8B,GAKDiC,kCAAA,SAAgCC,IAAAA;AAC9B,WAAOC,KAAKC,IAAI7B,KAAKW,YAAYgB,GAAMhE,QAAAA;EACzC,GAAC8B,GAYDqC,cAAA,SAAYC,IAAAA;AACV,QAAIA,OAAa/B,KAAKW,UAAW,QAAA;AAEjC,QADAX,KAAKgC,eAAeD,IAChB/B,KAAKW,cAAcoB,MAAY/B,KAAKiC,SAAAA,EACtC,QAAOjC;AAETA,SAAKQ,cAAcR,KAAKyB,gBAAAA,GACxBzB,KAAKW,YAAYoB,IACjB/B,KAAKM,cAAc4B,eAAelC,KAAKmB,MAAAA,CAAAA;AACvC,aAASgB,KAAI,GAAGC,KAAMpC,KAAKO,UAAU8B,QAAQF,KAAIC,IAAKD,MAAK;AACzD,UACMG,KADWtC,KAAKO,UAAU4B,EAAAA,EACNI;AAC1BD,MAAAA,MAAYA,GAAStC,IAAAA;IACvB;AACA,WAAOA;EACT,GAACP,GAYD+C,cAAA,SAAYvC,IAAAA;AACV,WAAIA,OAAaD,KAAKS,cAAcR,aAGpCD,KAAKS,cAAcR,WAAWA,IAC9BD,KAAKM,cAAc4B,eAAelC,KAAKmB,MAAAA,CAAAA,IAFvCnB;EAIF,GAACP,GAEDgD,kBAAA,SAAgBC,IAAAA;AACd1C,SAAKQ,cAAckC,IACnB1C,KAAKS,cAAc9C,WAAW+E;AAC9B,aAASP,KAAI,GAAGC,KAAMpC,KAAKO,UAAU8B,QAAQF,KAAIC,IAAKD,MAAK;AACzD,UAAIQ,KAAW3C,KAAKO,UAAU4B,EAAAA;AAC9BQ,MAAAA,GAASC,kBAAkBD,GAASC,eAAe5C,IAAAA;IACrD;AACA,WACFA;EAAA,GAACP,GAEDoD,YAAA,WAAA;AAIE,WAHA7C,KAAKW,YAAYX,KAAKS,cAAc9C,UACpCqC,KAAKe,WAAWpD,WAAWqC,KAAKS,cAAc9C,UAC9CqC,KAAKS,cAAcR,WAAW,GAEhCD;EAAA,GAACP,GAUDqD,8BAAA,SAA4BC,IAAAA;AAE1B,WADA/C,KAAKY,4BAA4BmC,IAC1B/C;EACT,GAACP,GAQDuD,iBAAA,WAAA;AACE,QAAMvF,KAAQuC,KAAKQ,aACb9C,KAAMsC,KAAKW;AACjB,WAAA,KACOa,cAAcyB,UAAU,MAC3BxF,KAAQC,MAAOsC,KAAKyB,gBAAAA,IAAoB/D,MACvCD,KAAQC,MAAOsC,KAAKyB,gBAAAA,IAAoB/D;EAE/C,GAAC+B,GAUDyD,UAAA,SAAQC,IAAMC,IAAAA;AACZ,QAAInB,KAAWjC,KAAKiC,SAAAA;AAEpB,QAAA,CAAIA,MAAAA,CAAYjC,KAAKiB,YAArB;AAIA,UAAIoC,KAAoBD;AACpBA,MAAAA,KA3LmB,UA4LrBC,KA5LqB,QA+LvBrD,KAAKgB,oBAAoBqC;AAmBzB,eAXIC,IACAC,IACAC,IACAC,IACAC,IACAC,IAXEV,KAAUjD,KAAKwB,cAAcyB,SAC7BW,KAAW5D,KAAKwB,cAAcoC,UAChCjG,KAAWqC,KAAKS,cAAc9C,UAC9BsC,KAAWD,KAAKS,cAAcR,UAC9B4D,KAAe7D,KAAKe,WAAWpD,UAC/BmG,KAAe9D,KAAKe,WAAWd,UAY5BD,KAAKgB,oBAAoBb,IAC9BH,MAAKgB,oBAAoBb,GAErBH,KAAKgB,mBAAmBb,MAC1BH,KAAKa,eAAelD,WAAWA,IAC/BqC,KAAKa,eAAeZ,WAAWA,KAIjCsD,KACEN,MAAWjD,KAAKW,YAAYkD,MAAgBD,KAAW3D,IAKzDwD,KACER,MAAWjD,KAAKW,aAJlBkD,KAAelG,MAJf2F,KAAYrD,MAI0BE,IAAsB,QAIdyD,MAH9CE,KAAe7D,KAAWsD,KAAgBpD,IAAsB,MAQhEwD,KACEV,MAAWjD,KAAKW,aAJlBkD,KAAelG,MAJf6F,KAAYM,MAI0B3D,IAAsB,QAIdyD,MAH9CE,KAAe7D,KAAWwD,KAAgBtD,IAAsB,MAKhE0D,KAAelG,MAJf+F,KAAYI,MAI0B3D,GAYtCxC,MALG,IAAM,KAAQ2F,KAAY,KAAOE,KAAYE,OANhDI,KAAe7D,KAAW0D,KAAgBxD,MAWvBA,GACnBF,MAJG,IAAM,KACNsD,KAAgB,KAAOE,KAAgBE,OANxCV,MAAWjD,KAAKW,YAAYkD,MAAgBD,KAAWE,OAStC3D;AAGrBH,WAAKe,WAAWpD,WAAWkG,IAC3B7D,KAAKe,WAAWd,WAAW6D,IAE3B9D,KAAKS,cAAc9C,WAAWA,IAC9BqC,KAAKS,cAAcR,WAAWA,IAE1BD,KAAKgB,mBAAmB,KAC1BhB,KAAK+D,aAAa/D,KAAKgB,mBAAmBb,CAAAA,IAI1CH,KAAKiC,SAAAA,KACJjC,KAAKY,6BAA6BZ,KAAKgD,eAAAA,OAEpChD,KAAKwB,cAAcyB,UAAU,KAC/BjD,KAAKQ,cAAcR,KAAKW,WACxBX,KAAKS,cAAc9C,WAAWqC,KAAKW,cAEnCX,KAAKW,YAAYX,KAAKS,cAAc9C,UACpCqC,KAAKQ,cAAcR,KAAKW,YAE1BX,KAAKwC,YAAY,CAAA,GACjBP,KAAAA;AAGF,UAAI+B,KAAAA;AACAhE,WAAKiB,eACPjB,KAAKiB,aAAAA,OACL+C,KAAAA;AAGF,UAAIC,KAAAA;AACAhC,MAAAA,OACFjC,KAAKiB,aAAAA,MACLgD,KAAAA,OAGFjE,KAAKkE,sBAAsBF,IAAgBC,EAAAA;IAvG3C;EAwGF,GAACxE,GAEDyE,wBAAA,SAAsBF,IAAgBC,IAAAA;AAAc,QAAAE,KAClDnE;AAAAA,SAAKO,UAAUzD,OAAOsH,OAAAA,EAASjH,QAAQ,SAAAwF,IAAAA;AAEnCqB,MAAAA,MACArB,GAAS0B,oBAAAA,CACRF,GAAKG,sBAEN3B,GAAS0B,iBAAiBF,EAAAA,GAC1BA,GAAKG,oBAAAA,OAGH3B,GAASC,kBACXD,GAASC,eAAeuB,EAAAA,GAGtBF,MAAgBtB,GAAS4B,kBAC3B5B,GAAS4B,eAAeJ,EAAAA;IAE5B,CAAA;EACF,GAAC1E,GASD+E,sBAAA,WAAA;AACE,WAAA,CAAQxE,KAAKiC,SAAAA,KAAAA,CAAejC,KAAKyE,UAAAA;EACnC,GAAChF,GAEDgF,YAAA,WAAA;AACE,WAAA,KAAYxD;EACd,GAACxB,GAWDwC,WAAA,WAAA;AAME,WAJEL,KAAKC,IAAI7B,KAAKS,cAAcR,QAAAA,IAAYD,KAAKc,wBAC5Cd,KAAK0B,gCAAgC1B,KAAKS,aAAAA,KACzCT,KAAKU,kCAC0B,MAA/BV,KAAKwB,cAAcyB;EAEzB,GAACxD,GAEDsE,eAAA,SAAaW,IAAAA;AACX1E,SAAKS,cAAc9C,WACjBqC,KAAKS,cAAc9C,WAAW+G,KAC9B1E,KAAKa,eAAelD,YAAY,IAAI+G,KACtC1E,KAAKS,cAAcR,WACjBD,KAAKS,cAAcR,WAAWyE,KAC9B1E,KAAKa,eAAeZ,YAAY,IAAIyE;EACxC,GAACjF,GAEDkF,cAAA,SAAYC,IAAAA;AAEV,WADA5E,KAAKO,UAAUsE,KAAKD,EAAAA,GAAAA;EAEtB,GAACnF,GAEDqF,qBAAA,SAAmBF,IAAAA;AAAa,QAAAjF,KAC9BK;AAQA,WAJAlE,OAAOe,KAAK+H,EAAAA,EAAazH,QAAQ,SAAA4H,IAAAA;AAJb,UAAAC;AAKlBJ,MAAAA,GAAYG,EAAAA,KALMC,KAKaJ,GAAYG,EAAAA,GAAAA,WAAAA;AAJ3CC,QAAAA,GAAI1I,MAAAA,QAAA,CAAA,EAAAD,MAAAJ,KAAAiB,SAAAA,CAAAA,GACJyC,GAAKsF,eAAeL,EAAAA;MACtB;IAGA,CAAA,GACA5E,KAAKO,UAAUsE,KAAKD,EAAAA,GAAAA;EAEtB,GAACnF,GAEDwF,iBAAA,SAAeC,IAAAA;AAEb,WADA/F,EAAYa,KAAKO,WAAW2E,EAAAA,GAE9BlF;EAAA,GAACI;AAAA,EAlWD;ADrBF,IEEM+E,IAAY,2BAAA;AAChB,WAAAA,EAAYC,IAAAA;AACVpF,SAAKoF,SAASA,MAAU,IAAI5F,KAC5BQ,KAAKoF,OAAOvF,eAAeG,MAE3BA,KAAKO,YAAY,CAAA,GACjBP,KAAKqF,iBAAiB,CAAA,GACtBrF,KAAKsF,qBAAqB,CAAA,GAC1BtF,KAAKuF,UAAAA,MACLvF,KAAKwF,kBAAAA,IACLxF,KAAKyF,kBAAkB,CAAA;EACzB;AAAC,MAAAhG,KAAA0F,EAAApJ;AAuIAoJ,SAvIA1F,GASDiG,eAAA,SAAazC,IAASW,IAAAA;AACpB,WAAW5D,KAAC2F,uBAAuB,EAAE1C,SAAAA,IAASW,UAAAA,GAAAA,CAAAA;EAChD,GAACnE,GAKDkG,yBAAA,SAAuBpE,IAAAA;AACrB,QAAM9C,KAAS,IAAI2B,EAAOJ,IAAAA;AAG1B,WAFAA,KAAK4F,eAAenH,EAAAA,GACpBA,GAAO6C,gBAAgBC,EAAAA,GAChB9C;EACT,GAACgB,GAQDoG,YAAA,WAAA;AACE,WAAO7F,KAAKuF;EACd,GAAC9F,GAUDmG,iBAAA,SAAenH,IAAAA;AACbuB,SAAKyF,gBAAgBhH,GAAO0C,MAAAA,CAAAA,IAAW1C;EACzC,GAACgB,GASD4B,mBAAA,SAAiB5C,IAAAA;AACfU,MAAYa,KAAKqF,gBAAgB5G,EAAAA,GAAAA,OAC1BuB,KAAKyF,gBAAgBhH,GAAO0C,MAAAA,CAAAA;EACrC,GAAC1B,GAEDyD,UAAA,SAAQC,IAAM2C,IAAAA;AACZ,aADuBnG,KAAAK,MAChBA,KAAKsF,mBAAmBjD,SAAS,IACtCrC,MAAKsF,mBAAmBS,IAAAA;AAU1B,SARA/F,KAAKqF,eAAevI,OAAOsH,OAAAA,EAASjH,QAAQ,SAAAsB,IAAAA;AACtCA,MAAAA,GAAO+F,oBAAAA,IACT/F,GAAOyE,QAAQC,KAAO,KAAQ2C,KAAY,GAAA,IAE1CnG,GAAK2F,mBAAmBT,KAAKlF,GAAK0F,eAAe3G,QAAQD,EAAAA,CAAAA;IAE7D,CAAA,GAEOuB,KAAKsF,mBAAmBjD,SAAS,KAAG;AACzC,UAAM/C,KAAMU,KAAKsF,mBAAmBS,IAAAA;AACpCzG,MAAAA,MAAO,KAAKU,KAAKqF,eAAe9F,OAAOD,IAAK,CAAA;IAC9C;EACF,GAACG,GAkBDK,OAAA,SAAKkG,IAAAA;AACH,QAAIrD;AAAAA,WACA3C,KAAKwF,oBACPxF,KAAKwF,kBAAkBQ,KAAoB;AAE7C,QAAMC,KAAiBD,KAAoBhG,KAAKwF;AAChDxF,SAAKwF,kBAAkBQ;AAEvB,QAAI7D,KAAI,GACFC,KAAMpC,KAAKO,UAAU8B;AAC3B,SAAKF,KAAI,GAAGA,KAAIC,IAAKD,KAAAA,EACnBQ,KAAW3C,KAAKO,UAAU4B,EAAAA,GACjB+D,qBAAqBvD,GAASuD,kBAAkBlG,IAAAA;AAS3D,SANAA,KAAKkD,QAAQ8C,IAAmBC,EAAAA,GACG,MAA/BjG,KAAKqF,eAAehD,WACtBrC,KAAKuF,UAAAA,MACLvF,KAAKwF,kBAAAA,KAGFrD,KAAI,GAAGA,KAAIC,IAAKD,KAAAA,EACnBQ,KAAW3C,KAAKO,UAAU4B,EAAAA,GACjBgE,oBAAoBxD,GAASwD,iBAAiBnG,IAAAA;AAGpDA,SAAKuF,WACRvF,KAAKoF,OAAO1F,IAAAA;EAEhB,GAACD,GAMDyC,iBAAA,SAAekE,IAAAA;AACb,QAAM3H,KAASuB,KAAKyF,gBAAgBW,EAAAA;AAAAA,WAChCpG,KAAKqF,eAAe3G,QAAQD,EAAAA,KAC9BuB,KAAKqF,eAAeR,KAAKpG,EAAAA,GAEvBuB,KAAK6F,UAAAA,MACP7F,KAAKuF,UAAAA,OACLvF,KAAKoF,OAAO1F,IAAAA;EAEhB,GAACyF;AAAA,EAlJe;AFFlB,IGVMtF,IAAsC,IAAIsF;AHUhD,IGRakB,IAAwB,SAACC,GAAAA;AACpC,MAAAC,KAKID,EAJF/E,cAAoCiF,KAAiBD,GAAjBC,mBACpCC,KAGEH,EAHFG,iBACAC,KAEEJ,EAFFI,gBACArC,KACEiC,EADFjC,kBAGI5F,KAASoB,EAAa6F,aANDa,GAATrI,WAAkBqI,GAAPpI,OAAAA;AAO7BM,EAAAA,GAAOqE,4BAAAA,CAAAA,CAA8B0D,EAAAA;AACrC,MAMMjF,KAAgC,EACpC8C,kBAAAA,IACAE,gBARqB,WAAA;AAErB9F,IAAAA,GAAO2C,QAAAA,GACPsF,GAAAA;EACF,GAKE9D,gBAAgB6D,GAAgB,EAC9BhI,QAAAA,IACAiI,gBAAAA,GAAAA,CAAAA,EAAAA;AAKJ,SADAjI,GAAOkG,YAAYpD,EAAAA,GACZ9C;AACT;AHnBA,IGqBaiH,IAAe,SAACiB,GAAAA;AAC3B,MAAMlI,KAAS4H,EAAsBM,CAAAA;AAErC,SADAlI,GAAOqD,YAAY,CAAA,GACZrD;AACT;AHzBA,IGgCamI,IAAyB,SACpCC,GACAC,IAAAA;AAEA,MAAA,WAFAA,OAAAA,KAAoC,CAAA,IAE/BD,KAAiBA,EAAaxE,QAAnC;AAIIyE,IAAAA,GAAcC,WAChBF,EAAaE,QAAAA;AAGf,QAjB6BC,IAiBvBC,KAhBqB,YAAA,QADED,KAiBUF,GAAcI,SAhBT,MACpC,IAAGtF,KAAKuF,IAAIvF,KAAKwF,IAAkB,IAAdJ,IAAiB,CAAA,GAAI,CAAA,GAiB5CK,KAAgB,IAAIzF,KAAKwF,IAAIxF,KAAKuF,IAAIN,EAAaxE,QAAQ,GAAA,GAAM,EAAA,GAEjEiF,KAAmBT,EACtBU,IAAI,SAACZ,IAASxE,IAAAA;AACb,UAAMqF,KAAoBb,GAAQF;AAwBlC,aApBAE,GAAQF,kBAAkB,SAAAgB,IAAAA;AACxB,YAAMC,KAAWF,GAAkBC,EAAAA;AACnC,eAAO,SAAAhJ,IAAAA;AACL,cAAIiE,KAAejE,GAAOgD,gBAAAA;AAAAA,WAE1BiB,KACEA,KAAe,OAAO,IAAIA,KAAe,OAAO,IAAIA,OAEN2E,MAE1CC,GAAiBnF,KAAI,CAAA,KACvBmF,GAAiBnF,KAAI,CAAA,EACnBP,KAAKwF,IAAIxF,KAAKuF,IAAIzE,KAAeuE,IAAiB,CAAA,GAAI,CAAA,CAAA,GAK5DS,GAASjJ,EAAAA;QACX;MACF,GACOkI;IACT,CAAA,EACCY,IAAI,SAAAZ,IAAAA;AACH,UAAMlI,KAAS4H,EAAsBM,EAAAA;AACrC,UAAKlI,GAGL,QAAOA,GAAOqD,YAAY6F,KAAKlJ,EAAAA;IACjC,CAAA,EACC3B,OAAOsH,OAAAA;AAENkD,IAAAA,GAAiB,CAAA,KACnBA,GAAiB,CAAA,EAAI,CAAA;EAhDvB;AAkDF;AHxFA,IIYaM,IAAgC,SAACC,GAAAA;AAC5C,SAAA,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,EAAA,EAAIN,IAAI,SAAAO,IAAAA;AAAAA,WAASD,EAAOC,EAAAA;EAAM,CAAA;AAAC;AJblD,IIoGaC,IAAiB,SAAHC,GAAAA;AAMzB,SALGA,EAAHC,MAMQtJ,OAAOuJ,eALTF,EAANG,SAMW,KALPH,EAAJI,OAMSzJ,OAAO0J,cALXL,EAALM,QAMU;AAEZ;AAOA,SAASC,EAAkBC,GAAAA;AAEzB,SADmBC,KAAKC,MAAMF,EAAQG,QAAQC,cAAc,IAAA;AAE9D;AAEA,IC3IaC,IAAmB,SAC9BlM,GACAC,IAAAA;AAAiB,MAAAkM;AAAA,SACK9L,EAAOL,KAAGmM,KAAA,CAAA,GAAKlM,GAAK,CAAA,CAAA,IAAKA,GAAK,CAAA,GAAEkM,GAAAA;AAAG;ADwI3D,ICtIaC,IAAiB,SAC5BP,GACAQ,IAAAA;AAEA,SACS9M,EADL8M,KAEAC,SAASC,iBAAqBC,MAAAA,IAA8BH,OAAAA,KAAAA,IAAAA,IAG/CR,EAASU,iBAAgB,MAAKC,IAAsB,GAAA,CAAA;AAEvE;AD2HA,IC1HaC,IAAW,SACtBC,GAAAA;AAEA,SAAOA,EAAgB9B,IACrB,SAAC+B,IAAAA;AAAkB,WAAwC,CACzDA,IACAA,GAAMC,sBAAAA,CAAAA;EACP,CAAA;AAEL;ADiHA,IE9HIxG,IAAAA;AF8HJ,IE5EayG,IAAkB,SAAHC,IAAAA;AAeF,MAAAC,KAAAD,GAdxBE,sBAAAA,KAAAA,WAAoBD,KAAG,CAAA,IAAEA,IAAAE,KAAAH,GACzBI,sBAAAA,KAAAA,WAAoBD,KAAG,CAAE,IAAAA,IAAAE,KAAAL,GACzBM,qCAAAA,KAAAA,WAAmCD,KAAG,CAAA,IAAEA,IAAAE,KAAAP,GACxCQ,eAAAA,KAAAA,WAAaD,KAAG,CAAE,IAAAA,IAClBE,KAAWT,GAAXS,aACAC,KAAoBV,GAApBU,sBACAC,KAAMX,GAANW,QACAC,KAAKZ,GAALY,OACAC,KAASb,GAATa,WAASC,KAAAd,GACTe,eAAAA,KAAAA,WAAaD,KAAG,CAAA,IAAEA,IAAAE,KAAAhB,GAClBiB,cAAAA,KAAAA,WAAYD,KAAG,CAAE,IAAAA,IACjBE,KAAuBlB,GAAvBkB,yBACAC,KAAUnB,GAAVmB,YACAC,KAAOpB,GAAPoB;AAEA,MAAKC,KAAAA,CACcC,OAAOC,WAAW,kCAAA,EACtBC,SAAf;AACA,QChFyCC,IDgFnCC,ICzEgBC,EAASC,GAPUH,KDiFD,EACpCI,SAASpB,IACTI,WAAAA,GAAAA,GClFJgB,SACSJ,GAATZ,SAAAA,CAAAA,EAKmEiB,IACjE,SAAA9B,GAAAA;AAAE,UAAA+B,KAAK/B,EAAA,CAAA,GAAEgC,KAAQhC,EAAA,CAAA,GACTiC,KAAgBX,OAAOY,iBAAiBH,EAAAA;AAC9C,aAAO,CACLA,GAAMI,QAAQC,QACd,EACEP,SAASE,IACTM,MAAML,IACNM,SAASC,WAAWN,GAAcK,OAAAA,GAClCE,WAAWP,GAAcO,UAAAA,CAAAA;IAG/B,CAAA,EAGmBC,OAAOC,GAAkB,CAAE,CAAA,GDgE1CC,KA/CqB,SAAHlB,GAAAA;AAML,UALnBhB,KAAWgB,EAAXhB,aACAI,KAASY,EAATZ;AAKA,aAAIA,KA1BJ,yBAACA,IAAAA;AAAsB,eAAA,SAAC+B,IAAAA;AACtB,iBAAOC,EACLC,SAASC,iBAAgB,MACnBC,IAAAA,OAA8BnC,KAAS,OAAK+B,EAAAA,CAAAA;QAGtD;MAAC,EAqBmC/B,EAAAA,IACzBJ,KArBuB,SAACA,IAAAA;AACnC,YAAMwC,KAAgBC,KAAKC,OAAAA,EAASC,QAAQ,CAAA;AAG5C,eAFA3C,GAAY0B,QAAQkB,YAAYJ,IAAAA,SAExBL,IAAAA;AACN,iBAAOC,EACLpC,GAAYsC,iBAAAA,uBACWE,KAAa,QAAML,EAAAA,CAAAA;QAG9C;MACF,EAWuCnC,EAAAA,IAE5B,WAAA;AAAA,eAAM,CAAA;MAAE;IAEnB,EAiC8C,EAC1CA,aAAAA,IACAI,WAAAA,GAAAA,CAAAA,GAEIyC,KAnCqB,yBAACX,GAAAA;AAC5B,aAAQY,SAAAA,IAAAA;AACN,eAAOZ,EAAc,MAAKK,IAA2BO,OAAAA,KAAAA,IAAAA,EAAQ,CAAA;MAC/D;IACF,EA+B0CZ,EAAAA,GAElCa,IAAY,SAACD,GAAAA;AAAU,aAC3BjD,GAAoCiD,CAAAA,KACpC7B,EAAmC6B,CAAAA;IAAG,GAElCE,IAAeC,OAAOC,KAAKrD,EAAAA,EAC9BsD,OAAOF,OAAOC,KAAKjC,CAAAA,CAAAA,EACnBmC,OAAO,SAAAN,GAAAA;AAAE,aAAA,CAAKC,EAAUD,CAAAA;IAAG,CAAA,GAExBO,IAAyB,EAC7BtD,eAAAA,IACA8C,YAAAA,IACAhD,qCAAAA,IACAoB,oCAAAA,GACAtB,sBAAAA,IACAa,cAAAA,GAAAA,GAOF8C,IErH+B,SAAHtC,GAAAA;AAAAA,UAyCxBuC,IAxCJP,KAAYhC,EAAZgC,cACAjD,KAAaiB,EAAbjB,eACA8C,KAAU7B,EAAV6B,YACAhD,KAAmCmB,EAAnCnB,qCACAoB,KAAkCD,EAAlCC,oCACAtB,KAAoBqB,EAApBrB,sBACAa,KAAYQ,EAAZR,cAKMgD,KAHqBR,GAAaI,OACtC,SAAAN,IAAAA;AAAM,eAAA7B,GAAmC6B,EAAAA;MAAG,CAAA,EAEQM,OACpD,SAAAN,IAAAA;AAAAA,eAAM/C,GAAc+C,EAAAA,KAAO/C,GAAc+C,EAAAA,EAAIW;MAAQ,CAAA,GAGjDC,KAA4BV,GAAaI,OAC7C,SAAAN,IAAAA;AACE,eAAAjD,GAAoCiD,EAAAA,KACpC/C,GAAc+C,EAAAA,KACd/C,GAAc+C,EAAAA,EAAIa;MAAM,CAAA,GAuBtBC,KAAiC,IAAIC,QAAQ,SAAAC,IAAAA;AACjDP,QAAAA,KAAiBO;MACnB,CAAA,GAEMC,KAAkC,CAAA,GACpCC,KAAsB,GAEpBC,KAAkBP,GAA0BrC,IAAI,SAACyB,IAAIoB,IAAAA;AACzD,YAAAC,KAMItE,GAAoCiD,EAAAA,EALtCsB,0BACEhD,KAAO+C,GAAP/C,SACAiD,KAAMF,GAANE,QAAMC,KAAAH,GACNI,eAAiBC,KAAGF,GAAHE,KAAKC,KAAIH,GAAJG,MAAMC,KAAKJ,GAALI,OAAOC,KAAML,GAANK;AAIG,qBAAtClD,iBAAiB4C,EAAAA,EAAQO,aAC3BP,GAAOQ,MAAMD,WAAW,aAE1BxD,GAAQyD,MAAM9C,YAAY,4BAC1BX,GAAQyD,MAAMD,WAAW,YACzBxD,GAAQyD,MAAML,MAAMA,KAAM,MAC1BpD,GAAQyD,MAAMJ,OAAOA,KAAO,MAE5BrD,GAAQyD,MAAMF,SAASA,KAAS,MAChCvD,GAAQyD,MAAMH,QAAQA,KAAQ;AAC9B,YAAII,KAA2Cf,GAAeX,OAC5D,SAAA2B,IAAAA;AAAC,iBAAIA,GAAE,CAAA,MAAOV;QAAM,CAAA,EACpB,CAAA;AACGS,QAAAA,OACHA,KAAgB,CAACT,IAAQhC,SAAS2C,uBAAAA,CAAAA,GAClCjB,GAAekB,KAAKH,EAAAA,IAEtBA,GAAc,CAAA,EAAGI,YAAY9D,EAAAA,GAE7B4C,MAAuB;AAEvB,YAAMmB,KAAO,WAAA;AACX,cAAA;AACEd,YAAAA,GAAOe,YAAYhE,EAAAA;UACrB,SAASiE,IAAAA;UAAc,UAEtB;AAE6B,kBAD5BrB,MAAuB,MAErBT,GAAAA;UAEJ;QACF;AAGA,eADA5D,GAAqBmD,EAAAA,IAAM,EAAEqC,MAAAA,GAAAA,GACtB,WAAA;AAAA,iBAAMpF,GAAc+C,EAAAA,EAAIa,OAAQvC,IAAS8C,IAAGiB,IAAM3E,EAAAA;QAAa;MACxE,CAAA;AAiBA,aAbAuD,GAAeuB,QAAQ,SAAAP,IAAAA;AACrBA,QAAAA,GAAE,CAAA,EAAGG,YAAYH,GAAE,CAAA,CAAA;MACrB,CAAA,GAEKd,GAAgBsB,UACnBhC,GAAAA,GAQK,EACLiC,sBA1F2B,WAAA;AAC3BhC,QAAAA,GAA2B8B,QAAQ,SAAAxC,IAAAA;AACjC,cAAM1B,KAAUyB,GAAWC,EAAAA;AACvB1B,UAAAA,OACFA,GAAQyD,MAAMhD,UAAU;QAE5B,CAAA;MACF,GAoFE4D,yBAlF8B,WAAA;AAC9BjC,QAAAA,GAA2B8B,QAAQ,SAACxC,IAAIoB,IAAAA;AACtC,cAAM9C,KAAUyB,GAAWC,EAAAA;AACvB1B,UAAAA,MACFrB,GAAc+C,EAAAA,EAAIW,SAAUrC,IAAS8C,IAAG1D,EAAAA;QAE5C,CAAA;MACF,GA4EEkF,wBAR6B,WAAA;AAE7B,eADAzB,GAAgBqB,QAAQ,SAAAK,IAAAA;AAAK,iBAAAA,GAAAA;QAAG,CAAA,GACzB/B;MACT,EAAA;IAOF,EFJuCgC,EAAO,CAAE,GAAEvC,GAAU,EACxDL,cAAAA,EAAAA,CAAAA,CAAAA,GAIAwC,IAAoBlC,EAApBkC,sBACAC,IAAuBnC,EAAvBmC,yBACAC,IAAsBpC,EAAtBoC,wBAKIG,IAAyDD,EAC7D,CAAA,GACAvC,GACA,EACErD,aAAAA,IACA8F,YAP2BrG,GAAqB2D,OAAOL,CAAAA,GAQvD9C,sBAAAA,IACAC,QAAAA,IACAC,OAAAA,IACAG,eAAAA,IACA4B,gBAAAA,IACAxB,YAAAA,GAAAA,CAAAA;AAGAC,IAAAA,MAASA,GAAQX,IAAaQ,EAAAA;AAIlC,QAAMuF,KFFR,SAAeC,IAAAA;AACb,UAgBIzC,IAhBJuC,KAAUE,GAAVF,YACA/F,KAAaiG,GAAbjG,eACAJ,KAAoBqG,GAApBrG,sBACAE,KAAmCmG,GAAnCnG,qCACAoB,KAAkC+E,GAAlC/E,oCACAhB,KAAoB+F,GAApB/F,sBACAC,KAAM8F,GAAN9F,QACA2C,KAAUmD,GAAVnD,YACA1C,KAAK6F,GAAL7F,OAAK8F,KAAAD,GACL1F,eAAAA,KAAAA,WAAa2F,KAAG,CAAA,IAAEA,IAAAC,KAAAF,GAClBxF,cAAAA,KAAAA,WAAY0F,KAAG,CAAA,IAAEA,IACjBxF,KAAUsF,GAAVtF,YACAV,KAAWgG,GAAXhG,aAMMmG,KAA4C,IAAItC,QAAQ,SAAAC,GAAAA;AAC5DP,QAAAA,KAAiBO;MACnB,CAAA;AAKA,UAHIpD,MACFyF,GAAqBC,KAAK,WAAA;AAAA,eAAM1F,GAAWV,IAAaQ,EAAAA;MAAa,CAAA,GAAA,CAElEsF,GAAWP,OACd,QAAA,WAAA;AAEE,eADAhC,GAAgB,CAAA,CAAA,GACT4C;MACT;AAGF,UAAME,KAAoC,CAAA,GAEpCC,KAA4BzD,GAAWiD,GAAW,CAAA,CAAA,GAElDS,KAAOD,KACTA,GAAaE,cAAeC,cAAc,MAAA,IAC1CpE,SAASoE,cAAc,MAAA;AAWFC,QAA0BZ,EAAAA;AAYnD,UAAMa,KAA+Bb,GAIlCzE,IAAI,SAAAyB,IAAAA;AACH,YAAM8D,KAAW/G,GAAoCiD,EAAAA,EAAIlB,MACnDiF,KAAc5F,GAAmC6B,EAAAA,EAAIlB,MACrDkF,KAAcjH,GAAoCiD,EAAAA,EAAIjB,SACtDkF,KAAiB9F,GAAmC6B,EAAAA,EAAIjB,SACxDmF,KAAqBH,GAAYnC,QAAQ,KAAKmC,GAAYlC,SAAS,GACnEvD,KAAUH,GAAmC6B,EAAAA,EAAI1B;AAGvD,YAAA,CAAK6F,EAAeL,EAAAA,KAAAA,CAAcK,EAAeJ,EAAAA,EAC/C,QAAA;AAIF,YAAA,CAAKzF,GACH,QAAA;AAGF,YNpMsB8F,IAG8ClG,IADxEmG,IMkMUC,KAAaC,EAAkBjG,EAAAA,GAE/BkG,MNpMVH,MACwEnG,KAAAA,YAH9CkG,KMsMe,EACnCK,eAAerH,IACfiH,eAAeC,GAAWlH,OAAAA,KNrMkC,CAAE,IAAAgH,IADpEC,eAEOvB,EACL,CAAA,GACA4B,EAAcC,UACdC,EANW1G,GAAbuG,aAAAA,GAOEG,EAAgBP,EAAAA,CAAAA,IMmMRQ,KAAAA,SACJP,GAAWO,UAAmB,YAAYP,GAAWO,SAEjDC,KAAW,EACfxG,SAAAA,IACA0B,IAAAA,IACA6E,SAAAA,IACAL,cAAAA,GAAAA;AAGF,YAAIvH,GAAc+C,EAAAA,KAAO/C,GAAc+C,EAAAA,EAAI+E,cAAAA,CACf9H,GAAc+C,EAAAA,EAAI+E,WAC1CrH,GAAasH,UACbtH,GAAauH,OAAAA,EAGb,QAAA;AAOJ,YAGMC,KAHuBvF,KAAKwF,IAAIrB,GAASnC,OAAOoC,GAAYpC,IAAAA,IACrChC,KAAKwF,IAAIrB,GAASpC,MAAMqC,GAAYrC,GAAAA,GAO3D0D,KAHmBzF,KAAKwF,IAAIrB,GAASlC,QAAQmC,GAAYnC,KAAAA,IACtCjC,KAAKwF,IAAIrB,GAASjC,SAASkC,GAAYlC,MAAAA,GAI1DwD,KAAoB1F,KAAKwF,IAAIlB,KAAiBD,EAAAA;AASpD,YAFuB,MAApBF,GAASjC,UAAuC,MAAvBkC,GAAYlC,UAClB,MAAnBiC,GAASlC,SAAqC,MAAtBmC,GAAYnC,SANrCsD,KAAsB,OACtBE,KAAkB,OAClBC,KAAoB,KAMpB,QAAA;AAGF,YAAMC,KAA4BC,MAChCpH,GAAmC6B,EAAAA,EAAIf,SAAAA,GAGnCuG,KAAuB,EAAEC,QAAQH,GAAAA,GAEjCI,KAAyB,EAAED,QAAQ,CAAA,EAAA,GACnCE,KAAkB,CAACL,EAAAA;AAGrBhB,QAAAA,GAAWsB,cACbD,GAAgBxD,KACL0D,WAAW/B,GAASnC,OAAOoC,GAAYpC,IAAAA,CAAAA,GAElDgE,GAAgBxD,KACL2D,WAAWhC,GAASpC,MAAMqC,GAAYrC,GAAAA,CAAAA,IAI/C4C,GAAWyB,UACbJ,GAAgBxD,KACL6D,OACPrG,KAAKsG,IAAInC,GAASlC,OAAO,CAAA,IAAKjC,KAAKsG,IAAIlC,GAAYnC,OAAO,CAAA,CAAA,CAAA,GAG9D+D,GAAgBxD,KACL+D,OACPvG,KAAKsG,IAAInC,GAASjC,QAAQ,CAAA,IAAKlC,KAAKsG,IAAIlC,GAAYlC,QAAQ,CAAA,CAAA,CAAA,IAK9DyC,GAAWvF,YACb2G,GAAS3G,UAAUiF,IACnBwB,GAAOzG,UAAUkF;AAGnB,YAAIkC,KAAqC,CAAA;AAEzC,YAAA,CACGlJ,GAAc+C,EAAAA,KAAAA,CACd/C,GAAc+C,EAAAA,EAAIoG,gBACnBnJ,GAAc+C,EAAAA,EAAIoG,aAChB1I,GAAasH,UACbtH,GAAauH,OAAAA,GAEf;AACA,cAAMoB,KAlMc,SAAC/H,GAAsB0B,IAAAA;AAAU,mBAC3DV,EACEhB,EAAQkB,iBAAqBC,MAAAA,IAAAA,OAAmCO,KAAE,IAAA,CAAA;UACnE,EA+LuD1B,IAAS0B,EAAAA;AAC3DmG,UAAAA,KAAmBE,GAAsB9H,IAAI,SAAAsE,GAAAA;AAAC,mBAAI,CAChDA,GACA0B,EAAkB1B,CAAAA,CAAAA;UACnB,CAAA;QACH;AAEA6C,QAAAA,GAASD,SAASa,EAChBX,GAAgBzG,OAAgBqH,QAAAA,CAAAA,GAGlCf,GAAOC,SAASa,EAA8Bd,GAAOC,MAAAA;AAErD,YAMI7H,IANE4I,KA5QV,SADgCC,GAAAA;AAAAA,cAE9BnI,KAAOmI,EAAPnI,SACA6H,KAAgBM,EAAhBN,kBACA1C,KAAIgD,EAAJhD;AAAAA,iBAMFiD,SAAAA,IAAAA;AAQK,gBAPHjB,KAAMiB,GAANjB,QACA1G,KAAO2H,GAAP3H,SACA4H,KAAYD,GAAZC;AAeA,gBATIC,EAAS7H,EAAAA,MACXT,GAAQyD,MAAMhD,UAAUA,KAAU,KAGhC4H,OACFrI,GAAQyD,MAAM8E,YAAY,OAC1BvI,GAAQyD,MAAM+E,WAAW,QAGtBrB,IAAL;AAIA,kBAAMsB,KArEkC,SAACtB,IAAAA;AACjCA,uBAAAA,YAAAA,GAAOuB,KAAK,IAAA,IAAA;cAAA,EAoEiCvB,EAAAA;AAKrDnH,cAAAA,GAAQyD,MAAM9C,YAAY8H,IAEtBZ,MAzEmC,SAAHjI,IAAAA;AACtC,oBACAuH,KAAMvH,GAANuH,QACAhC,KAAIvF,GAAJuF;AAFgBvF,gBAAAA,GAAhBiI,iBAQiB3D,QAAQ,SAAA/F,IAAAA;AAAAA,sBAAE+B,KAAK/B,GAAAA,CAAAA,GAAEwK,KAAexK,GAAA,CAAA;AAC/C,sBAAKgH,GAAKyD,SAAS1I,EAAAA,GAAnB;AAGA,wBAAMwH,KAASP,GAAO,CAAA,GAChBS,KAAST,GAAO,CAAA,GAEhBK,KAAaL,GAAO,CAAA,GAEpB0B,KAAc,EAAEtB,YAAY,GAAGC,YAAY,GAAGE,QAAQ,GAAGE,QAAQ,EAAA,GACnEkB,KAAkB;AAClBH,oBAAAA,GAAgBrB,cAClBuB,GAAYtB,aAAAA,CANKJ,GAAO,CAAA,IAMeO,IACvCmB,GAAYrB,aAAAA,CAAcA,KAAaI,IACvCkB,MAAgCD,eAAAA,GAAYtB,aAAAA,SAAiBsB,GAAYrB,aAAU,QAEjFmB,GAAgBlB,UAClBoB,GAAYnB,SAAS,IAAIA,IACzBmB,GAAYjB,SAAS,IAAIA,IACzBkB,MAAe,YAAcD,GAAYnB,SAAWmB,OAAAA,GAAYjB,SAAM,MAExE1H,GAAMuD,MAAM9C,YAAYmI;kBAlBxB;gBAmBF,CAAA;cACF,EA0CkC,EAC1BjB,kBAAAA,IACAV,QAAAA,IACAhC,MAAAA,GAAAA,CAAAA;YAbJ;UAgBF;QAAC,EA+N6C,EACxCnF,SAAAA,IACA6H,kBAAAA,IACA1C,MAAAA,GAAAA,CAAAA;AAIF,YAAIxG,GAAc+C,EAAAA,KAAO/C,GAAc+C,EAAAA,EAAIpC,YAAY;AAErD,cAAMyJ,KAAmBpK,GAAc+C,EAAAA,EAAIpC;AAC3CA,UAAAA,KAAa,WAAA;AAAM,mBAAAyJ,GAAkB/I,IAASZ,EAAAA;UAAa;QAC7D;AAKA,YAyBM4J,KACJV,EAASlB,GAAS3G,OAAAA,KAClB6H,EAASpB,GAAOzG,OAAAA,KAChB2G,GAAS3G,YAAYyG,GAAOzG,SAE1BwI,KAAAA;AAsEJ,eAAOzE,EAAO,CAAE,GAAEgC,IAAU,EAC1BD,SAAAA,IACAL,cAAAA,IACAgD,iBAvEuC,SAApBC,GAAAA;AAAmD,cAA5BrK,KAAMqK,EAANrK,QAAQsK,KAAcD,EAAdC;AAsClD,iBArCA7K,GAAqBmD,EAAAA,IAAM,EACzB2H,SAASvK,GAAOuK,QAAQC,KAAKxK,EAAAA,GAC7BsK,gBAAAA,GAAAA,GAEyB,SAAAtK,IAAAA;AACrBH,YAAAA,GAAc+C,EAAAA,KAAO/C,GAAc+C,EAAAA,EAAI6H,kBACzC5K,GAAc+C,EAAAA,EAAI6H,eAAgBzK,GAAO0K,gBAAAA,CAAAA,GAGtCP,OACHA,KAAAA,MACItK,GAAc+C,EAAAA,KAAO/C,GAAc+C,EAAAA,EAAInC,WACzCZ,GAAc+C,EAAAA,EAAInC,QAASS,IAASZ,EAAAA;AAIxC,gBAAMqK,KAAe3K,GAAO0K,gBAAAA;AAC5B,gBAAKrE,GAAKyD,SAAS5I,EAAAA,GAAnB;AAKA,kBAAM0J,KAAqB,EAAEvC,QAAQ,CAAA,EAAA;AAErCuC,cAAAA,GAAKvC,SAASC,GAASD,OAAOlH,IAAI,SAAC0J,IAASC,IAAAA;AAAK,uBAC/CC,EAAUF,IAASzC,GAAOC,OAAOyC,EAAAA,GAAQH,EAAAA;cAAa,CAAA,GAGpDT,OACFU,GAAKjJ,UAAUoJ,EACbzC,GAAS3G,SACTyG,GAAOzG,SACPgJ,EAAAA,IAGJvB,GAAYwB,EAAAA;YAfZ,MAFE5K,CAAAA,GAAOuK,QAAAA;UAkBX;QAEF,GAiCES,gBA/BqC,WAAA;AAErC5B,UAAAA,GAAY,EACVf,QAAQC,GAASD,QACjB1G,SAASuI,KAAiB5B,GAAS3G,UAAAA,QACnC4H,cAAczC,GAAAA,CAAAA,GAGZjH,GAAc+C,EAAAA,KAAO/C,GAAc+C,EAAAA,EAAIqI,oBACzCpL,GAAc+C,EAAAA,EAAIqI,iBAAkB/J,IAASZ,EAAAA,GAG3C4G,GAAWgE,kBACbhK,GAAQyD,MAAMuG,kBAAkBhE,GAAWgE,kBAClCnL,OACTmB,GAAQyD,MAAMuG,kBAAkB,QAGlCnC,GAAiB3D,QAAQ,SAAA+F,GAAAA;AAA6B,gBAA3B/J,KAAK+J,EAAA,CAAA,GAAEtB,KAAesB,EAC/C,CAAA;AAAItB,YAAAA,GAAgBqB,kBAClB9J,GAAMuD,MAAMuG,kBAAkBrB,GAAgBqB,kBACrCnL,OACTqB,GAAMuD,MAAMuG,kBAAkB;UAElC,CAAA;QACF,GAOEZ,gBAzGqB,SAACc,GAAAA;AAAAA,iBACf3L,GAAqBmD,EAAAA,GACxByI,EAAW7K,EAAAA,KACbA,GAAAA,GAGFU,GAAQyD,MAAM9C,YAAY,IAC1BkH,GAAiB3D,QAAQ,SAAAkG,IAAAA;AAASA,YAAAA,GAAAA,CAAAA,EACxB3G,MAAM9C,YAAY;UAC5B,CAAA,GACIiF,MAAsB5F,OACxBA,GAAQyD,MAAM8E,YAAY,IAC1BvI,GAAQyD,MAAM+E,WAAW,KAEvB0B,MAEJjF,GAAsBpB,KAAKnC,EAAAA,GAEvBuD,GAAsBd,UAAUoB,GAAcpB,UAGhDhC,GAAe8C,EAAAA;QAEnB,GAmFEoF,YAAYrE,GAAWqE,WAAAA,CAAAA;MAE3B,CAAA,EAECrI,OAAOsI,OAAAA;AAIV,UAFA/E,GAAcrB,QAAQ,SAAAqG,GAAAA;AAAAA,gBAAwBT,GAAPS,EAAdT,gBAAAA;MAAqC,CAAA,GAE1D/K,GACF,QAAO,WAAA;MACT;AAEA,UAGMyL,KAAcjF,GAAcvD,OAChC,SAAAyI,GAAAA;AAAC,eAAIA,EAAEJ,eAJiB9J,KAIckK,EAAEJ,YAHxC9E,GAAcvD,OAAO,SAAAyI,IAAAA;AAAK,iBAAAA,GAAE/I,OAAOnB;QAAM,CAAA,EAAE4D;AADpB,YAAC5D;MAI2B,CAAA,GAI/CmK,KAAoB,CAAA,GAEpBC,KAAqB,CAAA,GAErBC,KAAqB,CAAA;AAE3BJ,MAAAA,GAAYtG,QAAQ,SAAAS,GAAAA;AACdA,UAAK4B,WACPqE,GAAmBjG,EAAK4B,OAAAA,IAAAA,MACpBoE,GAAmBhG,EAAK0F,UAAAA,IAC1BM,GAAmBhG,EAAK0F,UAAAA,EAAaxG,KAAKc,EAAK4B,OAAAA,IAC5CoE,GAAmBhG,EAAK0F,UAAAA,IAAe,CAAC1F,EAAK4B,OAAAA,KAE9CmE,GAAkB/F,EAAK0F,UAAAA,IACzBK,GAAkB/F,EAAK0F,UAAAA,EAAaxG,KAAKc,CAAAA,IACtC+F,GAAkB/F,EAAK0F,UAAAA,IAAe,CAAC1F,CAAAA;MAEhD,CAAA;AAEA,UAAMkG,KAActF,GACjBvD,OAAO,SAAA8I,GAAAA;AAAY,eAAAA,EAASvE;MAAO,CAAA,EACnC3F,OAAO,SAACmK,GAAKC,IAAAA;AAMZ,eALID,EAAIC,GAAKzE,OAAAA,IACXwE,EAAIC,GAAKzE,OAAAA,EAAS1C,KAAKmH,EAAAA,IAEvBD,EAAIC,GAAKzE,OAAAA,IAAW,CAACyE,EAAAA,GAEhBD;MACT,GAAG,CAAA,CAAA,GAECE,KAAgB1F,GAAcvD,OAAO,SAAAyI,GAAAA;AAAK,eAAA,OAAAD,GAAYU,QAAQT,CAAAA;MAAS,CAAA;AAyB7E,aAvBAQ,GAAc/G,QAAQ,SAAA4G,GAAAA;AACpBA,UAASK,mBAAmB,WAAA;AACtBT,UAAAA,GAAkBI,EAASpJ,EAAAA,KAC7BgJ,GAAkBI,EAASpJ,EAAAA,EAAIwC,QAAQkH,CAAAA,GAErCT,GAAmBG,EAASpJ,EAAAA,KACJG,OAAOC,KAC/B6I,GAAmBG,EAASpJ,EAAAA,EAAId,OAC9B,SAACmK,IAAsBC,IAAAA;AAAY,gBAAAK;AACjC,mBAAA7G,EAAOuG,MAAGM,KAAAA,CAAAA,GAAKL,EAAAA,IAAAA,MAAWK,GAAAA;UAAG,GAC/B,CAAE,CAAA,CAAA,EAGYnH,QAAQ,SAACoH,IAAAA;AACzBC,cACEV,GAAYS,EAAAA,GACZpM,GAAcoM,EAAAA,CAAAA;UAElB,CAAA;QAEJ;MACF,CAAA,GAEO,WAAA;AAkBL,eAfK/F,GAAcpB,UACjBhC,GAAe,CAAA,CAAA,GAGjB8I,GACGjJ,OAAO,SAAA8I,GAAAA;AACN,iBAAA,CAAQA,EAASvE;QACnB,CAAA,EACCrC,QAAQkH,CAAAA,GAGXvJ,OAAOC,KAAK+I,EAAAA,EAAa3G,QAAQ,SAAAoH,GAAAA;AAC3BV,UAAAA,GAAmBU,CAAAA,KACvBC,EAAuBV,GAAYS,CAAAA,GAAapM,GAAcoM,CAAAA,CAAAA;QAChE,CAAA,GACOvG;MACT;IACD,EE5ZqCN,CAAAA;AAEhCpF,IAAAA,KACFA,GAAwB,EACtB+E,sBAAAA,GACAC,yBAAAA,GACAC,wBAAAA,GACAkH,wBAAwB7G,GAAAA,CAAAA,KAG1BP,EAAAA,GACAE,EAAAA,EAAyBU,KAAKX,CAAAA,GAC9BM,GAAAA;EAvEF;AAyEF;AFhBA,IK/GM8G,IAAyC,SAAH7L,GAAAA;AAKoD,MAJ9FI,KAAOJ,EAAPI,SAAO0L,KAAA9L,EACPjB,eAAAA,KAAAA,WAAa+M,KAAG,CAAA,IAAEA,IAAAC,KAAA/L,EAClBrB,sBAAAA,KAAAA,WAAoBoN,KAAG,CAAE,IAAAA,IAGnBC,KAAkB7L,EAAeC,IAF9BJ,EAATZ,SAAAA,GAIM6M,KAAyB7K,EAC7BhB,GAAQkB,iBAAgB,MAAKC,IAAiC,GAAA,CAAA,GAG1D2K,KAA6C,CAAE,GAC/CC,KAAyB,CAAA,GACzBC,KAAuC,CAAA;AAG7CJ,EAAAA,GACG5J,OACC,SAAAiK,IAAAA;AACE,WAAAtN,MACAA,GAAcsN,GAAG3L,QAAQC,MAAAA,KACzB5B,GAAcsN,GAAG3L,QAAQC,MAAAA,EAASgC;EAAM,CAAA,EAE3C2B,QAAQ,SAAA+H,IAAAA;AACP,QAAIhJ,KAASgJ,GAAGC;AAEhB,QAAID,GAAGE,SAAS;AACd,UAAMC,KAAgBH,GAAGE,QAAO,MAC1BhL,IAA6B,GAAA;AAE/BiL,MAAAA,OACFnJ,KAASmJ;IAEb;AACA,QAAIC,KAAWN,GAAWO,UAAU,SAAAC,IAAAA;AAAAA,aAAKA,GAAE,CAAA,MAAOtJ;IAAM,CAAA;AAAA,WACpDoJ,OACFN,GAAWlI,KAAK,CAACZ,IAAQA,GAAOuJ,sBAAAA,CAAAA,CAAAA,GAChCH,KAAWN,GAAW5H,SAAS,IAEjC2H,GAAqBG,GAAG3L,QAAQC,MAAAA,IAAWwL,GAAWM,EAAAA,EAAU,CAAA,GAChEL,GAAkBC,GAAG3L,QAAQC,MAAAA,IAAW0C;EAC1C,CAAA;AAEF,MAAMwJ,KAA0B3M,EAAS8L,EAAAA,GAuCnCc,KAlCAD,GAAwBxM,IAAI,SAAA9B,IAAAA;AAAsB,QAApB+B,KAAK/B,GAAAA,CAAAA,GAAEgC,KAAQhC,GAAA,CAAA,GAC3C6E,KAA2B,CAAA;AAIjC,QACErE,MACAA,GAAcuB,GAAMI,QAAQC,MAAAA,KAC5B5B,GAAcuB,GAAMI,QAAQC,MAAAA,EAASgC,QACrC;AACA,UAAMoK,KAAYb,GAAqB5L,GAAMI,QAAQC,MAAAA;AAErDiE,QAAOxB,IAA0B,EAC/BhD,SAASE,IACT+C,QAAQ+I,GAAkB9L,GAAMI,QAAQC,MAAAA,GACxC4C,eAAe,EACbC,KAAKjD,GAASiD,MAAMuJ,GAAUvJ,KAC9BC,MAAMlD,GAASkD,OAAOsJ,GAAUtJ,MAChCC,OAAOnD,GAASmD,OAChBC,QAAQpD,GAASoD,OAAAA,EAAAA,CAAAA;IAGvB;AAEA,WAAO,CACLrD,GAAMI,QAAQC,QACd,EACEC,MAAML,IACNM,SAASC,WAAWjB,OAAOY,iBAAiBH,EAAAA,EAAOO,WAAW,GAAA,GAC9DuC,0BAAAA,GAAAA,CAAAA;EAGN,CAAA,EAEkEpC,OAChEC,GACA,CAAA,CAAA;AAUF,SAlHwC,SACxCtC,IACAqO,IAAAA;AAEA/K,WAAOC,KAAKvD,EAAAA,EAAsB2F,QAAQ,SAAAxC,IAAAA;AACpCnD,MAAAA,GAAqBmD,EAAAA,EAAI2H,WAC3B9K,GAAqBmD,EAAAA,EAAI2H,QAAAA,GAEvB9K,GAAqBmD,EAAAA,EAAI0H,kBAC3B7K,GAAqBmD,EAAAA,EAAI0H,eAAAA,IAAgB,GAAA,OAEpC7K,GAAqBmD,EAAAA;IAC9B,CAAA,GACAkL,GAAkB1I,QAAQ,SAAA+H,IAAAA;AACxBA,MAAAA,GAAGxI,MAAM9C,YAAY,IACrBsL,GAAGxI,MAAMhD,UAAU;IACrB,CAAA;EACF,EA6FIlC,IACAqN,GAAgB7J,OAAO8J,EAAAA,CAAAA,GAGlB,EACLa,yBAAAA,IACArO,sBAAsBoO,GAAwBxM,IAC5C,SAAAkI,IAAAA;AAAU,WAANA,GAAM,CAAA,EAAG7H,QAAQC;EAAO,CAAA,EAAA;AAGlC;ALUA,IOtIMsM,IAAsC,IAAIC;;;;;;;;;;;;;;;;;;;;;;;;ACNnC,IAAAC,KAAcC,mCAAAA,eAAc,CAAmB,CAAA;AAA/C,IACAC,KAAgBD,mCAAAA,eAAc,QAAA;AAD9B,ICWPE,KAAQ,yBAAAC,IAAAA;AAAAA,MAAAA,IAAAA;AAAAD,WAAAA,KAAAA;AAAA,aAAAE,IAAAC,IAAAC,UAAAC,QAAAC,KAAAC,IAAAA,MAAAJ,CAAAA,GAAAK,KAAAA,GAAAA,KAAAL,GAAAK,KAAAF,CAAAA,GAAAE,EAAAA,IAAAJ,UAAAI,EAAAA;AAQwB,YARxBN,KAAAD,GAAAQ,KAAAC,MAAAT,IAAAU,CAAAA,IAAAA,EAAAA,OAAAL,EAAAA,CAAAA,KAAAJ,MAMJU,uBAA6C,CAAA,GAAEV,GAC/CW,gBAA+B,CAAE,GAAAX,GACjCY,KAAAA,QAA4BZ;EAAA;AAAA,EAAAa,KARxBd,KAAAA,KAAAD,IAAAA,YAAAA,OAAAA,OAAAA,GAAAA,SAAAA,GAAAA,GAAAA,UAAAA,cAAAA,IAAAA,GAAAA,IAAAA,EAAAA;AAQwBgB,MAAAA,KAAAhB,GAAAiB;AAAAA,SAAAD,GAEpCE,0BAAA,SAAwBC,GAAAA;AACtB,WAAIA,EAAUC,YAAYC,KAAKC,MAAMF,WAAWC,KAAKP,KAC5CS,EAAuC,EAC5CC,SAASH,KAAKP,IAEdD,eAAeQ,KAAKR,eACpBD,sBAAsBS,KAAKT,sBAC3Ba,WAAWJ,KAAKC,MAAMG,UAAAA,CAAAA,IAI5B;EAAA,GAACT,GAEDU,qBAAA,SACEP,IACAQ,IACAC,IAAAA;AAEIP,SAAKC,MAAMF,YAAYD,GAAUC,WAAWC,KAAKP,MACnDe,EAAgB,EACdC,qCAAqCF,GAAWG,yBAChDC,sBAAsBJ,GAAWI,sBACjCC,aAAaZ,KAAKP,IAClBF,sBAAsBS,KAAKT,sBAC3BC,eAAeQ,KAAKR,eACpBqB,sBAAsBb,KAAKC,MAAMY,sBACjCC,QAAQd,KAAKC,MAAMa,QACnBC,OAAOf,KAAKC,MAAMc,OAClBX,WAAWJ,KAAKC,MAAMG,WACtBY,eAAehB,KAAKC,MAAMe,eAC1BC,yBAAyBjB,KAAKC,MAAMgB,yBACpCC,cAAc,EACZC,UAAUrB,GAAUoB,cACpBE,SAASpB,KAAKC,MAAMiB,aAAAA,GAEtBG,YAAYrB,KAAKC,MAAMoB,YACvBC,SAAStB,KAAKC,MAAMqB,QAAAA,CAAAA;EAG1B,GAAC3B,GAEM4B,SAAA,WAAA;AAAMC,QAAAA,KACXxB,MAAAyB,IAA0CzB,KAAKC,OAAnBG,KAASqB,EAATrB,WAGxBsB,KACFC,+BAAAA,QAAAC,cAACpD,GAAYqD,UAAQ,EAACC,OAAO9B,KAAKR,cAAAA,GAGhCmC,+BAAAA,QAAAC,cAPWH,EAAPtB,SAOI,EACN4B,WARoBN,EAATM,WASXC,KAAK,SAACvC,IAAAA;AAAqB,aAAA+B,GAAK/B,KAAKA;IAAE,EAAA,GAEtCO,KAAKC,MAAMgC,QAAAA,CAAAA;AAalB,WARI7B,OACFsB,KACEC,+BAAAA,QAACC,cAAAlD,GAAcmD,UAAQ,EAACC,OAAO1B,GAAAA,GAC5BsB,EAAAA,IAKAA;EACT,GAAC/C;AAAA,EA7EmBuD,eAAAA,SAAAA;AAAhBvD,GACGwD,eAAe,EACpBtB,sBAAAA,MACAV,SAAS,MAAA;ACjBb,IAAAiC,KAAA,CAAA,YAAA,UAAA,iBAAA,WAAA;AAAA,IAAAC,KAAA,CAAA,YAAA,UAAA,cAAA,gBAAA,YAAA,WAAA,oBAAA,cAAA,UAAA,gBAAA;AAAA,IAgBaC,KAAuD,SAAhDC,IAAAA;AAMf,MAAAC,GALHP,KAAQM,GAARN,UACAQ,KAAMF,GAANE,QACAC,KAAaH,GAAbG,eACAtC,KAASmC,GAATnC,WACGuC,KAAIC,GAAAL,IAAAH,EAAAA,GAEHS,KAAQZ,IACNa,KAbR,yBAAoBD,IAAAA;AAClB,WAAwB,cAAA,OAAVA;EAChB,EAW0CA,EAAAA;AAExC,MAAA,CAAKC,GACH,KAAA;AACED,IAAAA,KAAQE,eAAAA,SAASC,KAAKf,EAAAA;EACxB,SAASgB,IAAAA;AACP,UAAM,IAAIC,MAAM,iDAAA;EAClB;AAIGP,EAAAA,GAAKQ,SAAUR,GAAKS,aAAcT,GAAKU,WAC1CC,EAAUC,OAAOZ,IAAM,EACrBS,WAAAA,MACAD,OAAAA,MACAE,SAAAA,KAAS,CAAA;AAIb,MAAMG,OAAchB,IAAA,CAAA,GACjBiB,EAAUC,gBAAAA,IAAmBC,KAAKC,UAAUjB,EAAAA,GAAKH;AAUpD,SAAA,WAPIC,KACFe,GAAeC,EAAUI,YAAAA,IAAgBC,OAAOrB,EAAAA,IACzCC,OACPc,GAAeC,EAAUM,oBAAAA,IAAwBD,OAAOpB,EAAAA,IAAAA,WACtDtC,OACFoD,GAAeC,EAAUO,eAAAA,IAAmB5D,KAE1C0C,KACMD,GAAmBW,EAAAA,IAEtBS,mCAAAA,cAAapB,IAA4BW,EAAAA;AAClD;AA1DA,IA4DaU,KAAsD,SAApCC,IAAAA;AAC7B,MAAAlC,IAAQkC,GAARlC,UACAQ,KAAM0B,GAAN1B,QACA2B,KAAUD,GAAVC,YACAC,KAAYF,GAAZE,cACAC,KAAQH,GAARG,UACAhD,KAAO6C,GAAP7C,SACAiD,KAAgBJ,GAAhBI,kBACAlD,KAAU8C,GAAV9C,YACAmD,KAAML,GAANK,QACAC,KAAcN,GAAdM,gBACG9B,KAAIC,GAAAuB,IAAA9B,EAAAA;AAEP,SAAKJ,IAGDU,GAAKD,gBACAf,+BAAAA,QAAAA,cAACW,IAAOoC,GAAK/B,CAAAA,GAAAA,EAAAA,GAAOV,CAAAA,IAI3BN,+BAAAA,QAACC,cAAAlD,GAAciG,UAAQ,MACpB,SAAAvE,IAAAA;AAAS,WACRuB,eAAAA,QAAAA,cAACnD,GAAYmG,UACV,MAAA,SAAAC,IAAAA;AAgBC,aAZItB,EAAUuB,SAASD,EAAAA,KAASnC,OAC9BmC,GAAKnC,EAAAA,IAAU,EACb2B,YAAAA,IACAC,cAAAA,IACAC,UAAAA,IACAhD,SAAAA,IACAiD,kBAAAA,IACAlD,YAAAA,IACAmD,QAAAA,IACAC,gBAAAA,GAAAA,IAIF9C,+BAAAA,QAACC,cAAAU,IAAOoC,GAACjC,EAAAA,QAAQA,GAAAA,GAAYE,IAAI,EAAEvC,WAAWA,GAAAA,CAAAA,GAC3C6B,CAAAA;IAGP,CAAA;EACqB,CAAA,IAhCpB;AAoCX;AAyBAiC,GAAmBY,cAAc;;;ArBhHjC,wBAAuB;;;AuBrBvB,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAUA,SAAS,gBAAgB,OAAe;AACvC,QAAM,MAAM,KAAK,KAAK,KAAK,KAAK,KAAK,CAAC;AAEtC,MAAI,UAAoB,CAAC,EAAE,MAAM,KAAK,MAAM,IAAI,CAAC;AAEjD,WAAS,OAAO,GAAG,OAAO,KAAK,QAAQ;AACtC,YAAQ,KAAK;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,KAAK,QAAQ,IAAI;AAAA,IAC7B,CAAC;AAAA,EACF;AAEA,WAAS,OAAO,GAAG,OAAO,KAAK,QAAQ;AACtC,YAAQ,KAAK;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,KAAK,QAAQ,IAAI;AAAA,IAC7B,CAAC;AAAA,EACF;AAEA,SAAO;AACR;AAOO,SAAS,gBAAgB,QAIrB;AACV,QAAM,EAAE,OAAO,QAAQ,MAAM,IAAI;AACjC,MAAI,WAAW,KAAK,UAAU,GAAG;AAChC,WAAO;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,IACP;AAAA,EACD;AAEA,MAAI,cAA6B;AACjC,MAAI,cAAc;AAElB,QAAM,wBAAwB,IAAI;AAElC,aAAW,UAAU,gBAAgB,KAAK,GAAG;AAC5C,UAAM,aAAa,SAAS,OAAO;AACnC,UAAM,YAAY,QAAQ,OAAO;AAEjC,UAAM,wBAAwB,aAAa,YAAY,UAAU;AAEjE,UAAM,OACL,0BAA0B;AAAA;AAAA,MAExB,wBACA;AAAA,MAEA;AAAA;AAAA;AAAA,MAEC,IAAI,wBACL;AAAA,MAEA;AAAA;AAEH,QAAI,OAAO,aAAa;AACvB,oBAAc;AACd,oBAAc;AAAA,IACf;AAAA,EACD;AACA,YAAU,WAAW;AACrB,SAAO;AACR;;;ACjEA,IAAAC,iBAA+C;;;ACZ/C,IAAAC,iBAA4C;AAV5C,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AASO,SAAS,0BACf,WACA,WACA,SACA,OACA,MACC;AACD,QAAM,CAAC,WAAW,YAAY,QAAI,yBAAS,KAAK;AAChD,QAAM,EAAE,aAAa,WAAW,MAAM,gBAAgB,IAAI,eAAe;AACzE,QAAM,iBAAiB,qBAAqB,YAAY,eAAe;AACvE,QAAM,iBAAa,uBAAO,EAAE;AAE5B,gCAAU,MAAM;AACf,QAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,WAAW,aAAa,CAAC;AAC1D;AACD,eAAW,UAAU,OAAO,WAAW,MAAM;AAC5C,qBAAe,SAAS,KAAK,EAAE,KAAK,CAAC,WAAW;AAE/C,YAAI,WAAW,YAAY,GAAI;AAC/B,cAAM,OAAO,CAAC,GAAG,OAAO,OAAO,CAAC,EAAE;AAAA,UACjC,CAACC,OAAMA,GAAE,oBAAoB,MAAM;AAAA,QACpC;AACA,YAAI,MAAM,kBAAkB,GAAG;AAC9B,uBAAa,IAAI;AAAA,QAClB;AAAA,MACD,CAAC;AAAA,IACF,GAAG,GAAK;AAER,WAAO,MAAM;AACZ,mBAAa,WAAW,OAAO;AAE/B,iBAAW,UAAU;AAAA,IACtB;AAAA,EACD,GAAG,CAAC,WAAW,SAAS,iBAAiB,aAAa,gBAAgB,KAAK,CAAC;AAE5E,gCAAU,MAAM;AACf,QAAI,CAAC,aAAa,CAAC,aAAa,CAAC,gBAAiB;AAClD,UAAM,mBAAmB,kBAAkB,WAAW,SAAS;AAC/D,UAAM,CAAC,iBAAiB,OAAO,IAAI,WAAW,MAAM,GAAG,KAAK,CAAC;AAC7D,UAAM,qBAAqB,kBAAkB,iBAAiB,SAAS;AAEvE,QAAI,sBAAsB,kBAAkB;AAC3C,YAAM,OAAsB;AAAA,QAC3B;AAAA,QACA;AAAA,QACA;AAAA,QACA,aAAa,KAAK,UAAU;AAAA,QAC5B,aAAa;AAAA,MACd;AACA,YAAM,kBAAkB;AAAA,QACvB,QAAQ;AAAA,QACR,MAAM,KAAK,UAAU,IAAI;AAAA,MAC1B,CAAC;AAAA,IACF;AAAA,EACD,GAAG;AAAA,IACF;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,KAAK,UAAU;AAAA,IACf;AAAA,IACA;AAAA,EACD,CAAC;AACF;;;ACtEA,IAAAC,iBAA0D;AAT1D,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAeO,IAAM,gBAAgB,CAC5B,eACA,cACI;AACJ,QAAM,eAAe,IAAI,IAAI,UAAU,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC;AACrE,QAAM,mBAAmB,IAAI,IAAI,cAAc,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC;AAC7E,QAAM,oBAAoB,UAAU;AAAA,IACnC,CAAC,EAAE,GAAG,MAAM,CAAC,iBAAiB,IAAI,EAAE;AAAA,EACrC;AACA,SAAO,cACL,OAAO,CAAC,KAAU,sBAAsB;AACxC,UAAM,OAAO,aAAa,IAAI,kBAAkB,EAAE;AAClD,QAAI,SAAS,QAAW;AACvB,YAAM,eAAe,kBAAkB,CAAC;AACxC,UAAI,CAAC,aAAc,QAAO;AAC1B,UAAI,KAAK,YAAY;AACrB,wBAAkB,OAAO,GAAG,CAAC;AAAA,IAC9B,OAAO;AACN,UAAI,KAAK,IAAI;AAAA,IACd;AACA,WAAO;AAAA,EACR,GAAG,CAAC,CAAC,EACJ,OAAO,iBAAiB;AAC3B;AAEO,IAAM,oBAAoB;AAElB,SAAR,gBACN,OACA,OACA,MACC;AACD,QAAM,2BAAuB;AAAA,IAC5B,MACC,MAAM,OAAO,OAAO,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE;AAAA,MAAQ,CAACC,OACzCA,GAAE,OAAO,cACN;AAAA,QACAA;AAAA,QACA;AAAA,UACC,GAAGA;AAAA,UACH,IAAIA,GAAE,KAAK;AAAA,UACX,QAAQ;AAAA,YACP,GAAGA,GAAE;AAAA,YACL,OAAOA,GAAE,OAAO;AAAA,YAChB,cAAcA,GAAE,OAAO;AAAA,UACxB;AAAA,QACD;AAAA,MACD,IACC,CAACA,EAAC;AAAA,IACN;AAAA,IACD,CAAC,MAAM,KAAK;AAAA,EACb;AAEA,QAAM,CAAC,eAAe,gBAAgB,QAAI;AAAA,IACzC,qBAAqB,MAAM,GAAG,KAAK;AAAA,EACpC;AACA,QAAM,CAAC,gBAAgB,iBAAiB,QAAI;AAAA,IAC3C,CAAC;AAAA,EACF;AAEA,QAAM,qBAAiB,4BAAY,CAAC,UAAgB;AACnD,sBAAkB,CAAC,QAAQ,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,KAAK,IAAI,EAAE,EAAE;AAAA,EAC9D,GAAG,CAAC,CAAC;AAEL,QAAM,gCAA4B;AAAA,IACjC,MACC,CAAC,GAAG,oBAAoB,EACtB,KAAK,CAACC,IAAGC,OAAM;AAEf,UAAID,GAAE,OAAO,MAAM,GAAI,QAAO;AAC9B,UAAIC,GAAE,OAAO,MAAM,GAAI,QAAO;AAG9B,UACCD,GAAE,GAAG,SAAS,iBAAiB,KAC/B,CAACC,GAAE,GAAG,SAAS,iBAAiB;AAEhC,eAAO;AACR,UACC,CAACD,GAAE,GAAG,SAAS,iBAAiB,KAChCC,GAAE,GAAG,SAAS,iBAAiB;AAE/B,eAAO;AAGR,cAAQ,eAAeA,GAAE,EAAE,KAAK,MAAM,eAAeD,GAAE,EAAE,KAAK;AAAA,IAC/D,CAAC,EACA,MAAM,GAAG,KAAK;AAAA,IACjB,CAAC,gBAAgB,OAAO,MAAM,IAAI,oBAAoB;AAAA,EACvD;AAEA,QAAM,eAAW;AAAA,IAChB,MACC,qBAAqB,OAAO,CAACA,OAAM,eAAeA,GAAE,EAAE,MAAM,MAAS;AAAA,IACtE,CAAC,gBAAgB,oBAAoB;AAAA,EACtC;AAEA,gCAAU,MAAM;AACf,aAAS,QAAQ,cAAc;AAAA,EAChC,GAAG,CAAC,UAAU,cAAc,CAAC;AAE7B,gCAAU,MAAM;AACf;AAAA,MAAiB,CAAC,yBACjB,cAAc,sBAAsB,yBAAyB;AAAA,IAC9D;AAAA,EACD,GAAG,CAAC,2BAA2B,KAAK,CAAC;AAErC,SAAO,EAAE,eAAe,eAAe;AACxC;;;ACjIA,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAGe,SAAR,cACN,OAC0B;AAC1B,SAAO,UAAU,QAAQ,UAAU;AACpC;;;ACbA,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAMO,IAAM,OACZ,CAAC,cAAsB,eAAe,MACtC,CAAC,eACA,IAAI,WAAmB,CAAC,cAAc;AACrC,QAAME,QAAO,IAAI,KAAK,cAAc,YAAY;AAChD,aAAW,UAAU;AAAA,IACpB,GAAG;AAAA,IACH,MAAM,CAAC,UAAU;AAChB,MAAAA,MAAK,OAAO,KAAK;AACjB,gBAAU,KAAKA,MAAK,MAAM,CAAC;AAAA,IAC5B;AAAA,EACD,CAAC;AACF,CAAC;;;ACxBH,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAWA,SAAS,cACR,iBACA,qBAAqB,KACpB;AACD,SAAO,cAAc,CAAC,iBAAiB,SAAS,kBAAkB,CAAC,CAAC,EAAE;AAAA,IACrE,UAAU,CAAC,CAAC,cAAc,MAAM,eAAe,SAAS,CAAC;AAAA,IACzD,SAAS;AAAA,EACV;AACD;AAEO,SAAS,eACf,iBACA,SACC;AACD,SAAO,cAAc;AAAA,IACpB;AAAA,IACA;AAAA,IACA,cAAc,eAAe;AAAA,EAC9B,CAAC,EAAE;AAAA,IACF,IAAI,CAAC,CAAC,QAAQ,gBAAgB,CAAC,qBAAqB,cAAc,CAAC,MAAM;AACxE,YAAM,gBAAgB,eACpB,gBAAgB,EAChB,OAAO,CAACC,MAAK,MAAM;AACnB,cAAM,QAAQ,EAAE,OAAO,SAAS,EAAE,SAAS;AAC3C,YAAI,UAAU,QAAQ,EAAE,QAAQ,MAAM;AACrC,UAAAA,KAAI,IAAI,OAAO,EAAE,GAAG;AAAA,QACrB;AACA,eAAOA;AAAA,MACR,GAAG,oBAAI,IAA8B,CAAC;AACvC,YAAM,eAAe,oBAAI,IAAY;AACrC,iBAAW,SAAS,QAAQ;AAC3B,cAAM,MAAM,cAAc,IAAI,KAAK;AACnC,YAAI,KAAK;AACR,uBAAa,IAAI,GAAG;AAAA,QACrB;AAAA,MACD;AACA,UAAI,yBAAyB;AAC7B,UAAI,qBAAqB;AACzB,UAAI,sBAAsB;AAC1B,UAAI,sBAAsB;AAE1B,qBAAe,QAAQ,CAAC,WAAW;AAClC,YAAI,CAAC,aAAa,IAAI,OAAO,GAAG,EAAG;AACnC,cAAM,WAAW,oBAAoB,IAAI,OAAO,EAAE;AAClD,YAAI,CAAC,SAAU;AAEf,YAAI,OAAO,SAAS,eAAe;AAClC,gCAAsB,OAAO,cAAc,SAAS;AACpD,oCACC,OAAO,kBAAkB,SAAS;AAAA,QACpC,WAAW,OAAO,SAAS,gBAAgB;AAC1C,gBAAMC,eAAc,OAAO,cAAc,SAAS;AAElD,gBAAM,sBAAsB,MAAM,KAAK,eAAe,OAAO,CAAC,EAAE;AAAA,YAC/D,CAACC,OAAMA,GAAE,SAAS,wBAAwBA,GAAE,SAAS,OAAO;AAAA,UAC7D;AACA,gBAAM,8BAA8B,MAAM;AAAA,YACzC,oBAAoB,OAAO;AAAA,UAC5B,EAAE;AAAA,YACD,CAACA,OAAMA,GAAE,SAAS,wBAAwBA,GAAE,SAAS,SAAS;AAAA,UAC/D;AACA,cACC,uBACA,+BACAD,eAAc,GACb;AACD,mCAAuB,OAAO,cAAc,SAAS;AACrD,mCACC,oBAAoB,cACpB,4BAA4B;AAAA,UAC9B;AAAA,QACD;AAAA,MACD,CAAC;AAED,UAAI,cAAc,qBAAqB;AACvC,UAAI,cACH,yBAAyB,sBAAsB;AAChD,UAAI,uBAAuB;AAE3B,UAAI,cAAc,GAAG;AACpB,+BAAuB,KAAK,IAAI,GAAG,cAAc,WAAW;AAAA,MAC7D;AAEA,aAAO;AAAA,IACR,CAAC;AAAA,EACF;AACD;;;AC7FA,IAAAE,iBAAwB;AAVxB,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AASO,SAAS,oBAAoB,OAA2B;AAC9D,QAAM,EAAE,YAAY,IAAI,eAAe;AAEvC,QAAM,CAAC,WAAW,SAAS,IAAI,OAAO,MAAM,GAAG,KAAK,CAAC;AACrD,QAAM,kBAAc;AAAA,IACnB,MACC,aAAa,YACT;AAAA,MACD;AAAA,MACA;AAAA,MACA,UAAU;AAAA,IACX,IACC;AAAA,IACJ,CAAC,WAAW,SAAS;AAAA,EACtB;AAEA,QAAM,eAAe,qBAAqB,WAAW;AACrD,QAAM,mBAAe;AAAA,IACpB,MACC,aAAa;AAAA,MACZ;AAAA,QAAU,CAAC,UACV,QAAQ,YAAY,KAAK,GAAG,KAAK,CAAC,IAAI,GAAG,MAAS;AAAA,MACnD;AAAA,IACD;AAAA,IACD,CAAC,aAAa,YAAY;AAAA,EAC3B;AACA,SAAO,qBAAqB,YAAY;AACzC;;;ACbS,IAAAC,2BAAA;AA9BT,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,mCAAqC,EAAE;AAAA,EAChF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAA8B;AAC9B,cAAY,IAAI,eAAe;AACjC;AAKO,IAAM,YAAY,CAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,EAAAA,KAAG;AACH,QAAM,aAAa,cAAc,UAAU;AAC3C,SAAO,qDAAC,UAAK,WAAW,GAAG,SAAS,SAAS,qBAAqB,mBAAmB,0CAA0C,SAAS,GAAG,OAAO;AAAA,IAChJ,aAAa,KAAK,IAAI,GAAG,aAAa,CAAC;AAAA,EACzC,GAAG,eAAW,MACZ,YAHK;AAAA;AAAA;AAAA;AAAA,GAIP;AACF;AACAA,KAAG,WAAW,gCAAgC,OAAO,WAAY;AAC/D,SAAO,CAAC,aAAa;AACvB,CAAC;AACDC,OAAK;AACL,IAAIA;AACJ,aAAaA,MAAI,WAAW;AAE5B,OAAO,eAAe;AACtB,OAAO,eAAe;;;ACxBtB,IAAAC,iBAAyB;AAerB,IAAAC,2BAAA;AAnCJ,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,6CAA+C,EAAE;AAAA,EAC1F;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAwC;AACxC,cAAY,IAAI,eAAe;AACjC;AAOO,SAAS,qBAAqB,YAAY;AAC/C,MAAI,aAAa,KAAM,QAAO;AAC9B,MAAI,aAAa,KAAM,QAAO;AAC9B,MAAI,aAAa,KAAM,QAAO;AAC9B,SAAO;AACT;AACO,SAAS,oBAAoB,OAAO;AACzC,EAAAA,KAAG;AACH,QAAM,CAAC,MAAM,OAAO,QAAI,yBAAS,KAAK;AACtC,SAAO,qDAAC,WAAQ,MAAY,cAAc,SAAS,SAAS,iBAAiB,MAAM,OAAO,IACzF,+DAAC,YAAO,SAAS,MAAM,QAAQ,CAAC,IAAI,GACnC,+DAAC,QAAK,WAAW,GAAG,MAAM,YAAY,aAAa,kBAAkB,MAAM,YAAY,eAAe,kBAAkB,MAAM,YAAY,eAAe,mBAAmB,MAAM,YAAY,SAAS,cAAc,GAAG,MAAM,MAAM,YAAY,SAAS,MAAM,YAAY,cAAc,oBAAoB,gBAA7S;AAAA;AAAA;AAAA;AAAA,SAA2T,KAD5T;AAAA;AAAA;AAAA;AAAA,SAEA,KAHM;AAAA;AAAA;AAAA;AAAA,SAIP;AACF;AACAA,KAAG,qBAAqB,8BAA8B;AACtDC,OAAK;AACL,IAAIA;AACJ,aAAaA,MAAI,qBAAqB;AAEtC,OAAO,eAAe;AACtB,OAAO,eAAe;;;ACzBtB,IAAAC,iBAAoC;AAsB3B,IAAAC,2BAAA;AA1CT,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,mCAAqC,EAAE;AAAA,EAChF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAA8B;AAC9B,cAAY,IAAI,eAAe;AACjC;AAKO,IAAM,YAAY,CAAC;AAAA,EACxB,UAAU;AAAA,EACV;AAAA,EACA;AACF,MAAM;AACJ,EAAAA,KAAG;AACH,QAAM,CAAC,UAAU,WAAW,QAAI,yBAAS,CAAC;AAC1C,QAAM,CAAC,SAAS,UAAU,QAAI,yBAAS,KAAK;AAC5C,gCAAU,MAAM;AACd,QAAI,UAAU;AACd,QAAI,SAAS;AACX,YAAM,IAAI,WAAW,MAAM;AACzB,YAAI,QAAS,YAAW,KAAK;AAAA,MAC/B,GAAG,OAAO;AACV,aAAO,MAAM;AACX,qBAAa,CAAC;AAAA,MAChB;AAAA,IACF;AAAA,EAEF,GAAG,CAAC,SAAS,SAAS,QAAQ,CAAC;AAC/B,SAAO;AAAA,IAAC;AAAA;AAAA,MAAI,WAAW,GAAG,cAAc,CAAC,WAAW,YAAY,SAAS;AAAA,MAEzE,gBAAgB,MAAM;AACpB,mBAAW,KAAK;AAAA,MAClB;AAAA,MAAG,eAAe,MAAM;AACtB,mBAAW,IAAI;AACf,oBAAY,KAAK,IAAI,CAAC;AAAA,MACxB;AAAA,MACE;AAAA;AAAA,IARK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASP;AACF;AACAA,KAAG,WAAW,8BAA8B;AAC5CC,OAAK;AACL,IAAIA;AACJ,aAAaA,MAAI,WAAW;AAE5B,OAAO,eAAe;AACtB,OAAO,eAAe;;;ATiDZ,IAAAC,2BAAA;AA5GV,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,qCAAuC,EAAE;AAAA,EAClF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAAtB,IACEC,OAAM,aAAa;AAErB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAgC;AAChC,cAAY,IAAI,eAAe;AACjC;AA6BA,SAAS,OAAO,OAAO;AACrB,EAAAD,KAAG;AACH,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,eAAe;AACnB,QAAM,oBAAgB,wBAAQ,MAAM,cAAc,CAAC,YAAY,iBAAiB,YAAY,gBAAgB,KAAK,UAAU,oBAAkB,UAAU,gBAAgB,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,CAAC,EAAE,MAAM,GAAG,gBAAgB,CAAC,CAAC,GAAG,CAAC,YAAY,eAAe,CAAC;AAC5P,QAAM,eAAe,qBAAqB,eAAe,CAAC,CAAC;AAC3D,MAAI,CAAC,MAAO,QAAO;AACnB,SAAO,aAAa,KAAK,OAAK,EAAE,OAAO,UAAU,SAAS,EAAE,SAAS,UAAU,KAAK,GAAG;AACzF;AACAA,KAAG,QAAQ,gCAAgC,OAAO,WAAY;AAC5D,SAAO,CAAC,gBAAgB,oBAAoB;AAC9C,CAAC;AACM,IAAM,cAAcC,SAAI,2BAAWC,OAAKD,KAAI,CAAC;AAAA,EAClD;AACF,GAAG,QAAQ;AACT,EAAAA,KAAI;AACJ,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,gBAAgB,KAAK,IAAI;AAC7B,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,MAAM;AAAA,MACJ,UAAAE;AAAA,IACF;AAAA,EACF,IAAI,eAAe;AACnB,QAAM,iBAAiB,qBAAqB,YAAY,eAAe;AACvE,QAAM,KAAK,KAAK;AAChB,QAAM,SAASA,aAAY,GAAG,WAAWA,UAAS,EAAE;AACpD,QAAM,gBAAgB,GAAG,SAAS,iBAAiB;AACnD,QAAM,OAAO,KAAK,OAAO;AACzB,QAAM,eAAe,oBAAoB,OAAO,KAAK,OAAO,QAAQ,MAAS;AAC7E,QAAM,aAAa,cAAc,KAAK,OAAO,OAAO,eAAe,MAAS,KAAK,KAAK;AACtF,QAAM,mBAAmB,oBAAoB,gBAAgB,SAAY,KAAK,OAAO,KAAK;AAC1F,QAAM,mBAAmB,oBAAoB,iBAAiB,CAAC,UAAU,CAAC,gBAAgB,KAAK,OAAO,QAAQ,MAAS;AACvH,QAAM,aAAa,SAAS,UAAU,mBAAmB;AACzD,QAAM,aAAa,UAAU,CAAC,gBAAgB,UAAU,mBAAmB;AAC3E,4BAA0B,KAAK,OAAO,OAAO,KAAK,sBAAsB,CAAC,CAAC,KAAK,OAAO,OAAO,YAAY,KAAK,IAAI;AAClH,4BAA0B,KAAK,OAAO,OAAO,KAAK,sBAAsB,CAAC,CAAC,KAAK,OAAO,OAAO,YAAY,KAAK,IAAI;AAClH,QAAM,SAAS,cAAc,SAAS,EAAE;AACxC,gCAAU,MAAM;AACd,QAAI,eAAe;AACjB,uBAAiB,SAAO,CAAC,GAAG,KAAK,EAAE,CAAC;AAAA,IACtC;AAAA,EACF,GAAG,CAAC,IAAI,eAAe,gBAAgB,CAAC;AACxC,QAAM,kBAAc,wBAAQ,MAAM,eAAe,YAAY,iBAAiB,GAAG,CAAC,YAAY,UAAU,EAAE,OAAO,aAAa,CAAC,CAAC,EAAE,KAAK,KAAK,GAAI,CAAC,GAAG,CAAC,YAAY,YAAY,iBAAiB,UAAU,CAAC;AACzM,QAAM,aAAa,qBAAqB,aAAa,CAAC;AACtD,QAAM,WAAW,OAAO,UAAU;AAClC,QAAM,WAAW,OAAO,UAAU;AAClC,SAAO,qDAAC,SAAI,WAAU,oFAAmF,KACxG,+DAACC,IAAA,EAAQ,QAAQ,KAAK,QACrB,+DAAC,SAAI,WAAW,GAAG,sEAAsE,qDAAqD,GAC5I;AAAA,KAAC,iBAAiB,qDAAC,SAAI,WAAW,GAAG,wDAAwD,GAC5F,+DAAC,SAAI,WAAU,sFACb,gBAAM,WAAW,qDAAC,SACjB;AAAA,2DAAC,aAAU,WAAU,+CAA8C,YAAwB,MAAK,SAAhG;AAAA;AAAA;AAAA;AAAA,OAAsG;AAAA,MACtG,qDAAC,SAAI,WAAU,gBAAe,KAAK,yBAAyB,KAAK,QAAQ,IAAI,KAAK,KAAK,eAAvF;AAAA;AAAA;AAAA;AAAA,OAAoG;AAAA,SAFpF;AAAA;AAAA;AAAA;AAAA,KAGjB,IAAS,qDAAC,UAAK,WAAU,qFACvB;AAAA,oBAAc,qDAAC,aAAU,MAAK,QAAO,WAAU,sBAAqB,YAClE,eAAK,KAAK,OAAO,CAAC,KADN;AAAA;AAAA;AAAA;AAAA,OAEd;AAAA,MACA,KAAK,KAAK,OAAO,CAAC;AAAA,SAJX;AAAA;AAAA;AAAA;AAAA,KAKT,KATF;AAAA;AAAA;AAAA;AAAA,KAUA,KAXiB;AAAA;AAAA;AAAA;AAAA,KAYlB;AAAA,IACD,qDAAC,kBAAe,WAAW,GAAG,8EAA8E,UAAU,CAAC,iBAAiB,gBAAgB;AAAA,MACnJ,eAAe,gBAAgB,KAAK,OAAO,qBAAqB,KAAK,OAAO,iBAAiB,CAAC,iBAAiB;AAAA,IACjH,GAAG,UAAU,iBAAiB,YAAY,GAAG,cAFhD;AAAA;AAAA;AAAA;AAAA,KAEwE;AAAA,IACvE,CAAC,iBAAiB,qDAAC,aAAU,WAAU,0DACtC,+DAAC,SAAI,WAAU,yCAab,WAAC,iBAAiB,qDAAC,kBAAe,aAAY,SAAQ,kBAAiB,SAAQ,QAA7D;AAAA;AAAA;AAAA;AAAA,KAAyE,KAb7F;AAAA;AAAA;AAAA;AAAA,KAcA,KAfiB;AAAA;AAAA;AAAA;AAAA,KAgBlB;AAAA,IACA,cAAc,CAAC,iBAAiB,qDAAC,SAAI,WAAU,yBAC7C;AAAA,WAAK,OAAO,gBAAgB,KAAK,OAAO,gBAAgB,cAAc,qDAAC,kBAAe,cAAhB;AAAA;AAAA;AAAA;AAAA,OAAwC;AAAA,MAE9G,CAAC,KAAK,OAAO,gBAAgB,CAAC,KAAK,OAAO,oBAAoB,qDAAC,WAAQ,SAAQ,qBAC9E,+DAAC,SAAI,WAAU,qBACd;AAAA,6DAAC,QAAK,MAAK,YAAX;AAAA;AAAA;AAAA;AAAA,SAAoB;AAAA,QACpB,qDAAC,kBAAe,4BAAhB;AAAA;AAAA;AAAA;AAAA,SAA4B;AAAA,WAF7B;AAAA;AAAA;AAAA;AAAA,OAGA,KAJ6D;AAAA;AAAA;AAAA;AAAA,OAK9D;AAAA,MACA,KAAK,OAAO,oBAAoB,qDAAC,WAAQ,SAAQ,2CAChD,+DAAC,SAAI,WAAU,qBACd;AAAA,6DAAC,QAAK,MAAK,UAAS,WAAU,kBAA9B;AAAA;AAAA;AAAA;AAAA,SAA6C;AAAA,QAC7C,qDAAC,kBAAe,4BAAhB;AAAA;AAAA;AAAA;AAAA,SAA4B;AAAA,WAF7B;AAAA;AAAA;AAAA;AAAA,OAGA,KAJ+B;AAAA;AAAA;AAAA;AAAA,OAKhC;AAAA,SAd8B;AAAA;AAAA;AAAA;AAAA,KAehC;AAAA,IACA,MAAM,eAAe,KAAK,wBAAwB,qDAAC,SAAI,WAAU,oEAChE;AAAA,2DAAC,uBAAoB,SAAS,qBAAqB,UAAU,KAA7D;AAAA;AAAA;AAAA;AAAA,OAAgE;AAAA,MAChE,qDAAC,gBAAa,WAAU,gBAAe,MAAM,kBAAkB,KAAK,sBAAsB,SAAS,GAAG,QAAO,UAAS,KAAI,uBACxH;AAAA,aAAK;AAAA,QACL,iBAAiB,kBAAkB,qDAAC,UAAK,WAAU,cACjD;AAAA;AAAA,UACA,CAAC,YAAY,cAAc,QAAQ,IAAI,YAAY,cAAc,QAAQ,EAAE,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG;AAAA,aAFpE;AAAA;AAAA;AAAA;AAAA,SAGnC;AAAA,WALF;AAAA;AAAA;AAAA;AAAA,OAMA;AAAA,SARiD;AAAA;AAAA;AAAA;AAAA,KASlD;AAAA,IACD,qDAAC,SAAI,WAAU,yCACb,eAAK,cAAc,CAAC,iBAAiB,qDAAC,WAAQ,SAAQ,kBACrD,+DAAC,SAAI,WAAU,YACd,+DAAC,SAAI,WAAU,YACd;AAAA,2DAAC,QAAK,WAAU,qBAAoB,MAAK,gBAAzC;AAAA;AAAA;AAAA;AAAA,OAAsD;AAAA,MACtD,qDAAC,QAAK,WAAU,sDAAqD,MAAK,gBAA1E;AAAA;AAAA;AAAA;AAAA,OAAuF;AAAA,MACvF,qDAAC,kBAAe,8BAAhB;AAAA;AAAA;AAAA;AAAA,OAA8B;AAAA,SAH/B;AAAA;AAAA;AAAA;AAAA,KAIA,KALD;AAAA;AAAA;AAAA;AAAA,KAMA,KAPoC;AAAA;AAAA;AAAA;AAAA,KAQrC,KATF;AAAA;AAAA;AAAA;AAAA,KAUA;AAAA,KACE,cAAc,KAAK,eAAe,CAAC,iBAAiB,qDAAC,SAAI,WAAW,GAAG,iFAAiF,CAAC,UAAU,YAAY,KAA3H;AAAA;AAAA;AAAA;AAAA,KAA8H;AAAA,OAvErL;AAAA;AAAA;AAAA;AAAA,GAwEA,KAzED;AAAA;AAAA;AAAA;AAAA,GA0EA,KA3EM;AAAA;AAAA;AAAA;AAAA,GA4EP;AACF,GAAG,gCAAgC,OAAO,WAAY;AACpD,SAAO,CAAC,iBAAiB,gBAAgB,sBAAsB,qBAAqB,eAAe,qBAAqB,qBAAqB,2BAA2B,2BAA2B,sBAAsB,QAAQ,MAAM;AACzO,CAAC,CAAC,GAAG,gCAAgC,OAAO,WAAY;AACtD,SAAO,CAAC,iBAAiB,gBAAgB,sBAAsB,qBAAqB,eAAe,qBAAqB,qBAAqB,2BAA2B,2BAA2B,sBAAsB,QAAQ,MAAM;AACzO,CAAC;AACDC,OAAM;AACN,YAAY,cAAc;AAC1B,IAAIH;AAAJ,IAAQG;AACR,aAAaH,MAAI,wBAAwB;AACzC,aAAaG,MAAK,aAAa;AAE/B,OAAO,eAAe;AACtB,OAAO,eAAe;;;AxB7IY,IAAAC,2BAAA;AAlDlC,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,2CAA6C,EAAE;AAAA,EACxF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAsC;AACtC,cAAY,IAAI,eAAe;AACjC;AAQO,SAAS,kBAAkB,OAAO;AACvC,EAAAA,KAAG;AACH,QAAM,CAAC,cAAc;AAAA,IACnB,OAAO;AAAA,IACP,QAAQ;AAAA,EACV,CAAC,QAAI,kBAAAC,SAAW;AAChB,QAAM,CAAC,mBAAmB;AAAA,IACxB,OAAO;AAAA,EACT,CAAC,QAAI,kBAAAA,SAAW;AAChB,QAAM,yBAAqB,wBAAQ,MAAM,MAAM,gBAAgB;AAAA,IAC7D,OAAO,MAAM,MAAM;AAAA,IACnB,QAAQ;AAAA,IACR,OAAO;AAAA,EACT,CAAC,EAAE,OAAO,KAAK,CAAC,iBAAiB,gBAAgB,MAAM,MAAM,MAAM,CAAC;AACpE,QAAM,SAAK,sBAAM;AACjB,MAAI,MAAM,MAAM,WAAW,GAAG;AAC5B,WAAO;AAAA,EACT;AACA,SAAO,qDAACC,IAAA,EAAQ,SAAS,KAAK,MAAM,MAAM,QACzC,+DAAC,SAAI,WAAU,oFAAmF,OAAO;AAAA;AAAA,IAEtG,0BAA0B;AAAA;AAAA,IAE1B,2BAA2B,sBAAsB;AAAA,EACnD,GAAG,KAAK,cACP,gBAAM,MAAM,IAAI,CAAC,MAAMC,OAAM,qDAAC,eAA0B,MAAY,KAAKA,OAAM,IAAI,oBAAoB,UAAxD,KAAK,IAAvB;AAAA;AAAA;AAAA;AAAA,SAAqF,CAAE,KANtH;AAAA;AAAA;AAAA;AAAA,SAOA,KARM;AAAA;AAAA;AAAA;AAAA,SASP;AACF;AACAH,KAAG,mBAAmB,gCAAgC,OAAO,WAAY;AACvE,SAAO,CAAC,kBAAAC,SAAY,kBAAAA,SAAY,oBAAK;AACvC,CAAC;AACDG,OAAK;AACL,IAAIA;AACJ,aAAaA,MAAI,mBAAmB;AAEpC,OAAO,eAAe;AACtB,OAAO,eAAe;;;AkC/BnB,IAAAC,2BAAA;AA/BH,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,yCAA2C,EAAE;AAAA,EACtF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAON,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAoC;AACpC,cAAY,IAAI,eAAe;AACjC;AAOO,IAAM,kBAAkB,CAAC;AAAA,EAC9B;AAAA,EACA;AACF,MAAM,qDAAC,WAAQ,SAAS,aAAa,eAAe,cAClD,+DAAC,UAAO,aAAa,aAAa,YAAY,aAAa,SAAS,QAAM;AACxE,aAAW,QAAQ;AACnB,MAAI,CAAC,WAAY,WAAU,WAAW;AACxC,GACC,+DAAC,QAAK,MAAK,gBAAX;AAAA;AAAA;AAAA;AAAA,CAAwB,KAJzB;AAAA;AAAA;AAAA;AAAA,CAKA,KANI;AAAA;AAAA;AAAA;AAAA,CAOL;AACDC,OAAK;AACL,IAAIA;AACJ,aAAaA,MAAI,iBAAiB;AAElC,OAAO,eAAe;AACtB,OAAO,eAAe;;;AClBtB,IAAAC,iBAAoC;AA+BhC,IAAAC,2BAAA;AApDJ,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,2CAA6C,EAAE;AAAA,EACxF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAsC;AACtC,cAAY,IAAI,eAAe;AACjC;AASO,IAAM,oBAAoB,MAAM;AACrC,EAAAA,KAAG;AACH,QAAM;AAAA,IACJ,WAAW;AAAA,MACT;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,IACA,MAAM;AAAA,MACJ;AAAA,IACF;AAAA,EACF,IAAI,eAAe;AACnB,QAAM,qBAAqB,WAAW,KAAK,CAAAC,OAAKA,GAAE,OAAO,WAAW;AACpE,QAAM,UAAU,0BAA0B;AAC1C,QAAM,CAAC,gBAAgB,iBAAiB,QAAI,yBAAS,IAAI;AAMzD,gCAAU,MAAM;AACd,sBAAkB,OAAO,UAAU,iBAAiB,eAAe,UAAU,aAAa,oBAAoB,MAAS;AAAA,EACzH,GAAG,CAAC,CAAC;AACL,MAAI,CAAC,eAAgB,QAAO;AAC5B,SAAO,qDAAC,WAAQ,SAAS,qBAAqB,4BAA4B,UAAU,iBAAiB,gBACpG,+DAAC,UAAO,aAAa,UAAU,WAAW,aAAa,UAAU,oBAAoB,SAAS,UAAU,iBAAiB,kBACxH;AAAA,yDAAC,kBAAe,4BAAhB;AAAA;AAAA;AAAA;AAAA,KAA4B;AAAA,IAC5B,qDAAC,QAAK,MAAK,iBAAX;AAAA;AAAA;AAAA;AAAA,KAAyB;AAAA,OAF1B;AAAA;AAAA;AAAA;AAAA,GAGA,KAJM;AAAA;AAAA;AAAA;AAAA,GAKP;AACF;AACAD,KAAG,mBAAmB,gCAAgC,OAAO,WAAY;AACvE,SAAO,CAAC,cAAc;AACxB,CAAC;AACDE,OAAK;AACL,IAAIA;AACJ,aAAaA,MAAI,mBAAmB;AAEpC,OAAO,eAAe;AACtB,OAAO,eAAe;;;ACvDtB,IAAAC,iBAA0B;AAT1B,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAuBe,SAAR,mBAAoC;AAAA,EAC1C;AAAA,EACA,UAAAC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD,GAAW;AACV,QAAM;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD,IAAI;AACJ,QAAM,EAAE,OAAO,OAAO,YAAY,IAAI;AACtC,QAAM,EAAE,UAAU,IAAI,qBAAqB,YAAY,QAAQ,KAAK,CAAC;AACrE,QAAM,mBAAmB,2BAA2B;AAEpD,QAAM,KAAKA,WAAU;AACrB,QAAM,OAAOA,WAAU;AACvB,gCAAU,MAAM;AACf,QAAI,MAAM,MAAM;AAmBf,UAASC,kBAAT,WAA0B;AACzB,kBAAU;AAAA,UACT,KAAK,UAAU;AAAA,YACd,MAAM;AAAA,YACN;AAAA,UACD,CAAyB;AAAA,QAC1B;AAAA,MACD;AAPS,2BAAAA;AAlBT,YAAM,OAAa;AAAA,QAClB;AAAA,QACA;AAAA,QACA,QAAQ;AAAA,QACR;AAAA,QACA;AAAA,QACA,sBAAsB;AAAA,QACtB,QAAQ;AAAA,UACP;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD;AAAA,MACD;AAYA,MAAAA,gBAAe;AAGf,gBAAU,iBAAiB,QAAQA,eAAc;AAEjD,aAAO,MAAM,UAAU,oBAAoB,QAAQA,eAAc;AAAA,IAClE;AAAA,EACD,GAAG;AAAA,IACF;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD,CAAC;AAED,qBAAW,MAAM;AAChB,QAAI,MAAM,MAAM;AACf,gBAAU;AAAA,QACT,KAAK,UAAU;AAAA,UACd,MAAM;AAAA,UACN,MAAM;AAAA,YACL;AAAA,YACA;AAAA,YACA,QAAQ;AAAA,YACR;AAAA,YACA;AAAA,YACA,sBAAsB;AAAA,YACtB,QAAQ;AAAA,cACP;AAAA,YACD;AAAA,UACD;AAAA,QACD,CAAyB;AAAA,MAC1B;AAAA,IACD;AAAA,EACD,CAAC;AACF;;;ACnHA,IAAAC,iBAA0B;AAT1B,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAMO,SAAS,2BAA2B;AAC1C,QAAM,EAAE,eAAe,iBAAiB,IAAI,eAAe;AAE3D,gCAAU,MAAM;AACf,UAAM,UAAU,CAACC,OAAqB;AACrC,UAAIA,GAAE,IAAI,YAAY,MAAM,OAAOA,GAAE,SAAS;AAC7C,QAAAA,GAAE,eAAe;AACjB,yBAAiB,CAAC,aAAa;AAAA,MAChC;AAAA,IACD;AACA,aAAS,iBAAiB,YAAY,OAAO;AAE7C,WAAO,MAAM;AACZ,eAAS,oBAAoB,YAAY,OAAO;AAAA,IACjD;AAAA,EACD,GAAG,CAAC,kBAAkB,aAAa,CAAC;AACrC;;;ACnBA,IAAAC,iBAA0B;AAT1B,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAQe,SAAR,UAA2B,OAAe;AAChD,QAAM,oBAAoB,YAAY,MAAM,MAAM;AAElD,gCAAU,MAAM;AACf,QACC,MAAM,SAAS,KACf,sBAAsB,UACtB,sBAAsB,MAAM;AAE5B;AACD,QAAI,MAAM,SAAS,mBAAmB;AACrC,gBAAU,MAAM;AAAA,IACjB,OAAO;AACN,gBAAU,OAAO;AAAA,IAClB;AAAA,EACD,GAAG,CAAC,mBAAmB,MAAM,MAAM,CAAC;AAEpC,QAAM,kBAAkB,MAAM,OAAO,CAACC,OAAMA,GAAE,UAAU,EAAE;AAC1D,QAAM,0BAA0B,YAAY,eAAe;AAE3D,gCAAU,MAAM;AACf,QACC,4BAA4B,UAC5B,oBAAoB,yBACnB;AACD;AAAA,IACD;AACA,QAAI,kBAAkB,yBAAyB;AAC9C,gBAAU,WAAW;AAAA,IACtB;AAAA,EACD,GAAG,CAAC,iBAAiB,uBAAuB,CAAC;AAE7C,mBAAS,MAAM;AACd,cAAU,MAAM;AAAA,EACjB,CAAC;AAED,qBAAW,MAAM;AAChB,cAAU,OAAO;AAAA,EAClB,CAAC;AACF;;;AChCA,IAAAC,iBAAoC;AAgBhC,IAAAC,2BAAA;AAtCJ,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,2CAA6C,EAAE;AAAA,EACxF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAAtB,IACEC,OAAM,aAAa;AAErB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAsC;AACtC,cAAY,IAAI,eAAe;AACjC;AAUA,SAAS,sBAAsB,OAAO;AACpC,EAAAD,KAAG;AACH,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,eAAe;AACnB,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,gBAAgB,MAAM,KAAK,IAAI;AACnC,SAAO,qDAAC,SAAI,WAAU,kDACrB;AAAA,yDAAC,cAAM,OAAN,EACA;AAAA,2DAAC,gBAAa,MAAM,MAAM,KAAK,uBAAuB,kBAAkB,MAAM,KAAK,sBAAsB,SAAS,IAAI,QAAW,QAAO,UAAS,KAAI,uBACnJ,gBAAM,eADR;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,MAAgB;AAAA,MACf,MAAM;AAAA,SAJR;AAAA;AAAA;AAAA;AAAA,WAKA;AAAA,IACA,qDAAC,cAAM,OAAN,EAAY,WAAU,kGACtB;AAAA,2DAAC,UAAK,eAAW,MAAC,oBAAlB;AAAA;AAAA;AAAA;AAAA,aAAmB;AAAA,MACnB,qDAAC,kBAAe,uBAAhB;AAAA;AAAA;AAAA;AAAA,aAAuB;AAAA,SAFxB;AAAA;AAAA;AAAA;AAAA,WAGA;AAAA,OAVM;AAAA;AAAA;AAAA;AAAA,SAWP;AACF;AACAA,KAAG,uBAAuB,gCAAgC,OAAO,WAAY;AAC3E,SAAO,CAAC,gBAAgB,eAAe;AACzC,CAAC;AACDE,OAAK;AACE,SAAS,uBAAuB,OAAO;AAC5C,EAAAD,KAAI;AACJ,QAAM,CAAC,cAAc,eAAe,QAAI,yBAAS,KAAK;AACtD,QAAM,gBAAgB,iBAAiB;AACvC,gCAAU,MAAM;AACd,UAAM,WAAW,MAAM,OAAO,CAAAE,OAAK,CAAC,aAAa,KAAK,QAAM,GAAG,OAAOA,GAAE,EAAE,CAAC;AAC3E,UAAM,YAAY,aAAa,OAAO,CAAAA,OAAK,CAAC,MAAM,KAAK,QAAM,GAAG,OAAOA,GAAE,EAAE,CAAC;AAC5E,aAAS,QAAQ,CAAAA,OAAK,cAAc,qDAAC,yBAAsB,MAAMA,IAAG,MAAK,YAArC;AAAA;AAAA;AAAA;AAAA,WAA8C,CAAE,CAAC;AACrF,cAAU,QAAQ,CAAAA,OAAK,cAAc,qDAAC,yBAAsB,MAAMA,IAAG,MAAK,UAArC;AAAA;AAAA;AAAA;AAAA,WAA4C,CAAE,CAAC;AAAA,EACtF,GAAG,CAAC,eAAe,cAAc,KAAK,CAAC;AACvC,gCAAU,MAAM;AACd,oBAAgB,KAAK;AAAA,EACvB,GAAG,CAAC,KAAK,CAAC;AACZ;AACAF,KAAI,wBAAwB,gCAAgC,OAAO,WAAY;AAC7E,SAAO,CAAC,gBAAgB;AAC1B,CAAC;AACD,IAAIC;AACJ,aAAaA,MAAI,uBAAuB;AAExC,OAAO,eAAe;AACtB,OAAO,eAAe;;;AtE5BtB,yBAAwB;AAkCrB,IAAAE,2BAAA;AAhFH,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,0CAA4C,EAAE;AAAA,EACvF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAIC,OAAK,aAAa;AAAtB,IACEC,QAAM,aAAa;AAErB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAqC;AACrC,cAAY,IAAI,eAAe;AACjC;AA2Ce,SAAR,OAAwB;AAC7B,EAAAC,KAAG;AACH,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,eAAe;AACnB,QAAM,WAAW,YAAY;AAC7B,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,UAAU;AACd,QAAM;AAAA,IACJ,MAAAC;AAAA,IACA;AAAA,EACF,IAAI,cAAc;AAClB,QAAM,CAAC,MAAM,IAAI,gBAAgB;AACjC,gCAAU,MAAM;AACd,QAAI,CAAC,UAAUA,UAAS,cAAe,UAAS,IAAI,QAAQ,GAAG,OAAO,OAAO,IAAI,MAAM,OAAO,SAAS,IAAI,EAAE,EAAE;AAAA,EACjH,GAAG,CAAC,QAAQA,OAAM,UAAU,UAAU,MAAM,CAAC;AAC7C,MAAI,CAAC,UAAUA,UAAS,cAAe,QAAO;AAC9C,SAAO,qDAAC,cAAM,UAAN,EACP,+DAAC,cAAW,qBAAZ;AAAA;AAAA;AAAA;AAAA,SAAkD,KAD5C;AAAA;AAAA;AAAA;AAAA,SAEP;AACF;AACAD,KAAG,MAAM,gCAAgC,OAAO,WAAY;AAC1D,SAAO,CAAC,gBAAgB,aAAa,WAAW,eAAe,eAAe;AAChF,CAAC;AACDE,OAAK;AACL,SAAS,WAAW;AAAA,EAClB;AACF,GAAG;AACD,EAAAC,MAAI;AACJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,EACF,IAAI,cAAc;AAClB,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,MAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA,UAAAC;AAAA,MACA,WAAW;AAAA,QACT;AAAA,MACF;AAAA,IACF;AAAA,EACF,IAAI,eAAe;AACnB,2BAAyB;AACzB,QAAM,CAAC,YAAY,aAAa,QAAI,yBAAS,KAAK;AAClD,QAAM,WAAW,cAAc,UAAU,gBAAgB;AACzD,mBAAS,MAAM;AACb,QAAI,WAAW,SAAS,GAAG;AACzB,gBAAU,WAAW;AAAA,IACvB;AAAA,EACF,CAAC;AACD,qBAAmB;AAAA,IACjB;AAAA,IACA;AAAA,IACA;AAAA,IACA,UAAAA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AACD,YAAU,UAAU;AACpB,yBAAuB,UAAU;AACjC,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,sBAAc;AAClB,QAAM,kBAAkB,WAAW,KAAK,CAAAC,OAAKA,GAAE,OAAO,WAAW,KAAK,QAAQD,WAAU,OAAO,WAAW;AAC1G,QAAM,aAAa,QAAQ,MAAM,IAAI,kBAAkB,IAAI;AAC3D,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,EACF,IAAI,gBAAgB,YAAY,YAAYA,SAAQ;AACpD,gCAAU,MAAM;AACd,eAAW,QAAQ,CAAAC,OAAK;AACtB,UAAIA,GAAE,YAAYA,GAAE,WAAY,gBAAeA,EAAC;AAAA,IAClD,CAAC;AAAA,EACH,GAAG,CAAC,YAAY,cAAc,CAAC;AAC/B,QAAM,eAAe,cAAc,OAAO,CAAAA,OAAK,cAAc,SAASA,GAAE,EAAE,CAAC;AAC3E,QAAM,iBAAiB,cAAc,OAAO,CAAAA,OAAK,CAAC,cAAc,SAASA,GAAE,EAAE,CAAC;AAC9E,SAAO,qDAAC,mBAAgB,aAAa,WAAW,IAAI,CAAAA,OAAKA,GAAE,OAAO,KAAK,EAAE,OAAO,aAAa,GAC5F;AAAA,yDAAC,SAAI,WAAU,kDACd;AAAA,2DAAC,SAAI,WAAU,uCACd;AAAA,6DAAC,SAAI,WAAU,iEAAgE,OAAO;AAAA,UACjF,SAAS;AAAA,QACX,GACD;AAAA,uBAAa,SAAS,KAAK,qDAAC,SAAI,WAAU,0CACzC,+DAAC,qBAAkB,OAAO,aAAa,OAAO,aAAa,KAA3D;AAAA;AAAA;AAAA;AAAA,iBAA8D,KADpC;AAAA;AAAA;AAAA;AAAA,iBAE3B;AAAA,UACD,qDAAC,SAAI,WAAU,sCACd,+DAAC,qBAAkB,OAAO,eAAe,OAAO,aAAa,KAA7D;AAAA;AAAA;AAAA;AAAA,iBAAgE,KADjE;AAAA;AAAA;AAAA;AAAA,iBAEA;AAAA,aARD;AAAA;AAAA;AAAA;AAAA,eASA;AAAA,QACA,qDAAC,cAAM,UAAN,EAAe,WAAU,+BAA1B;AAAA;AAAA;AAAA;AAAA,eAAsD;AAAA,WAXvD;AAAA;AAAA;AAAA;AAAA,aAYA;AAAA,MACA,qDAAC,SAAI,WAAU,6FACb;AAAA,4BAAoB,qDAAC,YAAS,kBAAV;AAAA;AAAA;AAAA;AAAA,eAA0C;AAAA,QAC/D,qDAAC,aAAU,4BAA0B,QAArC;AAAA;AAAA;AAAA;AAAA,eAAsC;AAAA,QACtC,qDAAC,kBAAD;AAAA;AAAA;AAAA;AAAA,eAAc;AAAA,QACd,qDAAC,uBAAD;AAAA;AAAA;AAAA;AAAA,eAAmB;AAAA,QACnB,qDAAC,mBAAgB,YAAwB,SAAS,MAAM,cAAc,CAAC,UAAU,KAAjF;AAAA;AAAA;AAAA;AAAA,eAAoF;AAAA,QACpF,qDAAC,sBAAmB,UAAUD,WAAU,YAAwB,WAAU,qBAA1E;AAAA;AAAA;AAAA;AAAA,eAA4F;AAAA,QAC5F,qDAAC,gBAAa,qBAAd;AAAA;AAAA;AAAA;AAAA,eAAoD;AAAA,QACpD,qDAAC,mBAAgB,wBAAwB,OAAO,aAAhD;AAAA;AAAA;AAAA;AAAA,eAAsE;AAAA,QACrE,iBAAiB,aAAa,qDAAC,cAAW,cAAc,WAAW,0BAArC;AAAA;AAAA;AAAA;AAAA,eAA+C;AAAA,WAT/E;AAAA;AAAA;AAAA;AAAA,aAUA;AAAA,SAxBD;AAAA;AAAA;AAAA;AAAA,WAyBA;AAAA,IACA,qDAAC,iCAAD;AAAA;AAAA;AAAA;AAAA,WAA6B;AAAA,IAC7B,qDAAC,0BAAD;AAAA;AAAA;AAAA;AAAA,WAAsB;AAAA,OA5BhB;AAAA;AAAA;AAAA;AAAA,SA6BP;AACF;AACAD,MAAI,YAAY,gCAAgC,OAAO,WAAY;AACjE,SAAO,CAAC,eAAe,gBAAgB,0BAA0B,eAAe,kBAAU,oBAAoB,WAAW,wBAAwB,uBAAe,eAAe;AACjL,CAAC;AACDG,QAAM;AACN,IAAIJ;AAAJ,IAAQI;AACR,aAAaJ,MAAI,MAAM;AACvB,aAAaI,OAAK,YAAY;AAE9B,OAAO,eAAe;AACtB,OAAO,eAAe;",
  "names": ["useMeasure", "_a", "x", "y", "import_react", "import_react", "a", "e", "import_react", "import_jsx_dev_runtime", "_s", "Portal", "e", "voice", "_c", "import_react", "import_react", "import_react", "import_jsx_dev_runtime", "_s", "_s2", "track", "_c", "_c2", "import_jsx_dev_runtime", "_s", "_s2", "_s3", "_c", "_s", "_c", "import_jsx_dev_runtime", "_s", "_s2", "_c", "u", "Trigger", "_c2", "import_react", "import_react", "x", "w", "m", "r", "import_jsx_dev_runtime", "_s", "_s2", "_c", "import_jsx_dev_runtime", "_s", "_c", "import_jsx_dev_runtime", "_s", "_c", "import_react", "React", "React", "_", "Root", "import_jsx_runtime", "Collection", "useCollection", "createCollectionScope", "Root", "focusFirst", "GROUP_NAME", "ITEM_NAME", "wrapArray", "_", "v", "x", "y", "i", "j", "Anchor", "Portal", "Content", "Label", "Item", "Arrow", "import_jsx_runtime", "Root3", "PORTAL_NAME", "Portal", "CONTENT_NAME", "Content2", "GROUP_NAME", "LABEL_NAME", "Label", "ITEM_NAME", "CHECKBOX_ITEM_NAME", "RADIO_GROUP_NAME", "RADIO_ITEM_NAME", "SEPARATOR_NAME", "ARROW_NAME", "SUB_TRIGGER_NAME", "SUB_CONTENT_NAME", "Root", "Trigger", "Content", "Group", "Item", "CheckboxItem", "RadioGroup", "RadioItem", "ItemIndicator", "Separator", "Arrow", "Sub", "SubTrigger", "SubContent", "import_react", "import_jsx_dev_runtime", "Arrow", "_c", "Arrow2", "_c2", "Content", "_c3", "Content2", "_c4", "Item", "_c5", "Item2", "_c6", "dist_exports", "React", "import_jsx_runtime", "Root", "TRIGGER_NAME", "PORTAL_NAME", "Portal", "CONTENT_NAME", "Content", "Trigger", "Overlay", "Title", "Description", "import_react", "import_jsx_dev_runtime", "Overlay", "_c", "_c2", "Content", "_c3", "Content2", "_c4", "Title", "_c5", "_c6", "Description", "_c7", "Description2", "_c8", "_c9", "dist_exports", "import_jsx_dev_runtime", "_s", "e", "_c", "import_jsx_dev_runtime", "_c", "import_jsx_dev_runtime", "_s", "_s2", "_s3", "_s4", "_c", "_c2", "Trigger", "_c3", "identity", "Portal", "u", "_c4", "import_react", "import_react", "import_jsx_dev_runtime", "_c", "_c2", "import_jsx_dev_runtime", "_s", "Portal", "_c", "identity", "Description", "_c2", "import_jsx_dev_runtime", "_s", "identity", "_c", "import_react", "i", "m", "x", "i", "j", "k", "isNumber", "x", "isFunction", "isObject", "Object", "prototype", "toString", "call", "toArray", "arrayLike", "Array", "slice", "apply", "getDuplicateValsAsStrings", "arr", "obj", "reduce", "acc", "curr", "keys", "filter", "val", "assign", "target", "arguments", "forEach", "arg", "nextKey", "hasOwnProperty", "_onFrame", "tweenProp", "start", "end", "position", "DATA_FLIP_ID", "DATA_INVERSE_FLIP_ID", "DATA_PORTAL_KEY", "DATA_EXIT_CONTAINER", "springPresets", "noWobble", "stiffness", "damping", "gentle", "veryGentle", "wobbly", "stiff", "normalizeSpring", "spring", "indexOf", "window", "requestAnimationFrame", "callback", "setTimeout", "Date", "now", "performanceNow", "performance", "removeFirst", "array", "item", "idx", "splice", "AnimationLooper", "_proto", "run", "_this", "onFrame", "springSystem", "loop", "PhysicsState", "this", "velocity", "ID", "SOLVER_TIMESTEP_SEC", "Spring", "_id", "_springSystem", "listeners", "_startValue", "_currentState", "_displacementFromRestThreshold", "_endValue", "_overshootClampingEnabled", "_previousState", "_restSpeedThreshold", "_tempState", "_timeAccumulator", "_wasAtRest", "_cachedSpringConfig", "getId", "destroy", "deregisterSpring", "setSpringConfig", "springConfig", "_springConfig", "getCurrentValue", "getDisplacementDistanceForState", "state", "Math", "abs", "setEndValue", "endValue", "prevEndValue", "isAtRest", "activateSpring", "i", "len", "length", "onChange", "onSpringEndStateChange", "setVelocity", "setCurrentValue", "currentValue", "listener", "onSpringUpdate", "setAtRest", "setOvershootClampingEnabled", "enabled", "isOvershooting", "tension", "advance", "time", "realDeltaTime", "adjustedDeltaTime", "aVelocity", "aAcceleration", "bVelocity", "bAcceleration", "cVelocity", "cAcceleration", "friction", "tempPosition", "tempVelocity", "_interpolate", "notifyActivate", "notifyAtRest", "notifyPositionUpdated", "_this2", "Boolean", "onSpringActivate", "_onActivateCalled", "onSpringAtRest", "systemShouldAdvance", "wasAtRest", "alpha", "addListener", "newListener", "push", "addOneTimeListener", "key", "func", "removeListener", "listenerToRemove", "SpringSystem", "looper", "_activeSprings", "_idleSpringIndices", "_isIdle", "_lastTimeMillis", "_springRegistry", "createSpring", "createSpringWithConfig", "registerSpring", "getIsIdle", "deltaTime", "pop", "currentTimeMillis", "ellapsedMillis", "onBeforeIntegrate", "onAfterIntegrate", "springId", "createSuspendedSpring", "flipData", "_flipData$springConfi", "overshootClamping", "getOnUpdateFunc", "onAnimationEnd", "flipped", "createStaggeredSprings", "flippedArray", "staggerConfig", "reverse", "speedConfig", "normalizedSpeed", "speed", "min", "max", "nextThreshold", "setEndValueFuncs", "map", "cachedGetOnUpdate", "args", "onUpdate", "bind", "convertMatrix3dArrayTo2dArray", "matrix", "index", "rectInViewport", "_ref5", "top", "innerHeight", "bottom", "left", "innerWidth", "right", "extractFlipConfig", "element", "JSON", "parse", "dataset", "flipConfig", "addTupleToObject", "_assign", "getAllElements", "portalKey", "document", "querySelectorAll", "constants", "getRects", "flippedElements", "child", "getBoundingClientRect", "onFlipKeyUpdate", "_ref2", "_ref2$cachedOrderedFl", "cachedOrderedFlipIds", "_ref2$inProgressAnima", "inProgressAnimations", "_ref2$flippedElementP", "flippedElementPositionsBeforeUpdate", "_ref2$flipCallbacks", "flipCallbacks", "containerEl", "applyTransformOrigin", "spring", "debug", "portalKey", "_ref2$staggerConfig", "staggerConfig", "_ref2$decisionData", "decisionData", "handleEnterUpdateDelete", "onComplete", "onStart", "enabled", "window", "matchMedia", "matches", "_ref", "flippedElementPositionsAfterUpdate", "getRects", "getAllElements", "element", "map", "child", "childBCR", "computedStyle", "getComputedStyle", "dataset", "flipId", "rect", "opacity", "parseFloat", "transform", "reduce", "addTupleToObject", "scopedSelector", "selector", "toArray", "document", "querySelectorAll", "constants", "tempFlipperId", "Math", "random", "toFixed", "flipperId", "getElement", "id", "isFlipped", "unflippedIds", "Object", "keys", "concat", "filter", "baseArgs", "_animateUnflippedElem", "closureResolve", "animatedEnteringElementIds", "onAppear", "animatedExitingElementIds", "onExit", "promiseToReturn", "Promise", "resolve", "fragmentTuples", "exitingElementCount", "onExitCallbacks", "i", "_flippedElementPositi", "domDataForExitAnimations", "parent", "_flippedElementPositi2", "childPosition", "top", "left", "width", "height", "position", "style", "fragmentTuple", "t", "createDocumentFragment", "push", "appendChild", "stop", "removeChild", "DOMException", "forEach", "length", "hideEnteringElements", "animateEnteringElements", "animateExitingElements", "c", "assign", "animateFlippedElementsArgs", "flippedIds", "flip", "_ref6", "_ref6$staggerConfig", "_ref6$decisionData", "flipCompletedPromise", "then", "completedAnimationIds", "firstElement", "body", "ownerDocument", "querySelector", "getDuplicateValsAsStrings", "flipDataArray", "prevRect", "currentRect", "prevOpacity", "currentOpacity", "needsForcedMinVals", "rectInViewport", "_temp", "flippedSpring", "flipConfig", "extractFlipConfig", "springConfig", "flipperSpring", "springPresets", "noWobble", "normalizeSpring", "stagger", "toReturn", "shouldFlip", "previous", "current", "translateDifference", "abs", "scaleDifference", "opacityDifference", "currentTransform", "parse", "toVals", "matrix", "fromVals", "transformsArray", "translate", "translateX", "translateY", "scale", "scaleX", "max", "scaleY", "invertedChildren", "shouldInvert", "invertedChildElements", "convertMatrix3dArrayTo2dArray", "multiply", "applyStyles", "_ref3", "_ref4", "forceMinVals", "isNumber", "minHeight", "minWidth", "stringTransform", "join", "childFlipConfig", "contains", "inverseVals", "transformString", "cachedOnComplete", "animateOpacity", "onStartCalled", "getOnUpdateFunc", "_ref8", "onAnimationEnd", "destroy", "bind", "onSpringUpdate", "getCurrentValue", "currentValue", "vals", "fromVal", "index", "tweenProp", "initializeFlip", "onStartImmediate", "transformOrigin", "_ref9", "isCancellation", "isFunction", "_ref7", "delayUntil", "Boolean", "_ref10", "delayedFlip", "f", "delayUntilSprings", "delayUntilStaggers", "delayedStaggerKeys", "staggerDict", "flipData", "acc", "curr", "immediateFlip", "indexOf", "onSpringActivate", "createSpring", "_assign", "staggerKey", "createStaggeredSprings", "animateFlippedElements", "getFlippedElementPositionsBeforeUpdate", "_ref$flipCallbacks", "_ref$inProgressAnimat", "flippedElements", "inverseFlippedElements", "childIdsToParentBCRs", "parentBCRs", "childIdsToParents", "el", "parentNode", "closest", "exitContainer", "bcrIndex", "findIndex", "n", "getBoundingClientRect", "filteredFlippedElements", "flippedElementPositions", "parentBCR", "animatingElements", "springSystem", "SpringSystem", "FlipContext", "createContext", "PortalContext", "Flipper", "_Component", "_this", "_len", "arguments", "length", "args", "Array", "_key", "call", "apply", "concat", "inProgressAnimations", "flipCallbacks", "el", "o", "_proto", "prototype", "getSnapshotBeforeUpdate", "prevProps", "flipKey", "this", "props", "getFlippedElementPositionsBeforeUpdate", "element", "portalKey", "componentDidUpdate", "_prevState", "cachedData", "onFlipKeyUpdate", "flippedElementPositionsBeforeUpdate", "flippedElementPositions", "cachedOrderedFlipIds", "containerEl", "applyTransformOrigin", "spring", "debug", "staggerConfig", "handleEnterUpdateDelete", "decisionData", "previous", "current", "onComplete", "onStart", "render", "_this2", "_this$props", "flipperMarkup", "React", "createElement", "Provider", "value", "className", "ref", "children", "Component", "defaultProps", "_excluded", "_excluded2", "Flipped", "_ref", "_dataAttributes", "flipId", "inverseFlipId", "rest", "_objectWithoutPropertiesLoose", "child", "isFunctionAsChildren", "Children", "only", "e", "Error", "scale", "translate", "opacity", "utilities", "assign", "dataAttributes", "constants", "DATA_FLIP_CONFIG", "JSON", "stringify", "DATA_FLIP_ID", "String", "DATA_INVERSE_FLIP_ID", "DATA_PORTAL_KEY", "cloneElement", "FlippedWithContext", "_ref2", "shouldFlip", "shouldInvert", "onAppear", "onStartImmediate", "onExit", "onSpringUpdate", "_extends", "Consumer", "data", "isObject", "displayName", "import_react", "import_react", "s", "import_react", "u", "a", "b", "ewma", "map", "packetsSent", "r", "import_react", "import_jsx_dev_runtime", "_s", "_c", "import_react", "import_jsx_dev_runtime", "_s", "_c", "import_react", "import_jsx_dev_runtime", "_s", "_c", "import_jsx_dev_runtime", "_s", "_s2", "_c", "identity", "v", "_c2", "import_jsx_dev_runtime", "_s", "useMeasure", "h", "i", "_c", "import_jsx_dev_runtime", "_c", "import_react", "import_jsx_dev_runtime", "_s", "u", "_c", "import_react", "identity", "sendUserUpdate", "import_react", "e", "import_react", "u", "import_react", "import_jsx_dev_runtime", "_s", "_s2", "_c", "u", "import_jsx_dev_runtime", "_s", "_s2", "_s", "mode", "_c", "_s2", "identity", "u", "_c2"]
}
